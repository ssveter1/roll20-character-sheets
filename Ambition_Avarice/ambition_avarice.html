<input type="radio" name="attr_tab" class="tab tab1" value="1" checked="checked"><span title="Main"></span>
<input type="radio" name="attr_tab" class="tab tab2" value="2"                  ><span title="Equipment"></span>
<input type="radio" name="attr_tab" class="tab tab3" value="3"                  ><span title="NPC"></span>

<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- PAGE 1 ---------------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->
<div class="tab-content tab1 pg1">

<!-- NAME SECTION -->
  <div class="name section columnflex wrap">
    <div class="rowflex nowrap">
      <label>Player: </label>
      <input name="attr_player" type="text" placeholder="Player name">
    </div>
    <div class="rowflex nowrap">
      <label>Character: </label>
      <input name="attr_character_name" type="text" placeholder="character name">
    </div>
    <div class="rowflex nowrap">
      <label>Campaign: </label>
      <input name="attr_campaign" type="text" placeholder="campaign name">
    </div>

    <div class="rowflex nowrap">
      <label class="short">Race: </label>
      <input name="attr_race" type="text" placeholder="human">
    </div>
    <div class="rowflex nowrap">
      <label class="short">Class: </label>
      <input name="attr_class" type="text" placeholder="class">
    </div>
    <div class="rowflex nowrap">
      <label class="short">Gender: </label>
      <input name="attr_gender" type="text" placeholder="gender">
    </div>
  </div>

<!-- LOGO SECTION -->
  <div class="logo section"></div>


<!-- ATTRIBUTES SECTION -->

  <div class="attrs section columnflex nowrap center">
    
    <label class="title">attributes</label>

    <div class="rowflex nowrap">
      <label>Strength</label>
      <input name="attr_str" type="number" value="" placeholder="10">
      <span name="attr_str_mod"></span>
      <button name="roll_str" type="roll" value="&{template:default} {{name= **Strength** (Test)}} {{Roll= [[1d20+(@{str_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Dexterity</label>
      <input name="attr_dex" type="number" value="" placeholder="10">
      <span name="attr_dex_mod"></span>
      <button name="roll_dex" type="roll" value="&{template:default} {{name= **Dexterity** (Test)}} {{Roll= [[1d20+(@{dex_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Constitution</label>
      <input name="attr_con" type="number" value="" placeholder="10">
      <span name="attr_con_mod"></span>
      <button name="roll_con" type="roll" value="&{template:default} {{name= **Constitution** (Test)}} {{Roll= [[1d20+(@{con_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Intelligence</label>
      <input name="attr_int" type="number" value="" placeholder="10">
      <span name="attr_int_mod"></span>
      <button name="roll_int" type="roll" value="&{template:default} {{name= **Intelligence** (Test)}} {{Roll= [[1d20+(@{int_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Wisdom</label>
      <input name="attr_wis" type="number" value="" placeholder="10">
      <span name="attr_wis_mod"></span>
      <button name="roll_wis" type="roll" value="&{template:default} {{name= **Wisdom** (Test)}} {{Roll= [[1d20+(@{wis_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Charisma</label>
      <input name="attr_cha" type="number" value="" placeholder="10">
      <span name="attr_cha_mod"></span>
      <button name="roll_cha" type="roll" value="&{template:default} {{name= **Charisma** (Test)}} {{Roll= [[1d20+(@{cha_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>
    
  </div>

<!-- HP-AC SECTION -->

  <div class="hp-ac section rowflex nowrap">

    <div class="columnflex nowrap center">
      <label class="title">Hit Points</label>

      <div class="hp rowflex nowrap center middle">
        <div>
          <input name="attr_hp" type="number" value="" placeholder="10" style="margin-right: 30px;">
        </div>
        <div>
          <input name="attr_hp_max" type="number" value="" placeholder="10">
        </div>     
      </div>

      <div class="columnflex nowrap spaced die">
        <div class="rowflex nowrap">
          <label style="width:55px;">Hit Die:</label>
          <div>
            <input name="attr_hit_die" type="text" placeholder="d10">
          </div>
        </div>

        <div class="rowflex nowrap">
          <button name="roll_rest" type="roll" value=" &{template:default} {{name=**Rest**}} {{You recover [[1d@{rest}]] hp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}}" class="empty">Rest Roll</button>
          <input name="attr_rest" type="number" style="width:30px;" value="" placeholder="6">
        </div>
      </div>
    </div>

    <div class="columnflex nowrap center">
      <label class="title" style="width:110px;padding-right: 0px;">To Hit Bonus</label>
      <div class="to-hit columnflex center middle">
        <div>
          <input name="attr_to_hit" type="number" value="" placeholder="1" style="width:35px;">
        </div>
      </div>
      <button name="roll_melee" type="roll" value=" &{template:default} {{name=**Attack(Melee/Thrown)**}} {{Attack=[[d20+(@{str_mod}[STR MOD]+@{to_hit}[TO HIT BONUS])]]}}" style="margin-bottom:5px;">Melee</button>
      <button name="roll_ranged" type="roll" value=" &{template:default} {{name=**Attack(Ranged)**}} {{Attack=[[d20+(@{dex_mod}[DEX MOD]+@{to_hit}[TO HIT BONUS])]]}}">Ranged</button>
    </div>

    <div class="columnflex nowrap center">
      <label class="title" style="width: 100px;">Armor Class</label>
      <div class="ac columnflex center middle">
        <div>
          <input name="attr_ac" type="number" value="" placeholder="10">   
        </div>
      </div>
      <div class="infra rowflex nowrap center">
        <label>infravision</label>
        <input name="attr_infravision" type="checkbox" value="">       
      </div>
    </div>
    <div class="columnflex nowrap center buttons">
        <label class="title" style="width: 50px;">Init</label>
        <input name="attr_init_race" type="number" value="0" class="short">
        <button name="roll_init" type="roll" value=" &{template:default} {{name=**Initiative**}} {{Roll=[[d10+(@{wis_mod}[WIS MOD])+(@{init_race}[INIT BONUS])]]}} &{tracker}" class="d10">Init</button>
        <button name="roll_suprise" type="roll" value=" &{template:default} {{name=**Suprise**}} {{Roll=[[d10+(@{wis_mod}[WIS MOD])]]}}" class="d10">Suprise</button>   
    </div>
  </div>

<!-- SAVING THROWS -->

  <div class="saving section columnflex nowrap center">
    <label class="title">Saving Throws</label>
    <div class="rowflex nowrap">
      <label>blast</label>
      <input name="attr_blast" type="number" value="" placeholder="0">
      <button name="roll_blast" type="roll" value="&{template:default} {{name=**Blast** (Saving Throw)}} {{You attempt: [[1d20>@{blast}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>
    <div class="rowflex nowrap">
      <label>death</label>
      <input name="attr_death" type="number" value="" placeholder="0">
      <button name="roll_death" type="roll" value="&{template:default} {{name=**Death** (Saving Throw)}} {{You attempt: [[1d20>@{death}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>paralysis</label>
      <input name="attr_paralysis" type="number" value="" placeholder="0">
      <button name="roll_paralysis" type="roll" value="&{template:default} {{name=**Paralysis** (Saving Throw)}} {{You attempt: [[1d20>@{paralysis}]]}} " class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>poison</label>
      <input name="attr_poison" type="number" value="" placeholder="0">
      <button name="roll_poison" type="roll" value="&{template:default} {{name=**Poison** (Saving Throw)}} {{You attempt: [[1d20>@{poison}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>reflex</label>
      <input name="attr_reflex" type="number" value="" placeholder="0">
      <button name="roll_reflex" type="roll" value="&{template:default} {{name=**Reflex** (Saving Throw)}} {{You attempt: [[1d20>@{reflex}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>spells</label>
      <input name="attr_spells" type="number" value="" placeholder="0">
      <button name="roll_spells" type="roll" value="&{template:default} {{name=**Spells** (Saving Throw)}} {{You attempt: [[1d20>@{spells}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>
    
    <div class="note rowflex nowrap">
      <div class="d20"></div>
      <span>equal or greater</span>     
    </div>

  </div>

<!-- DUNGEON THROWS -->

  <div class="dungeon section columnflex nowrap">
    <label class="title">Dungeon Throws</label>
    <div class="rowflex nowrap">
      <label class="short">climb</label>
      <input name="attr_climb" type="number" value="" placeholder="0">
      <button name="roll_climb" type="roll" value=" &{template:default} {{name=**Climb** (Dungeon Throw)}} {{You attempt: [[1d20>@{climb}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label class="short">force</label>
      <input name="attr_force" type="number" value="" placeholder="0">
      <button name="roll_force" type="roll" value=" &{template:default} {{name=**Force** (Dungeon Throw)}} {{You attempt: [[1d20>@{force}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label class="short">locks</label>
      <input name="attr_locks" type="number" value="" placeholder="0">
      <button name="roll_locks" type="roll" value=" &{template:default} {{name=**Locks** (Dungeon Throw)}} {{You attempt: [[1d20>@{locks}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label class="short">notice</label>
      <input name="attr_notice" type="number" value="" placeholder="0">
      <button name="roll_notice" type="roll" value=" &{template:default} {{name=**Notice** (Dungeon Throw)}} {{You attempt: [[1d20>(@{notice})]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label class="short">sneak</label>
      <input name="attr_sneak" type="number" value="" placeholder="0">
      <button name="roll_sneak" type="roll" value=" &{template:default} {{name=**Sneak** (Dungeon Throw)}} {{You attempt: [[1d20>@{sneak}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label class="short">traps</label>
      <input name="attr_traps" type="number" value="" placeholder="0">
      <button name="roll_traps" type="roll" value=" &{template:default} {{name=**Traps** (Dungeon Throw)}} {{You attempt: [[1d20>@{traps}]]}} {{( 1 is success, 0 is failure) }}" class="d20"></button>
    </div>
  </div>

<!-- IN SIX -->
  <div class="sixes section columnflex nowrap center">
    <label class="title">In Sixes Chances</label>
    <div class="rowflex nowrap spaced">
      <input name="attr_sixes1_name" type="text" style="width:60px;" placeholder="Name">
      <input name="attr_sixes1_info" type="text" style="width:120px;" placeholder="info">
      <input name="attr_sixes1" type="number" value="2" style="width: 25px;">
      <button name="roll_sixes1" type="roll" value="&{template:default} {{name=**@{sixes1_name}** (In Sixes)}} {{You attempt: [[1d6cs0cf0>@{sixes1}]] }}  {{( 1 is success, 0 is failure) }}" class="d6"></button>
    </div>
    <div class="rowflex nowrap spaced">
      <input name="attr_sixes2_name" type="text" style="width:60px;" placeholder="Name">
      <input name="attr_sixes2_info" type="text" style="width:120px;" placeholder="info">
      <input name="attr_sixes2" type="number" value="2" style="width: 25px;">
      <button name="roll_sixes2" type="roll" value="&{template:default} {{name=**@{sixes2_name}** (In Sixes)}} {{You attempt: [[1d6cs0cf0>@{sixes2}]] }}  {{( 1 is success, 0 is failure) }}" class="d6"></button>
    </div>
    <div class="rowflex nowrap spaced">
      <input name="attr_sixes3_name" type="text" style="width:60px;" placeholder="Name">
      <input name="attr_sixes3_info" type="text" style="width:120px;" placeholder="info">
      <input name="attr_sixes3" type="number" value="2" style="width: 25px;">
      <button name="roll_sixes3" type="roll" value="&{template:default} {{name=**@{sixes3_name}** (In Sixes)}} {{You attempt: [[1d6cs0cf0>@{sixes3}]] }}  {{( 1 is success, 0 is failure) }}" class="d6"></button>
    </div>
    <div class="rowflex nowrap spaced">
      <input name="attr_sixes4_name" type="text" style="width:60px;" placeholder="Name">
      <input name="attr_sixes4_info" type="text" style="width:120px;" placeholder="info">
      <input name="attr_sixes4" type="number" value="2" style="width: 25px;">
      <button name="roll_sixes4" type="roll" value="&{template:default} {{name=**@{sixes4_name}** (In Sixes)}} {{You attempt: [[1d6cs0cf0>@{sixes4}]] }}  {{( 1 is success, 0 is failure) }}" class="d6"></button>
    </div>
    <div class="note rowflex nowrap">
      <div class="d6"></div>
      <span>equal or lower</span>
    </div>
    
  </div>

<!-- PROFICIENCIES -->

  <div class="profs section columnflex nowrap center">
    <label class="title">proficiencies</label>
    <textarea name="attr_proficiencies" placeholder="proficiencies"></textarea>
  </div>

<!-- KNOWN SPELLS -->

  <div class="k-spells section columnflex nowrap center">
    <label class="title">Spells Known</label>
    <textarea name="attr_known_spells" placeholder="Magic Missile"></textarea>
  </div>

<!-- CLASS FEATURES -->

  <div class="class section columnflex nowrap center">
    <label class="title">Class Features</label>
    <div class="rowflex nowrap">
      <label>Expertise:</label>
      <input name="attr_expertise" type="text" placeholder="expertise">
    </div>
    <div class="rowflex nowrap">
      <label>Identify:</label>
      <input name="attr_identify" type="text" placeholder="identify">
    </div>
    <div class="rowflex nowrap">
      <label>Other:</label>
      <input name="attr_other" type="text" placeholder="other">
    </div>
  </div>

<!-- languages -->

  <div class="lang section columnflex nowrap center">
    <label class="title">Languages</label>
    <textarea name="attr_languages" placeholder="Common"></textarea>
  </div>

<!-- spells per day -->

  <div class="spells-d section columnflex nowrap center">
    <label class="title">Spells per Day</label>
    <div class="rowflex nowrap">
      <div class="columnflex nowrap">
        <label>1st</label>
        <input name="attr_lvl1_spells" type="number" value="" class="ref" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label>2nd</label>
        <input name="attr_lvl2_spells" type="number" value="" class="ref" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label>3rd</label>
        <input name="attr_lvl3_spells" type="number" value="" class="ref" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label>4th</label>
        <input name="attr_lvl4_spells" type="number" value="" class="ref" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label>5th</label>
        <input name="attr_lvl5_spells" type="number" value="" class="ref" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label>6th</label>
        <input name="attr_lvl6_spells" type="number" value="" class="ref" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label>7th</label>
        <input name="attr_lvl7_spells" type="number" value="" class="ref" placeholder="0">
      </div>      
    </div>
  </div>

<!-- encumberance -->

  <div class="speed section columnflex nowrap center">
    <label class="title">Encumberance & Speed</label>
    <div class="rowflex nowrap center">
      <div class="columnflex nowrap">
        <label class="short">status</label>
        <input name="attr_status" type="number" value="" class="ref" placeholder="status">
      </div>
      <div class="columnflex nowrap">
        <label class="short">weight</label>
        <input name="attr_weight" type="number" value="" class="ref" placeholder="weight">
      </div>
      <div class="columnflex nowrap">
        <label style="margin-right:10px;">exploration</label>
        <input name="attr_exploration" type="number" value="" class="ref" placeholder="30" style="margin-left: 15px;">
      </div>
      <div class="columnflex nowrap">
        <label class="short">combat</label>
        <input name="attr_combat" type="number" value="" class="ref" placeholder="30">
      </div>
      <div class="columnflex nowrap">
        <label class="short">sprint</label>
        <input name="attr_sprint" type="number" value="" class="ref" placeholder="30">
      </div>
    </div>

  </div>

<!-- memorized spells -->

  <div class="spells-m section columnflex nowrap center">
    <label class="title">Memorized Spells</label>
    <textarea name="attr_spells_memo" placeholder="Magic Missile, Mage Armor etc."></textarea>
  </div>

<!-- misc -->

  <div class="misc section columnflex nowrap center">
    <label class="title">Miscellany</label>
    <textarea name="attr_misc" placeholder="Misc. notes"></textarea>
  </div>

<!-- EXP -->

  <div class="exp section columnflex nowrap center">
    <label class="title">Experience Points</label>
    <div class="rowflex nowrap">
      <label>current</label>
      <input name="attr_xp" type="number" value="" placeholder="0">
    </div>
    <div class="rowflex nowrap">
      <label>next level</label>
      <input name="attr_xp_next" type="number" value="" placeholder="100">
    </div>
    <div class="rowflex nowrap">
      <label>character level</label>
      <input name="attr_level" type="number" value="1">
    </div>
  </div>

</div>

<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- PAGE 2 ---------------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->

<div class="tab-content tab2 pg2">

<!-- coin -->

  <div class="coin section columnflex nowrap center">
    <label class="title">Coin</label>
    <div class="rowflex nowrap">
      <div class="columnflex nowrap">
        <label class="short">CP</label>
        <input name="attr_cp" type="number" value="" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label class="short">SP</label>
        <input name="attr_sp" type="number" value="" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label class="short">EP</label>
        <input name="attr_ep" type="number" value="" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label class="short">GP</label>
        <input name="attr_gp" type="number" value="" placeholder="0">
      </div>
      <div class="columnflex nowrap">
        <label class="short">PP</label>
        <input name="attr_pp" type="number" value="" placeholder="0">
      </div>      
    </div>

  </div>

<!-- equipment -->

  <div class="equip section columnflex nowrap center">
    <label class="title">Equipment</label>
    <fieldset class="repeating_eq">
      <div class="rowflex nowrap">
        <input name="attr_name" type="text" placeholder="name" style="width:30%;margin-right: 5px;">
        <input name="attr_info" type="text" placeholder="info" style="width: 67%;">
      </div>
    </fieldset>
  </div>


<!-- companions -->

  <div class="companions section columnflex nowrap center">
    <label class="title">Companions</label>
    <fieldset class="repeating_companions">
      <div class="rowflex wrap">
        <input name="attr_name" type="text" placeholder="name" style="width: 55%;">
        <input name="attr_type" type="text" placeholder="type" style="width: 36%;margin-left: 10px;">
        <input name="attr_abilities" type="text" placeholder="abilities" style="width:100%;">        
      </div>
    </fieldset>
  </div>


</div>


<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- PAGE 3 ---------------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->


<div class="tab-content tab3 pg3">
  
  <!-- NPC main block -->
  <div class="npc-main section rowflex nowrap center">
    <div class="npc-main section columnflex nowrap center">
      <label>Name:</label>
      <input name="attr_character_name" type="text">      
    </div>

    <div class="npc-main section columnflex nowrap center">
      <label>HP</label>
      <div class="hp rowflex nowrap center middle">
        <div>
          <input name="attr_hp" type="number" value="" placeholder="10" style="margin-right: 15px;">
        </div>
        <div>
          <input name="attr_hp_max" type="number" value="" placeholder="10">
        </div>     
      </div>     
    </div>

    <div class="npc-main section columnflex nowrap center">
      <label>AC:</label>
      <input name="attr_ac" type="number" placeholder="10">      
    </div>

    <div class="npc-main section columnflex nowrap center">
      <label>To Hit:</label>
      <input name="attr_to_hit" type="number" placeholder="10">      
    </div>
  </div>

  <!-- NOTES -->
  <div class="notes section columnflex nowrap center">
    <label class="title">Notes</label>
    <textarea name="attr_notes"></textarea>
  </div>
  
  <!-- duplicate of buttons -->
  <div class="columnflex nowrap center npc-buttons">
    <label class="title" style="width: 50px;">Init</label>
    <input name="attr_init_race" type="number" value="0" class="short">
    <button name="roll_init" type="roll" value=" &{template:default} {{name=**Initiative**}} {{Roll=[[d10+(@{wis_mod}[WIS MOD])+(@{init_race}[INIT BONUS])]]}} &{tracker}" class="d10">Init</button>
    <button name="roll_suprise" type="roll" value=" &{template:default} {{name=**Suprise**}} {{Roll=[[d10+(@{wis_mod}[WIS MOD])]]}}" class="d10">Suprise</button>
    <button name="roll_melee" type="roll" value=" &{template:default} {{name=**Attack(Melee/Thrown)**}} {{Attack=[[d20+(@{str_mod}[STR MOD]+@{to_hit}[TO HIT BONUS])]]}}">Melee</button>
    <button name="roll_ranged" type="roll" value=" &{template:default} {{name=**Attack(Ranged)**}} {{Attack=[[d20+(@{dex_mod}[DEX MOD]+@{to_hit}[TO HIT BONUS])]]}}">Ranged</button>
  </div>

  <!-- dulicate of Attrs -->
  <div class="npc-attrs section columnflex nowrap" style="padding-top: 15px;">
    <label class="title">attributes</label>

    <div class="rowflex nowrap">
      <label>Str</label>
      <input name="attr_str" type="number" value="" placeholder="10">
      <span name="attr_str_mod"></span>
      <button name="roll_str" type="roll" value="&{template:default} {{name= **Strength** (Test)}} {{Roll= [[1d20+(@{str_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Dex</label>
      <input name="attr_dex" type="number" value="" placeholder="10">
      <span name="attr_dex_mod"></span>
      <button name="roll_dex" type="roll" value="&{template:default} {{name= **Dexterity** (Test)}} {{Roll= [[1d20+(@{dex_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Con</label>
      <input name="attr_con" type="number" value="" placeholder="10">
      <span name="attr_con_mod"></span>
      <button name="roll_con" type="roll" value="&{template:default} {{name= **Constitution** (Test)}} {{Roll= [[1d20+(@{con_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Int</label>
      <input name="attr_int" type="number" value="" placeholder="10">
      <span name="attr_int_mod"></span>
      <button name="roll_int" type="roll" value="&{template:default} {{name= **Intelligence** (Test)}} {{Roll= [[1d20+(@{int_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Wis</label>
      <input name="attr_wis" type="number" value="" placeholder="10">
      <span name="attr_wis_mod"></span>
      <button name="roll_wis" type="roll" value="&{template:default} {{name= **Wisdom** (Test)}} {{Roll= [[1d20+(@{wis_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>

    <div class="rowflex nowrap">
      <label>Cha</label>
      <input name="attr_cha" type="number" value="" placeholder="10">
      <span name="attr_cha_mod"></span>
      <button name="roll_cha" type="roll" value="&{template:default} {{name= **Charisma** (Test)}} {{Roll= [[1d20+(@{cha_mod})]]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}} {{ d20 + mod vs DC&nbsp;&nbsp;&nbsp;}}" class="d20"></button>
    </div>
  </div>

</div>


<!--  --------------------------------------------------------------------------------- -->
<!--  --------------------------- Sheet workers --------------------------------------- -->
<!--  --------------------------------------------------------------------------------- -->

<input name="attr_str_mod" type="hidden" value="0">
<input name="attr_dex_mod" type="hidden" value="0">
<input name="attr_con_mod" type="hidden" value="0">
<input name="attr_wis_mod" type="hidden" value="0">
<input name="attr_int_mod" type="hidden" value="0">
<input name="attr_cha_mod" type="hidden" value="0">
<input name="attr_rest" type="hidden" value="0">

<script type="text/worker">

const int = score => parseInt(score, 10) || 0;


const stats = ["str", "dex", "con", "wis", "int", "cha"];
stats.forEach(stat => {
    on(`change:${stat}`, () => {
        getAttrs([stat], values => {
            const stat_base = int(values[stat]);
            //console.log(stat_base);
            let stat_mod = 0;
            if (stat_base >= 19) stat_mod = "+4";
            else if (stat_base >= 18) stat_mod = "+3";
            else if (stat_base >= 16) stat_mod = "+2";
            else if (stat_base >= 14) stat_mod = "+1";
            else if (stat_base >= 12) stat_mod = "+0";
            else if (stat_base >= 8) stat_mod = "-1";
            else if (stat_base >= 6) stat_mod = "-2";
            else stat_mod = "-3";
            
            setAttrs({
                [`${stat}_mod`]: stat_mod
            });
        });
    });
});

/*
on(`change:con`, () => {
    getAttrs("con_mod", value => {
        const con = int(value["con_mod"]);
        console.log(con);
        let rest = 0;
        if (con >= 17) rest = "1d12";
        else if (con >= 15) rest = "1d10";
        else if (con >= 13) rest = "1d8";
        else if (con >= 9) rest = "1d6";
        else if (con >= 7) rest = "1d4";
        else if (con >= 5) rest = "1d2";
        else if (con >= 3) rest = "1";
        else rest = "1";
        
        setAttrs({
            rest : rest
        });
    });
});
*/

</script>