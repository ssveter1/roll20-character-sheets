<div class="main">
    <div class="header flex-center section">
      <h1><em>Cyberpunk Red</em></h1>
      <span>Character Sheet</span>
      <div>&nbsp;</div>
      <label>Roll initiative: <button type="roll" name="roll_initiative" value="/roll 1d10 + @{ref} &{tracker}" class="skillroll"></label>
    </div>
    <div class="common section">
      <label>Character name:</label><input name="attr_character_name" type="text"/>
      <label>Role:</label><input name="attr_type" type="text" />
    </div>
    <div class="stats section flex-row">
      <span><label>INT </label><input type="number" name="attr_int" value="" class="inputstats"/></span>
      <span><label>REF </label><input type="number" name="attr_ref" value="" class="inputstats"/></span>
      <span><label>DEX </label><input type="number" name="attr_dex" value="" class="inputstats"/></span>
      <span><label>TECH </label><input type="number" name="attr_tech" value="" class="inputstats"/></span>
      <span><label>COOL </label><input type="number" name="attr_cool" value="" class="inputstats"/></span>
      <span><label>WILL </label><input type="number" name="attr_will" value="" class="inputstats"/></span>
      <span><label>LUCK </label><input type="number" name="attr_luck" value="" class="inputstats"/></span>
      <span><label>MOVE </label><input type="number" name="attr_move" value="" class="inputstats"/></span>
      <span><label>BODY </label><input type="number" name="attr_body" value="" class="inputstats"/></span>
      <span><label>EMP </label><input type="number" name="attr_emp" value="" class="inputstats"/></span>
    </div>
    <div class="hits section flex-row">
      <span><label>Starting HP</label><input name="attr_startinghits" type="number" /></span>
      <span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <span><label>Seriously Wounded</label><input name="attr_seriouslywounded" type="number" /></span>
      <span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <span><label>Death Save</label><input name="attr_deathsave" type="number" /></span>
      <span class="spacer">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
      <span><label>Current HP</label><input name="attr_hp" type="number" style="font-weight:bold"/></span>
    </div>
    <div class="skills section">
      <label>Skills</label>
      <fieldset class="repeating_skills">
          <input name="attr_skill" class="skill" type="text" />
          <select name="attr_skillstat" class="skillstat">
            <option value="@{int} + 1d10">INT</option>
            <option value="@{ref} + 1d10">REF</option>
            <option value="@{dex} + 1d10">DEX</option>
            <option value="@{tech} + 1d10">TECH</option>
            <option value="@{cool} + 1d10">COOL</option>
            <option value="@{will} + 1d10">WILL</option>
            <option value="@{luck} + 1d10">LUCK</option>
            <option value="@{move} + 1d10">MOVE</option>
            <option value="@{body} + 1d10">BODY</option>
            <option value="@{emp} + 1d10">EMP</option>
          </select>
          <input name="attr_skillbonus" type="number" value="0"/>
          <button type="roll" name="roll_skill" value="/roll @{skillbonus} + @{skillstat}" class="skillroll">
          </button>
      </fieldset>
    </div>
    <div class="armor section">
      <label>Armor</label>
      <fieldset class="repeating_armor">
          <input name="attr_armor" type="text" class="armorname"/>
          <div class="flex-row">
            <label>Head: <input name="attr_armorhead" type="number" style="display:inline"></label>
            <label>Body: <input name="attr_armorbody" type="number" style="display:inline"></label>
          </div>
      </fieldset>
    </div>
    <div class="weapons section">
      <label>Weapons</label>
      <fieldset class="repeating_weapon">
          <label>Name: <input name="attr_weapon" type="text" /></label>
          <label>Damage: <input name="attr_weapondamage" type="text" class="weapondamage"/>
          <button type="roll" name="roll_skill" value="/roll @{weapondamage}" class="damageroll"></label>
      </fieldset>
    </div>
    <div class="life section flex-col">
      <label>Background</label>
      <textarea name="attr_background" onkeyup="this.style.height = '1px';this.style.height=(25+this.scrollHeight)+'px';"></textarea>
      <label>Motivation</label>
      <textarea name="attr_motivation"></textarea>
      <label>Goals</label>
      <textarea name="attr_goals"></textarea>
      <label>Friends</label>
      <textarea name="attr_friends"></textarea>
      <label>Enemies</label>
      <textarea name="attr_enemies"></textarea>
      <label>Romance</label>
      <textarea name="attr_romance"></textarea>
      <label>Personality</label>
      <textarea name="attr_personality"></textarea>
    </div>
    <div class="gear section">
      <label>Gear</label>
      <fieldset class="repeating_gear">
          <textarea name="attr_gear"></textarea>
      </fieldset>
    </div>
</div>
<script type="text/worker">
on("change:body", function() {
   getAttrs(["body"], function(values) {
      setAttrs({
          startinghits: values.body * 5,
          seriouslywounded: Math.ceil((values.body * 5) / 2),
          deathsave: values.body,
      });
   });
});
</script>
