
<input name="attr_version" type="hidden" value="3.0"/>
<input class="sheet_type" name="attr_sheet_type" type="hidden" value="pc"/>
<input class="character-type" name="attr_flag_special" type="hidden" value="mundane"/>
<div class="pc">
  <div class="tabs"><img alt="Shadowrun black and metallic logo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Shadowrun5thEdition/images/ShadowrunLogo.png"/>
    <h1 data-i18n="character">Character</h1>
    <label data-i18n-title="character name" title="character name">
      <input type="text" name="attr_character_name" placeholder="Character name" title="@{character_name}"/>
    </label>
    <h1 data-i18n="player">Player</h1>
    <label data-i18n-title="player name" title="player name">
      <input type="text" name="attr_player_name" placeholder="Player name" title="@{player_name}"/>
    </label>
    <h2 data-i18n-title="/w GM">/w GM</h2>
    <label class="switch" data-i18n-title="whisper rolls to gm" title="whisper rolls to gm">
      <input class="whisper-toggle" name="attr_gm_toggle" type="checkbox" value="/w gm"/><span class="slider"></span>
    </label>
    <h2 data-i18n-title="wounds">wounds</h2>
    <label class="switch" data-i18n-title="wounds" title="wounds">
      <input class="whisper-toggle" name="attr_wounds_toggle" type="checkbox" value="@{wounds}"/><span class="slider"></span>
    </label>
    <h2 data-i18n-title="modifiers">modifiers</h2>
    <label class="switch" data-i18n-title="modifiers" title="modifiers">
      <input class="whisper-toggle" name="attr_modifiers_toggle" type="checkbox" value="?{Modifiers +/-|0}"/><span class="slider"></span>
    </label>
    <h2 data-i18n-title="edge">edge</h2>
    <label class="switch" data-i18n-title="edge" title="edge">
      <input class="whisper-toggle" name="attr_edge_toggle" type="checkbox" value="@{edge}"/><span class="slider"></span>
    </label>
    <button name="d6" title="Roll D6s" type="roll" value="@{gm_toggle} &amp;{template:rolls}{{header=^{d6}}}{{base=^{d6}}}{{dice=[[(?{d6s|0}d6&gt;5)]]}}">L</button>
    <input name="attr_tab" type="hidden" value="core"/>
    <button class="pictos" name="act_tab_options" title="@{tab}" type="action">y</button>
    <button data-i18n="core" name="act_tab_core" type="action" title="@{tab}">core</button>
    <button data-i18n="arms" name="act_tab_arms" type="action" title="@{tab}">arms</button>
    <button data-i18n="augs" name="act_tab_augs" type="action" title="@{tab}">augs</button>
    <button data-i18n="gear" name="act_tab_gear" type="action" title="@{tab}">gear</button>
    <button data-i18n="magic" name="act_tab_magic" type="action" title="@{tab}">magic</button>
    <button data-i18n="matrix" name="act_tab_matrix" type="action" title="@{tab}">matrix</button>
    <button data-i18n="social" name="act_tab_social" type="action" title="@{tab}">social</button>
    <button data-i18n="vehicle" name="act_tab_vehicle" type="action" title="@{tab}">vehicle</button>
  </div>
  <input class="options_toggle" name="attr_tab" type="hidden" value="options"/>
  <div class="static pc-col">
<div class="pc-row core-info">
	<div class="header"><div class="triangle"></div><h1 data-i18n="personal">Personal Data</h1></div>
	<div class="border-box">
		<div class="pc-box small-box">
			<div class="row-long pd-nam">
				<h2 data-i18n="namealias">NAME/PRIMARY ALIAS</h2><input type="text" name="attr_name" placeholder="name" title="@{name}" />
			</div>
			<div class="row-long pd-meta">
				<h2 data-i18n="metatype">Metatype</h2><input type="text" name="attr_metatype" placeholder="metatype" title="@{metatype}" />
				<h2 data-i18n="ethnicity">Ethnicity</h2><input type="text" name="attr_ethnicity" placeholder="ethnicity" title="@{ethnicity}" />
			</div>
			<div class="row-long pd-age">
				<h2 data-i18n="age">Age</h2><input type="text" name="attr_age" placeholder="age" title="@{age}" />
				<h2 data-i18n="sex">Sex</h2><input type="text" name="attr_sex" placeholder="sex" title="@{sex}" />
				<h2 data-i18n="height-u">Height</h2><input type="text" name="attr_height" placeholder="height" title="@{height}" >
				<h2 data-i18n="weight">Weight</h2><input type="text" name="attr_weight" placeholder="weight" title="@{weight}" />
			</div>
			<div class="row-long pd-rep">
				<h2 data-i18n="streetcred">Street Cred</h2><input type="number" name="attr_street_cred" placeholder="#" title="@{street_cred}" />
				<h2 data-i18n="notoriety">Notoriety</h2><input type="number" name="attr_notoriety" placeholder="#" title="@{notoriety}" />
				<h2 data-i18n="publicawareness">Public Awereness</h2><input type="number" name="attr_public_awareness" placeholder="#" title="@{public_awareness}" />
			</div>
			<div class="row-long pd-kar">
				<h2 data-i18n="karma">Karma</h2><input type="number" name="attr_karma" placeholder="#" title="@{karma}" />
				<h2 data-i18n="totalkarma">Total Karma</h2><input type="number" name="attr_total_karma" placeholder="#" title="@{total_karma}" />
				<h2 data-i18n="misc">Misc</h2><input type="text" name="attr_misc" placeholder="misc" title="@{misc}" />
			</div>
		</div>
	</div>
</div>
<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ START OF ATTRIBUTES ROW ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
<div class="pc-row">
	<div class="header"><div class="triangle"></div><h1 data-i18n="attributes">Attributes</h1></div>
	<div class="border-box">
		<div class="pc-box medium-box attr-box">
			<input type="checkbox" class="settings-toggle" name="attr_flag_attribute" checked="checked" title="Settings toggle" /><span>x</span>
			<div class="attr-col attr-col-left">
				<!-- ~~:+: Body :+:~~ -->
				<input type="hidden" name="attr_body" value="" />
				<button type="roll" name="body" value="@{gm_toggle} &{template:rolls}{{header=^{body}}}{{base=^{attributes}}}{{dice=[[(@{body}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span class="red" data-i18n="body">Body</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_body_base" value="" placeholder="3" title="@{body_base}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_body_modifier" value="" placeholder="0" title="@{body_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_body" title="@{body}" /></span>
					</div>
					<div class="display"><span name="attr_display_body" title="@{body}"></span></div>
				</div>
				<!-- ~~:+: Agility :+:~~ -->
				<input type="hidden" name="attr_agility" value="" />
				<button type="roll" name="agility" value="@{gm_toggle} &{template:rolls}{{header=^{agility}}}{{base=^{attributes}}}{{dice=[[(@{agility}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span class="red" data-i18n="agility">Agility</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_agility_base" value="" placeholder="3" title="@{agility_base}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_agility_modifier" value="" placeholder="0" title="@{agility_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_agility" title="@{agility}" /></span>
					</div>
					<div class="display"><span name="attr_display_agility" title="@{agility}"></span></div>
				</div>
				<!-- ~~:+: Reaction :+:~~ -->
				<input type="hidden" name="attr_reaction" value="" />
				<button type="roll" name="reaction" value="@{gm_toggle} &{template:rolls}{{header=^{reaction}}}{{base=^{attributes}}}{{dice=[[(@{reaction}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span class="red" data-i18n="reaction">Reaction</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_reaction_base" value="" placeholder="3" title="@{reaction_base}"  /><span class="tiny-span"> + </span>
						<input type="number" name="attr_reaction_modifier" value="" placeholder="0" title="@{reaction_modifier}"  /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_reaction" title="@{reaction}" /></span>
					</div>
					<div class="display"><span name="attr_display_reaction" title="@{reaction}"></span></div>
				</div>
				<!-- ~~:+: Strength :+:~~ -->
				<input type="hidden" name="attr_strength" value="" />
				<button type="roll" name="strength" value="@{gm_toggle} &{template:rolls}{{header=^{strength}}}{{base=^{attributes}}}{{dice=[[(@{strength}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span class="red" data-i18n="strength">Strength</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_strength_base" value="" placeholder="3" title="@{strength_base}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_strength_modifier" value="" placeholder="0" title="@{strength_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_strength" title="@{strength}" /></span>
					</div>
					<div class="display"><span name="attr_display_strength" title="@{strength}"></span></div>
				</div>
				<!-- ~~:+: Willpower :+:~~ -->
				<input type="hidden" name="attr_willpower" value="" />
				<button type="roll" name="willpower" value="@{gm_toggle} &{template:rolls}{{header=^{willpower}}}{{base=^{attributes}}}{{dice=[[(@{willpower}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span data-i18n="willpower">Willpower</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_willpower_base" value="" placeholder="3" title="@{willpower_base}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_willpower_modifier" value="" placeholder="0" title="@{willpower_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_willpower" title="@{willpower}" /></span>
					</div>
					<div class="display"><span name="attr_display_willpower" title="@{willpower}"></span></div>
				</div>
				<!-- ~~:+: Logic :+:~~ -->
				<input type="hidden" name="attr_logic" value="" />
				<button type="roll" name="logic" value="@{gm_toggle} &{template:rolls}{{header=^{logic}}}{{base=^{attributes}}}{{dice=[[(@{logic}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span data-i18n="logic">Logic</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_logic_base" value="" placeholder="3" title="@{logic_base}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_logic_modifier" value="" placeholder="0" title="@{logic_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_logic" title="@{logic}" /></span>
					</div>
					<div class="display"><span name="attr_display_logic" title="@{logic}"></span></div>
				</div>
				<!-- ~~:+: Intuition :+:~~ -->
				<input type="hidden" name="attr_intuition" value="" />
				<button type="roll" name="intuition" value="@{gm_toggle} &{template:rolls}{{header=^{intuition}}}{{base=^{attributes}}}{{dice=[[(@{intuition}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span data-i18n="intuition">Intuition</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_intuition_base" value="" placeholder="3" title="@{intuition_base}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_intuition_modifier" value="" placeholder="0" title="@{intuition_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_intuition" title="@{intuition}" /></span>
					</div>
					<div class="display"><span name="attr_display_intuition" title="@{intuition}"></span></div>
				</div>
				<!-- ~~:+: Charisma :+:~~ -->
				<input type="hidden" name="attr_charisma" value="" />
				<button type="roll" name="charisma" value="@{gm_toggle} &{template:rolls}{{header=^{charisma}}}{{base=^{attributes}}}{{dice=[[(@{charisma}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span data-i18n="charisma">Charisma</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_charisma_base" value="" placeholder="3" title="@{charisma_base}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_charisma_modifier" value="" placeholder="0" title="@{charisma_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_display_charisma" title="@{charisma}" /></span>
					</div>
					<div class="display"><span name="attr_display_charisma" title="@{charisma}"></span></div>
				</div>
				<!-- ~~:+: Edge :+:~~ -->
				<button type="roll" name="edge" value="@{gm_toggle} &{template:rolls}{{header=^{edge}}}{{base=^{attributes}}}{{dice=[[(@{edge}+(@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span data-i18n="edge">Edge</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_edge" placeholder="3" title="@{edge}" />
					</div>
					<div class="display"><span name="attr_edge" title="@{edge}"></span></div>
				</div>
			</div>
			<div class="attr-col attr-col-right">
				<!-- ~~:+: Essence :+:~~ -->
				<label data-i18n="essence">Essence</label>
				<div class="attr-und">
					<div class="settings"><input type="text" min="0" name="attr_essence" placeholder="6" title="@{essence}" /></div>
					<div class="display"><span name="attr_essence" title="@{essence}"></span></div>
				</div>
				<!-- ~~:+: Magic or Resonance :+:~~ -->
				<input type="hidden" name="attr_magic" value="3" />
				<input type="hidden" name="attr_resonance" value="3" />
				<label data-i18n="magicres">Magic/Resonance</label>
				<div class="attr-und">
					<div class="settings">
						<div class="hide-magic">
							<input type="number" name="attr_magic_base" placeholder="0" title="@{magic_base}" /><span class="tiny-span"> + </span>
							<input type="number" name="attr_magic_modifier" placeholder="0" title="@{magic_modifier}" /><span class="tiny-span"> = </span>
							<span class="totals" name="attr_display_magic" title="@{magic}" /></span>
						</div>
						<div class="hide-resonance">
							<input type="number" name="attr_resonance_base" placeholder="0" title="@{resonance_base}" /><span class="tiny-span"> + </span>
							<input type="number" name="attr_resonance_modifier" placeholder="0" title="@{resonance_modifier}" /><span class="tiny-span"> = </span>
							<span class="totals" name="attr_display_resonance" title="@{resonance}" /></span>
						</div>
					</div>
					<div class="display">
						<div class="hide-magic"><span name="attr_display_magic" title="@{magic}"></span></div>
						<div class="hide-resonance"><span name="attr_display_resonance" title="@{resonance}"></span></div>
					</div>
				</div>
				<!-- ~~:+: Initiative :+:~~ -->
				<input type="hidden" name="attr_initiative_mod" value="6" />
				<input type="hidden" name="attr_initiative_dice" value="1" min="1" max="5" />
				<button class="attr-ini" name="initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{initiative}}}{{base=^{base}}}{{dice=[[(@{initiative_mod}+@{wounds_toggle}+@{modifiers_toggle})+(@{initiative_dice})d6cf0 &{tracker}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span class="attr-ini red" data-i18n="initiative">Initiative</span></button>
				<div class="attr-und attr-ini">
					<div class="settings">
						<input type="number" name="attr_initiative_modifier" value="0" placeholder="0" title="@{initiative_modifier}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_initiative_dice_modifier" value="0" min="0" max="4" placeholder="modifier" title="@{initiative_dice_modifier}" />
						<span class="tiny-span"> = </span>
						<span name="attr_display_initiative_mod"></span><span class="tiny-span" title="@{initiative_mod}"> + </span>
						<span name="attr_initiative_dice"></span><span class="tiny-span" title="@{initiative_dice}" data-i18n="d6"> d6</span>
					</div>
					<div class="display">
						<span name="attr_display_initiative_mod" title="@{initiative_mod}"></span><span class="tiny-span"> + </span>
						<span name="attr_initiative_dice" title="@{initiative_dice}"></span><span class="tiny-span" data-i18n="d6"> d6</span>
					</div>
				</div>
				<!-- ~~:+: Matrix Initative :+:~~ -->
				<input type="hidden" name="attr_matrix_mod" value="0" />
				<input type="hidden" name="attr_matrix_dice" max="5" />
				<button class="attr-ini" name="matrix initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{matrixinitiative}}}{{base=^{base}}}{{dice=[[(@{matrix_mod}+@{wounds_toggle}+@{modifiers_toggle})+(@{matrix_dice})d6cf0 &{tracker}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
					<span class="attr-ini red init-settings" data-i18n="matrixinit">Matrix Ini</span>
					<span class="attr-ini red init-display" data-i18n="matrixinitiative">Matrix Initiative</span>
				</button>
				<div class="attr-und attr-ini">
					<div class="settings">
						<input type="number" name="attr_matrix_mod_modifier" value="0" placeholder="0" title="@{matrix_mod_modifier}" /><span class="tiny-span"> + </span>
						<input type="number" name="attr_matrix_dice_modifier" value="0" min="0" max="4" placeholder="modifier" title="@{matrix_dice_modifier}" />
						<span class="tiny-span"> = </span>
						<span name="attr_display_matrix_mod" title="@{matrix_mod}"></span><span class="tiny-span"> + </span>
						<span name="attr_matrix_dice" title="@{matrix_mod}"></span><span class="tiny-span" data-i18n="d6"> d6</span>
					</div>
					<div class="display">
						<span name="attr_display_matrix_mod" title="@{matrix_mod}"></span><span class="tiny-span"> + </span>
						<span name="attr_matrix_dice" title="@{matrix_dice}"></span><span class="tiny-span" data-i18n="d6"> d6</span>
					</div>
				</div>
				<!-- ~~:+: Astral Initative :+:~~ -->
				<input type="hidden" name="attr_astral_mod" value="6" />
				<input type="hidden" name="attr_astral_dice" value="3" max="5" />
				<button class="attr-ini" name="astral initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{header=^{astralinitiative}}}{{base=^{base}}}{{dice=[[(@{astral_mod}+@{wounds_toggle}+@{modifiers_toggle})+(@{astral_dice})d6cf0 &{tracker}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
					<span class="attr-ini red init-settings" data-i18n="astralini">Astral Ini</span>
					<span class="attr-ini red init-display" data-i18n="astralinitiative">Astral Initiative</span>
				</button>
				<div class="attr-und attr-ini">
					<div class="settings">
						<div class="hide-magic">
							<input type="number" name="attr_astral_mod_modifier" value="0" placeholder="modifier" title="@{astral_mod_modifier}" /><span class="tiny-span"> + </span>
							<input type="number" name="attr_astral_dice_modifier" value="0" min="0" max="3" placeholder="modifier" title="@{astral_dice_modifier}" />
							<span class="tiny-span"> = </span>
							<span name="attr_display_astral_mod" title="@{astral_mod}"></span><span class="tiny-span"> + </span>
							<span name="attr_astral_dice" title="@{astral_dice}"></span><span class="tiny-span" data-i18n="d6"> d6</span>
						</div>
					</div>
					<div class="display">
						<span name="attr_display_astral_mod" title="@{astral_mod}"></span><span class="tiny-span"> + </span>
						<span name="attr_astral_dice" title="@{astral_dice}"></span><span class="tiny-span" data-i18n="d6"> d6</span>
					</div>
				</div>
				<!-- ~~:+: Composure :+:~~ -->
				<input type="hidden" name="attr_composure" value="" />
				<button type="roll" name="composure" value="@{gm_toggle} &{template:rolls}{{header=^{composure}}}{{base=^{base}}}{{dice=[[(@{composure}+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}}"><span data-i18n="composure">Composure</span></button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_composure_modifier" placeholder="0" title="@{composure_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_composure" title="@{composure}" /></span>
					</div>
					<div class="display">
						<span name="attr_composure" title="@{composure}"></span>
					</div>
				</div>
				<!-- ~~:+: Judge Intentions :+:~~ -->
				<input type="hidden" name="attr_judge_intentions" value="" />
				<button type="roll" name="judge intentions" value="@{gm_toggle} &{template:rolls}{{header=^{judgeintentions}}}{{base=^{base}}}{{dice=[[(@{judge_intentions}+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
					<span data-i18n="judgeintentions">Judge Intentions</span>
				</button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_judge_intentions_modifier" placeholder="0" title="@{judge_intentions_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_judge_intentions" title="@{judge_intentions}" /></span>
					</div>
					<div class="display">
						<span name="attr_judge_intentions" title="@{judge_intentions}"></span>
					</div>
				</div>
				<!-- ~~:+: Memory :+:~~ -->
				<input type="hidden" name="attr_memory" value="" />
				<button type="roll" name="memory" value="@{gm_toggle} &{template:rolls}{{header=^{memory}}}{{base=^{base}}}{{dice=[[(@{memory}+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
					<span data-i18n="memory">Memory</span>
				</button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_memory_modifier" placeholder="0" title="@{memory_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_memory" title="@{memory}" /></span>
					</div>
					<div class="display">
						<span name="attr_memory" title="@{memory}"></span>
					</div>
				</div>
				<!-- ~~:+: Lift & Carry :+:~~ -->
				<input type="hidden" name="attr_lift_carry" value="" />
				<button type="roll" name="lift & carry" value="@{gm_toggle} &{template:rolls}{{header=^{liftcarry}}}{{base=^{base}}}{{dice=[[(@{lift_carry}+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
					<span data-i18n="liftcarry">Lift & Carry</span>
				</button>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_lift_carry_modifier" placeholder="0" title="@{lift_carry_modifier}" /><span class="tiny-span"> = </span>
						<span class="totals" name="attr_lift_carry" title="@{lift_carry}" /></span>
					</div>
					<div class="display">
						<span name="attr_lift_carry" title="@{lift_carry}"></span>
					</div>
				</div>
				<!-- ~~:+: Walk & Run :+:~~ -->
				<input type="hidden" name="attr_walk" value="12" />
				<input type="hidden" name="attr_run" value="24" />
				<label data-i18n="movement">Movement</label>
				<div class="attr-und">
					<div class="settings">
						<input type="number" name="attr_walk_modifier" value="" placeholder="0" title="@{walk_modifier}" /><span class="tiny-span"> / </span>
						<input type="number" name="attr_run_modifier" value="" placeholder="0" title="@{run_modifier}" /><span class="tiny-span"> / +</span>
						<input type="number" name="attr_movement_mod" value="2" placeholder="2" title="@{movement_mod}" />
					</div>
					<div class="display">
						<span name="attr_walk" title="@{walk}"></span><span> / </span>
						<span name="attr_run" title="@{run}"></span><span> / +</span>
						<span name="attr_movement_mod" title="@{movement_mod}"></span>
					</div>
				</div>
			</div>
			<div class="attr-lim">
				<div class="settings">
					<label data-i18n="physicallimit">Physical Limit: </label><input type="number" name="attr_physical_limit_modifier" placeholder="0" title="@{physical_limit_modifier}" />
						<span class="tiny-span"> = </span><span class="totals" name="attr_physical_limit" title="@{physical_limit}" /></span>
					<label data-i18n="mentallimit">Mental Limit: </label><input type="number" name="attr_mental_limit_modifier" placeholder="0" title="@{mental_limit_modifier}" />
						<span class="tiny-span"> = </span><span class="totals" name="attr_mental_limit" title="@{mental_limit}" /></span>
					<label data-i18n="sociallimit">Social Limit: </label><input type="number" name="attr_social_limit_modifier" placeholder="0" title="@{social_limit_modifier}" />
						<span class="tiny-span"> = </span><span class="totals" name="attr_social_limit" title="@{social_limit}" /></span>
				</div>
				<div class="display">
					<label data-i18n="physicallimit">Physical Limit: </label><div><span name="attr_physical_limit" title="@{physical_limit}"></span></div>
					<label data-i18n="mentallimit">Mental Limit: </label><div><span name="attr_mental_limit" title="@{mental_limit}"></span></div>
					<label data-i18n="sociallimit">Social Limit: </label><div><span name="attr_social_limit" title="@{social_limit}"></span></div>
				</div>
			</div>
			<div class="edg-hex" style="width: 50%;">
				<input class="edge-zero"type="hidden" name="attr_edge_hex" value="0"/>
				<input class="hex-hider"type="hidden" name="attr_edge" value="1"/>
				<input type="checkbox" name="attr_edge_hex" value="1" /><span class="hexagon"></span>
				<input type="checkbox" name="attr_edge_hex" value="2" /><span class="hexagon"></span>
				<input type="checkbox" name="attr_edge_hex" value="3" /><span class="hexagon"></span>
				<input type="checkbox" name="attr_edge_hex" value="4" /><span class="hexagon"></span>
				<input type="checkbox" name="attr_edge_hex" value="5" /><span class="hexagon"></span>
				<input type="checkbox" name="attr_edge_hex" value="6" /><span class="hexagon"></span>
				<input type="checkbox" name="attr_edge_hex" value="7" /><span class="hexagon"></span>
				<input type="checkbox" name="attr_edge_hex" value="8" /><span class="hexagon"></span>
			</div>
		</div>
	</div>
</div><!-- ~~~~~~~~ End of PC Attributes~~~~~~~~ -->

    <div class="pc-row">
      <div class="header">
        <div class="header htab">
          <div class="triangle"></div>
          <input class="tab-switch" name="attr_skill_toggle" title="Active skills" type="radio" value="active"/>
          <h1 data-i18n="active">active..</h1>
          <div class="right-tri"></div>
        </div>
        <div class="header htab">
          <div class="triangle"></div>
          <input class="tab-switch" name="attr_skill_toggle" title="Knowledge skills" type="radio" value="knowledge"/>
          <h1 data-i18n="know">know..</h1>
          <div class="right-tri"></div>
        </div>
        <div class="header htab">
          <div class="triangle"></div>
          <input class="tab-switch" name="attr_skill_toggle" title="Language skills" type="radio" value="language"/>
          <h1 data-i18n="lang">lang..</h1>
          <div class="right-tri"></div>
        </div>
        <div class="triangle"></div>
        <h1 data-i18n="skills">Skills</h1>
      </div>
      <div class="border-box skill-box">
        <div class="pc-box medium-box">
          <div class="row-long">
            <h2 data-i18n="skill">Skill</h2>
            <h2 data-i18n="rtg">RTG</h2>
            <h2 data-i18n="attribute">Attribute</h2>
            <h2 data-i18n="limit">Limit</h2>
          </div>
          <input class="tab-switch" name="attr_skill_toggle" type="hidden" value="active"/>
          <div class="skills-active">
            <div class="row-long">
              <input name="attr_default_display" type="hidden" value="Agility"/>
              <button data-i18n="default" name="default" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{default}}}{{base=@{default_display}}}{{dice=[[((@{default_attribute}+-1)+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">default</button><span class="text-align-center">-</span>
              <select class="attribute-select" name="attr_default_attribute" title="Skill attribute">
                <option data-i18n="body" value="@{body}">Body</option>
                <option data-i18n="agility" value="@{agility}" selected="selected">Agility</option>
                <option data-i18n="reaction" value="@{reaction}">Reaction</option>
                <option data-i18n="strength" value="@{strength}">Strength</option>
                <option data-i18n="willpower" value="@{willpower}">Willpower</option>
                <option data-i18n="logic" value="@{logic}">Logic</option>
                <option data-i18n="intuition" value="@{intuition}">Intuition</option>
                <option data-i18n="charisma" value="@{charisma}">Charisma</option>
                <option data-i18n="magic" value="@{magic}">Magic</option>
                <option data-i18n="resonance" value="@{resonance}">Resonance</option>
              </select>
              <select class="limit-select" name="attr_limit" title="Skill limit">
                <option value="none">-</option>
                <option data-i18n="mental" value="@{mental_limit}">Mental</option>
                <option data-i18n="physical" value="@{physical_limit}" selected="selected">Physical</option>
                <option data-i18n="social" value="@{social_limit}">Social</option>
                <option data-i18n="attack" value="@{attack}">Attack</option>
                <option data-i18n="data_processing" value="@{data_processing}">Data Processing</option>
                <option data-i18n="firewall" value="@{firewall}">Firewall</option>
                <option data-i18n="sleaze" value="@{sleaze}">Sleaze</option>
              </select>
            </div>
            <fieldset class="repeating_active">
              <input name="attr_display_rating" type="hidden"/>
              <input name="attr_display_specialization" type="hidden" value=""/>
              <input name="attr_display_limit" type="hidden" value="Physical"/>
              <input name="attr_display_attribute" type="hidden" value="Agility"/>
              <input name="attr_dicepool" type="hidden" value="0"/>
              <div class="row-long">
                <input class="settings-toggle" name="attr_flag" type="hidden" value="settings" title="@{repeating_active_${x}_flag"/>
                <div class="buttons">
                  <button name="skill" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{display_limit}}}"><span name="attr_display"></span></button>
                  <button name="specialization" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute}+2)+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Spec: @{specialization}, @{display_limit}}}"><span name="attr_display_specialization"></span></button>
                </div><span class="text-align-center" name="attr_display_rating" title="@{repeating_active_${x}_display_rating}"></span>
                <select class="attribute-select" name="attr_attribute" title="@{repeating_active_${x}_attribute}">
                  <option data-i18n="body" value="@{body}">Body</option>
                  <option data-i18n="agility" value="@{agility}" selected="selected">Agility</option>
                  <option data-i18n="reaction" value="@{reaction}">Reaction</option>
                  <option data-i18n="strength" value="@{strength}">Strength</option>
                  <option data-i18n="willpower" value="@{willpower}">Willpower</option>
                  <option data-i18n="logic" value="@{logic}">Logic</option>
                  <option data-i18n="intuition" value="@{intuition}">Intuition</option>
                  <option data-i18n="charisma" value="@{charisma}">Charisma</option>
                  <option data-i18n="magic" value="@{magic}">Magic</option>
                  <option data-i18n="resonance" value="@{resonance}">Resonance</option>
                </select>
                <select class="limit-select" name="attr_limit" value="physical_limit" title="@{repeating_active_${x}_limit}">
                  <option value="none">-</option>
                  <option data-i18n="mental" value="@{mental_limit}">Mental</option>
                  <option data-i18n="physical" value="@{physical_limit}" selected="selected">Physical</option>
                  <option data-i18n="social" value="@{social_limit}">Social</option>
                  <option data-i18n="attack" value="@{attack}">Attack</option>
                  <option data-i18n="data_processing" value="@{data_processing}">Data Processing</option>
                  <option data-i18n="firewall" value="@{firewall}">Firewall</option>
                  <option data-i18n="sleaze" value="@{sleaze}">Sleaze</option>
                </select>
                <button class="pictos" name="act_skill" type="action">x</button>
                <select class="skill-select settings" name="attr_skill" value="Close Combat Group" title="@{repeating_active_${x}_skill}"><option class="option-headers" disabled="true" data-i18n="combatskills">Combat Skills</option>
<option class="option-groups" value="Close Combat Group" data-i18n="closecombat">Close Combat Group</option>
<option class="option-groups" value="Firearms Group" data-i18n="firearms">Firearms Group</option>
<option value="Archery" data-i18n="archery">Archery</option>
<option value="Automatics" data-i18n="automatics">Automatics</option>
<option value="Blades" data-i18n="blades">Blades</option>
<option value="Clubs" data-i18n="clubs">Clubs</option>
<option value="Exotic Melee" data-i18n="exoticmelee">Exotic Melee</option>
<option value="Exotic Range" data-i18n="exoticrange">Exotic Range</option>
<option value="Heavy Weapons" data-i18n="heavyweapons">Heavy Weapons</option>
<option value="Longarms" data-i18n="longarms">Longarms</option>
<option value="Pistols" data-i18n="pistols">Pistols</option>
<option value="Throwing Weapons" data-i18n="throwingweapons">Throwing Weapons</option>
<option value="Unarmed Combat" data-i18n="unarmedcombat">Unarmed Combat</option>
<option class="option-headers" disabled="true" data-i18n="physicalskills">Physical Skills</option>
<option class="option-groups" value="Athletics Group" data-i18n="athleticsgroup">Athletics Group</option>
<option class="option-groups" value="Outdoors Group" data-i18n="outdoorsgroup">Outdoors Group</option>
<option class="option-groups" value="Stealth Group" data-i18n="stealthgroup">Stealth Group</option>
<option value="Disguise" data-i18n="disguise">Disguise</option>
<option value="Diving" data-i18n="diving">Diving</option>
<option value="Escape Artist" data-i18n="escapeartist">Escape Artist</option>
<option value="Flight" data-i18n="flight">Flight</option>
<option value="Free Fall" data-i18n="freefall">Free Fall</option>
<option value="Gymnastics" data-i18n="gymnastics">Gymnastics</option>
<option value="Palming" data-i18n="palming">Palming</option>
<option value="Perception" data-i18n="perception">Perception</option>
<option value="Running" data-i18n="running">Running</option>
<option value="Sneaking" data-i18n="sneaking">Sneaking</option>
<option value="Survival" data-i18n="survival">Survival</option>
<option value="Swimming" data-i18n="swimming">Swimming</option>
<option value="Tracking" data-i18n="tracking">Tracking</option>
<option class="option-headers" disabled="true" data-i18n="socialskills">Social Skills</option>
<option class="option-groups" value="Acting Group" data-i18n="actinggroup">Acting Group</option>
<option class="option-groups" value="Influence Group" data-i18n="influencegroup">Influence Group</option>
<option value="Con" data-i18n="con">Con</option>
<option value="Etiquette" data-i18n="etiquette">Etiquette</option>
<option value="Impersonation" data-i18n="impersonation">Impersonation</option>
<option value="Instruction" data-i18n="instruction">Instruction</option>
<option value="Intimidation" data-i18n="intimidation">Intimidation</option>
<option value="Leadership" data-i18n="leadership">Leadership</option>
<option value="Negotiation" data-i18n="negotiation">Negotiation</option>
<option value="Performance" data-i18n="performance">Performance</option>
<option class="option-headers" disabled="true" data-i18n="magicalskills">Magical Skills</option>
<option class="option-groups" value="Conjuring Group" data-i18n="conjuringgroup">Conjuring Group</option>
<option class="option-groups" value="Enchanting Group" data-i18n="enchantinggroup">Enchanting Group</option>
<option class="option-groups" value="Sorcery Group" data-i18n="sorcerygroup">Sorcery Group</option>
<option value="Alchemy" data-i18n="alchemy">Alchemy</option>
<option value="Arcana" data-i18n="arcana">Arcana</option>
<option value="Assensing" data-i18n="assensing">Assensing</option>
<option value="Astral Combat" data-i18n="astralcombat">Astral Combat</option>
<option value="Banishing" data-i18n="banishing">Banishing</option>
<option value="Binding" data-i18n="binding">Binding</option>
<option value="Counterspelling" data-i18n="counterspelling">Counterspelling</option>
<option value="Disenchanting" data-i18n="disenchanting">Disenchanting</option>
<option value="Ritual Spellcasting" data-i18n="ritualspellcasting">Ritual Spellcasting</option>
<option value="Spellcasting" data-i18n="spellcasting">Spellcasting</option>
<option value="Summoning" data-i18n="summoning">Summoning</option>
<option class="option-headers" disabled="true" data-i18n="resonanceskills">Resonance Skills</option>
<option class="option-groups" value="Tasking Group" data-i18n="taskinggroup">Tasking Group</option>
<option value="Compiling" data-i18n="compiling">Compiling</option>
<option value="Decompiling" data-i18n="decompiling">Decompiling</option>
<option value="Registering" data-i18n="registering">Registering</option>
<option class="option-headers" disabled="true" data-i18n="technicalskills">Technical Skills</option>
<option class="option-groups" value="Biotech Group" data-i18n="biotechgroup">Biotech Group</option>
<option class="option-groups" value="Cracking Group" data-i18n="crackinggroup">Cracking Group</option>
<option class="option-groups" value="Electronics Group" data-i18n="electronicsgroup">Electronics Group</option>
<option class="option-groups" value="Engineering Group" data-i18n="engineeringgroup">Engineering Group</option>
<option value="Aeronautics Mechanic" data-i18n="aeronauticsmechanic">Aeronautics Mechanic</option>
<option value="Animal Handling" data-i18n="animalhandling">Animal Handling</option>
<option value="Armorer" data-i18n="armorer">Armorer</option>
<option value="Artisan" data-i18n="artisan">Artisan</option>
<option value="Automotive Mechanic" data-i18n="automotivemechanic">Automotive Mechanic</option>
<option value="Biotechnology" data-i18n="biotechnology">Biotechnology</option>
<option value="Chemistry" data-i18n="chemistry">Chemistry</option>
<option value="Computer" data-i18n="computer">Computer</option>
<option value="Cybercombat" data-i18n="cybercombat">Cybercombat</option>
<option value="Cybertechnology" data-i18n="cybertechnology">Cybertechnology</option>
<option value="Demolitions" data-i18n="demolitions">Demolitions</option>
<option value="Electronic Warfare" data-i18n="eletronicwarfare">Electronic Warfare</option>
<option value="First Aid" data-i18n="firstaid">First Aid</option>
<option value="Forgery" data-i18n="forgery">Forgery</option>
<option value="Hacking" data-i18n="hacking">Hacking</option>
<option value="Hardware" data-i18n="hardware">Hardware</option>
<option value="Industrial Mechanic" data-i18n="industrialmechanic">Industrial Mechanic</option>
<option value="Locksmith" data-i18n="locksmith">Locksmith</option>
<option value="Medicine" data-i18n="medicine">Medicine</option>
<option value="Nautical Mechanic" data-i18n="nauticalmechanic">Nautical Mechanic</option>
<option value="Navigation" data-i18n="navigation">Navigation</option>
<option value="Gunnery" data-i18n="gunnery">Gunnery</option>
<option value="Pilot Aerospace" data-i18n="pilotaerospace">Pilot Aerospace</option>
<option value="Pilot Aircraft" data-i18n="pilotaircraft">Pilot Aircraft</option>
<option value="Pilot Exotic Vehicle" data-i18n="pilotexoticvehicle">Pilot Exotic Vehicle</option>
<option value="Pilot Ground Craft" data-i18n="pilotgroundcraft">Pilot Ground Craft</option>
<option value="Pilot Walker" data-i18n="pilotwalker">Pilot Walker</option>
<option value="Pilot Watercraft" data-i18n="pilotwatercraft">Pilot Watercraft</option>
<option value="Software" data-i18n="software">Software</option>
                </select>
                <label class="settings" data-i18n-title="rating" title="rating">
                  <input name="attr_rating" min="0" placeholder="0" type="number" title="@{repeating_active_${x}_rating}"/>
                </label>
                <label class="settings" data-i18n-title="ratingmodifier" title="Rating Modifier"><span data-i18n="ratingmodifier">Rating Modifier</span>
                  <input name="attr_rating_modifier" placeholder="0" type="number" title="@{repeating_active_${x}_rating_modifier}"/>
                </label>
                <label class="settings" data-i18n-title="specializations" title="Specializations"> <span data-i18n="specializations">Specializations</span>
                  <input name="attr_specialization}" placeholder="Specalizations" type="text" title="@{repeating_active_${x}_specialization}"/>
                </label>
                <label class="settings" data-i18n-title="notes" title="notes"><span data-i18n="notes">Notes</span>
                  <textarea name="attr_notes" value="" placeholder="Notes" title="@{repeating_active_${x}_notes}"></textarea>
                </label>
              </div>
            </fieldset>
          </div>
          <div class="skills-know">
            <fieldset class="repeating_knowledge">
              <input name="attr_display_rating" type="hidden"/>
              <input name="attr_display_specialization" type="hidden" value=""/>
              <input name="attr_display_limit" type="hidden" value="Mental"/>
              <input name="attr_display_attribute" type="hidden" value="Logic"/>
              <input name="attr_dicepool" type="hidden" value="0"/>
              <div class="row-long">
                <input class="settings-toggle" name="attr_flag" type="hidden" value="settings" title="@{repeating_know_${x}_flag"/>
                <div class="buttons">
                  <button name="skill" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{display_limit}}}"><span name="attr_display"></span></button>
                  <button name="specialization" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute}+2)+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Spec: @{specialization}, @{display_limit}}}"><span name="attr_display_specialization"></span></button>
                </div><span class="text-align-center" name="attr_display_rating" title="@{repeating_know_${x}_display_rating}"></span>
                <select class="attribute-select" name="attr_attribute" title="@{repeating_know_${x}_attribute}">
                  <option data-i18n="body" value="@{body}">Body</option>
                  <option data-i18n="agility" value="@{agility}">Agility</option>
                  <option data-i18n="reaction" value="@{reaction}">Reaction</option>
                  <option data-i18n="strength" value="@{strength}">Strength</option>
                  <option data-i18n="willpower" value="@{willpower}">Willpower</option>
                  <option data-i18n="logic" value="@{logic}" selected="selected">Logic</option>
                  <option data-i18n="intuition" value="@{intuition}">Intuition</option>
                  <option data-i18n="charisma" value="@{charisma}">Charisma</option>
                  <option data-i18n="magic" value="@{magic}">Magic</option>
                  <option data-i18n="resonance" value="@{resonance}">Resonance</option>
                </select>
                <select class="limit-select" name="attr_limit" value="physical_limit" title="@{repeating_know_${x}_limit}">
                  <option value="none">-</option>
                  <option data-i18n="mental" value="@{mental_limit}" selected="selected">Mental</option>
                  <option data-i18n="physical" value="@{physical_limit}">Physical</option>
                  <option data-i18n="social" value="@{social_limit}">Social</option>
                  <option data-i18n="attack" value="@{attack}">Attack</option>
                  <option data-i18n="data_processing" value="@{data_processing}">Data Processing</option>
                  <option data-i18n="firewall" value="@{firewall}">Firewall</option>
                  <option data-i18n="sleaze" value="@{sleaze}">Sleaze</option>
                </select>
                <button class="pictos" name="act_skill" type="action">x</button>
                <label class="settings" data-i18n-title="skill" title="skill">
                  <input name="attr_skill" placeholder="knowledge" type="text" title="@{repeating_know_${x}_skill}"/>
                </label>
                <label class="settings" data-i18n-title="rating" title="rating">
                  <input name="attr_rating" min="0" placeholder="0" type="number" title="@{repeating_know_${x}_rating}"/>
                </label>
                <label class="settings" data-i18n-title="ratingmodifier" title="Rating Modifier"><span data-i18n="ratingmodifier">Rating Modifier</span>
                  <input name="attr_rating_modifier" placeholder="0" type="number" title="@{repeating_know_${x}_rating_modifier}"/>
                </label>
                <label class="settings" data-i18n-title="specializations" title="Specializations"> <span data-i18n="specializations">Specializations</span>
                  <input name="attr_specialization}" placeholder="Specalizations" type="text" title="@{repeating_know_${x}_specialization}"/>
                </label>
                <label class="settings" data-i18n-title="notes" title="notes"><span data-i18n="notes">Notes</span>
                  <textarea name="attr_notes" value="" placeholder="Notes" title="@{repeating_know_${x}_notes}"></textarea>
                </label>
              </div>
            </fieldset>
          </div>
          <div class="skills-lang">
            <fieldset class="repeating_language">
              <input name="attr_display_rating" type="hidden"/>
              <input name="attr_display_specialization" type="hidden" value=""/>
              <input name="attr_display_limit" type="hidden" value="Social"/>
              <input name="attr_display_attribute" type="hidden" value="Charisma"/>
              <input name="attr_dicepool" type="hidden" value="0"/>
              <div class="row-long">
                <input class="settings-toggle" name="attr_flag" type="hidden" value="settings" title="@{repeating_lang_${x}_flag"/>
                <div class="buttons">
                  <button name="skill" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{display_limit}}}"><span name="attr_display"></span></button>
                  <button name="specialization" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute}+2)+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Spec: @{specialization}, @{display_limit}}}"><span name="attr_display_specialization"></span></button>
                </div><span class="text-align-center" name="attr_display_rating" title="@{repeating_lang_${x}_display_rating}"></span>
                <select class="attribute-select" name="attr_attribute" title="@{repeating_lang_${x}_attribute}">
                  <option data-i18n="body" value="@{body}">Body</option>
                  <option data-i18n="agility" value="@{agility}">Agility</option>
                  <option data-i18n="reaction" value="@{reaction}">Reaction</option>
                  <option data-i18n="strength" value="@{strength}">Strength</option>
                  <option data-i18n="willpower" value="@{willpower}">Willpower</option>
                  <option data-i18n="logic" value="@{logic}">Logic</option>
                  <option data-i18n="intuition" value="@{intuition}">Intuition</option>
                  <option data-i18n="charisma" value="@{charisma}" selected="selected">Charisma</option>
                  <option data-i18n="magic" value="@{magic}">Magic</option>
                  <option data-i18n="resonance" value="@{resonance}">Resonance</option>
                </select>
                <select class="limit-select" name="attr_limit" value="physical_limit" title="@{repeating_lang_${x}_limit}">
                  <option value="none">-</option>
                  <option data-i18n="mental" value="@{mental_limit}">Mental</option>
                  <option data-i18n="physical" value="@{physical_limit}">Physical</option>
                  <option data-i18n="social" value="@{social_limit}" selected="selected">Social</option>
                  <option data-i18n="attack" value="@{attack}">Attack</option>
                  <option data-i18n="data_processing" value="@{data_processing}">Data Processing</option>
                  <option data-i18n="firewall" value="@{firewall}">Firewall</option>
                  <option data-i18n="sleaze" value="@{sleaze}">Sleaze</option>
                </select>
                <button class="pictos" name="act_skill" type="action">x</button>
                <label class="settings" data-i18n-title="skill" title="skill">
                  <input name="attr_skill" placeholder="language" type="text" title="@{repeating_lang_${x}_skill}"/>
                </label>
                <label class="settings" data-i18n-title="rating" title="rating">
                  <input name="attr_rating" min="0" placeholder="0" type="number" title="@{repeating_lang_${x}_rating}"/>
                </label>
                <label class="settings" data-i18n-title="ratingmodifier" title="Rating Modifier"><span data-i18n="ratingmodifier">Rating Modifier</span>
                  <input name="attr_rating_modifier" placeholder="0" type="number" title="@{repeating_lang_${x}_rating_modifier}"/>
                </label>
                <label class="settings" data-i18n-title="specializations" title="Specializations"> <span data-i18n="specializations">Specializations</span>
                  <input name="attr_specialization}" placeholder="Specalizations" type="text" title="@{repeating_lang_${x}_specialization}"/>
                </label>
                <label class="settings" data-i18n-title="notes" title="notes"><span data-i18n="notes">Notes</span>
                  <textarea name="attr_notes" value="" placeholder="Notes" title="@{repeating_lang_${x}_notes}"></textarea>
                </label>
              </div>
            </fieldset>
          </div>
        </div>
      </div>
    </div>
  </div><div class="core pc-col">
	<div class="pc-row">
		<div class="header right-header"><h1 data-i18n="corecombatinfo">Core Combat Info</h1><div class="right-tri"></div></div>
		<div class="border-box">
			<div class="pc-box small-box core-combat">
				<div class="row-long cc-arm">
					<h2 data-i18n="primaryarmor">Primary Armor</h2>
					<button type="roll" name="soak" value="@{gm_toggle} &{template:rolls}{{header=^{soak}}}{{base=^{base}}}{{dice=[[((@{soak})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}} style="width: 32%;">
					<span name="attr_armor_name" title="@{soak}"></span></button>
					<h3 data-i18n="rating">Rating</h3>
					<button type="roll" name="armor" value="@{gm_toggle} &{template:rolls}{{header=^{armor}}}{{base=^{armor}}}{{dice=[[((@{armor_rating})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
					<span name="attr_armor_rating" title="@{armor_rating}"></span></button>
					<div class="armor-buttons">
						<button type="roll" name="defense" value="@{gm_toggle} &{template:rolls}{{header=^{defense}}}{{base=^{base}}}{{dice=[[((@{defense})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Defense Roll"><span class="pictosC" title="@{defense}">e</span></button>
						<button type="roll" name="acid protection" value="@{gm_toggle} &{template:rolls}{{header=^{acidprotection}}}{{base=^{base}}}{{dice=[[((@{soak}+@{acid_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Acid Protection"><span class="pictos3" title="@{acid_modifier}">d</span></button>
						<button type="roll" name="cold protection" value="@{gm_toggle} &{template:rolls}{{header=^{coldprotection}}}{{base=^{base}}}{{dice=[[((@{soak}+@{cold_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Cold Protection"><span class='pictos' title="@{cold_modifier}">b</span></button>
						<button type="roll" name="electrical protection" value="@{gm_toggle} &{template:rolls}{{header=^{electricalprotection}}}{{base=^{base}}}{{dice=[[((@{soak}+@{electrical_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Electrical Protection"><span class='pictos' title="@{electrical_modifier}">e</span></button>
						<button type="roll" name="fire protection" value="@{gm_toggle} &{template:rolls}{{header=^{fireprotection}}}{{base=^{base}}}{{dice=[[((@{soak}+@{fire_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Fire Protection"><span class="pictos3" title="@{fire_modifier}">j</span></button>
						<button type="roll" name="radiation protection" value="@{gm_toggle} &{template:rolls}{{header=^{radiationprotection}}}{{base=^{base}}}{{dice=[[((@{soak}+@{radiation_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Radiation Protection"><span class="pictos3" title="@{radiation_modifier}">l</span></button>
					</div>
				</div>
				<div class="row-long cc-row">
					<h2 data-i18n="primaryrangedweapon">Primary Ranged Weapon</h2>
					<button type="roll" name="primary range" value="@{gm_toggle} &{template:rolls}{{header=@{primary_range_weapon}}}{{base=^{base}}}{{dice=[[((@{primary_range_weapon_skill}+@{primary_range_weapon_dicepool}+@{agility})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{primary_range_weapon_mode}, ACC @{primary_range_weapon_acc}, DV @{primary_range_weapon_damage}, AP @{primary_range_weapon_ap}}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Primary range weapon"><span name="attr_primary_range_weapon" title="@{primary_range_weapon}"></span></button>
					<!-- Ammo removal button -->
					<button name="act_shots_remove" type="action">4</button>
					<button type="action" name="act_primary_ammo" title="Shots Fired">
						<img alt="small handgun icon" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Shadowrun5thEdition/images/gun.png" /><span name="attr_shots_fired"></span>
					</button>
					<button name="act_shots_add" type="action">4</button>
				</div>
				<div class="cc-row">
					<h3 data-i18n="dam">Dam</h3><span name="attr_primary_range_weapon_damage" title="@{primary_range_weapon_damage}"></span>
					<h3 data-i18n="acc">ACC</h3><span name="attr_primary_range_weapon_acc" title="@{primary_range_weapon_acc}"></span>
					<h3 data-i18n="ap">AP</h3><span name="attr_primary_range_weapon_ap" title="@{primary_range_weapon_ap}"></span>
					<h3 data-i18n="mode">Mode</h3><span name="attr_primary_range_weapon_mode" title="@{primary_range_weapon_mode}"></span>
					<h3 data-i18n="rc">RC</h3><span name="attr_primary_range_weapon_recoil" title="@{primary_range_weapon_recoil}"></span>
					<h3 data-i18n="ammo">Ammo</h3>
					<span name="attr_primary_range_weapon_ammo" title="@{primary_range_weapon_ammo}"></span>
					<span name="attr_primary_range_weapon_ammo_max" title="@{primary_range_weapon_ammo_max}"></span>
					<button class="pictos" name="act_reload" type="action">0</button>
				</div>
				<div class="row-long cc-row">
					<h2 data-i18n="primarymeleeweapon">Primary Melee Weapon</h2>
					<button type="roll" name="primary melee" value="@{gm_toggle} &{template:rolls}{{header=@{primary_melee_weapon}}}{{base=^{base}}}{{dice=[[((@{primary_melee_weapon_skill}+@{primary_melee_weapon_dicepool}+@{agility})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=ACC @{primary_melee_weapon_acc}, DV @{primary_melee_weapon_damage}, AP @{primary_melee_weapon_ap}, Reach @{primary_melee_weapon_reach}}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Primary melee weapon"><span name="attr_primary_melee_weapon" title="@{primary_melee_weapon}"></span></button>
				</div>
				<div class="cc-row">
					<h3 data-i18n="reach">Reach</h3><span name="attr_primary_melee_weapon_reach" title="@{primary_melee_weapon_reach}"></span>
					<h3 data-i18n="dam">Dam</h3><span name="attr_primary_melee_weapon_damage" title="@{primary_melee_weapon_damage}"></span>
					<h3 data-i18n="acc">ACC</h3><span name="attr_primary_melee_weapon_acc" title="@{primary_melee_weapon_acc}"></span>
					<h3 data-i18n="ap">AP</h3><span name="attr_primary_melee_weapon_ap" title="@{primary_melee_weapon_ap}"></span>
				</div>
			</div>
		</div>
	</div>
	<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ START OF THE CONDITION MONITOR ROW  ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	<div class="pc-row">
		<div class="header right-header"><h1 data-i18n="conditionmonitor">Condition Monitor</h1><div class="right-tri"></div></div>
		<div class="border-box">
			<div class="pc-box medium-box condition-box">
				<input type="checkbox" class="settings-toggle" name="attr_flag_condition" checked="checked" title="Settings toggle" /><span>x</span>
				<div class="settings">
					<label data-i18n="conditionmonitormodifiers">Condition Monitor Modifiers (P/S): </label>
					<input type="hidden" name="attr_physical" value="10" />
					<input type="hidden" name="attr_stun" value="10" />
					<input type="hidden" name="attr_physical_max" min="0" value="10" />
					<input type="hidden" name="attr_stun_max" min="0" value="10" />
					<input type="number" name="attr_physical_modifier" value="" placeholder="#" title="@{physical_modifier}" /><span> / </span>
					<input type="number" name="attr_stun_modifier" value="" placeholder="#" title="@{stun_modifier}" /><br />
					<input type="hidden" name="attr_overflow" value="3" />
					<label data-i18n="overflowmodifier">Overflow Modifier</label><input type="number" name="attr_overflow_modifier" value="" placeholder="#" title="@{overflow_modifier}" /><br />
					<label data-i18n="paintolerance">Pain Tolerance</label><input type="number" name="attr_pain_tolerance" value="0" placeholder="#" title="@{pain_tolerance}" />
					<div class="con-footer">
						<span data-i18n="painfooter">Low Pain Tolernace adds a -1 and High Pain Tolerance adds a +1 per rank.</span>
					</div>
				</div>
				<div class="display">
					<div class="con-track">
						<input type="hidden" name="attr_physical_damage" value="0" />
						<button type="action" name="act_cond_reset_physical" data-i18n="physicaldamagetrack">Physical Damage Track</button>
						<div class="squares">
							<input class="hex-hider" type="hidden" name="attr_physical_max" value="10" />
							<input type="radio" name="attr_physical_damage" value="1" /><span></span>
							<input type="radio" name="attr_physical_damage" value="2" /><span></span>
							<input type="radio" name="attr_physical_damage" value="3" /><span></span><div>-1</div>
							<input type="radio" name="attr_physical_damage" value="4" /><span></span>
							<input type="radio" name="attr_physical_damage" value="5" /><span></span>
							<input type="radio" name="attr_physical_damage" value="6" /><span></span><div>-2</div>
							<input type="radio" name="attr_physical_damage" value="7" /><span></span>
							<input type="radio" name="attr_physical_damage" value="8" /><span></span>
							<input type="radio" name="attr_physical_damage" value="9" /><span></span><div>-3</div>
							<input type="radio" name="attr_physical_damage" value="10" /><span></span>
							<input type="radio" name="attr_physical_damage" value="11" /><span></span>
							<input type="radio" name="attr_physical_damage" value="12" /><span></span><div>-4</div>
							<input type="radio" name="attr_physical_damage" value="13" /><span></span>
							<input type="radio" name="attr_physical_damage" value="14" /><span></span>
							<input type="radio" name="attr_physical_damage" value="15" /><span></span><div>-5</div>
							<input type="radio" name="attr_physical_damage" value="16" /><span></span>
							<input type="radio" name="attr_physical_damage" value="17" /><span></span>
							<input type="radio" name="attr_physical_damage" value="18" /><span></span><div>-6</div>
						</div>
						<div class="con-footer" title="@{overflow}">
							<label data-i18n="overflow">Overflow</label><div class="attr-und"><span name="attr_overflow"></span></div>
						</div>
					</div>
					<div class="con-track">
						<input type="hidden" name="attr_stun_damage" value="0" />
						<button type="action" name="act_cond_reset_stun" data-i18n="stundamagetrack">Stun Damage Track</button>
						<div class="squares">
							<input class="hex-hider" type="hidden" name="attr_stun_max" value="10" />
							<input type="radio" name="attr_stun_damage" value="1" /><span></span>
							<input type="radio" name="attr_stun_damage" value="2" /><span></span>
							<input type="radio" name="attr_stun_damage" value="3" /><span></span><div>-1</div>
							<input type="radio" name="attr_stun_damage" value="4" /><span></span>
							<input type="radio" name="attr_stun_damage" value="5" /><span></span>
							<input type="radio" name="attr_stun_damage" value="6" /><span></span><div>-2</div>
							<input type="radio" name="attr_stun_damage" value="7" /><span></span>
							<input type="radio" name="attr_stun_damage" value="8" /><span></span>
							<input type="radio" name="attr_stun_damage" value="9" /><span></span><div>-3</div>
							<input type="radio" name="attr_stun_damage" value="10" /><span></span>
							<input type="radio" name="attr_stun_damage" value="11" /><span></span>
							<input type="radio" name="attr_stun_damage" value="12" /><span></span><div>-4</div>
							<input type="radio" name="attr_stun_damage" value="13" /><span></span>
							<input type="radio" name="attr_stun_damage" value="14" /><span></span>
							<input type="radio" name="attr_stun_damage" value="15" /><span></span><div>-5</div>
						</div>
						<div class="con-footer">
							<span data-i18n="conditionfooter">For every 3 boxes of damage on any one damage track, the character takes a -1 Dice Pool modifier on tests; these modifiers are cumulative within and across damage tracks.</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div><!-- ~~~~~~~~ End of Condition Monitor ~~~~~~~~ -->
	<!-- ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ START OF THE QUALITY ROW ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
	<div class="pc-row quality-box">
		<div class="header right-header htab">
			<input class="tab-switch" type="radio" name="attr_quality_toggle" value="quality" checked="checked" title="Qualities" />
			<h1 data-i18n="qualities">Qualities</h1><div class="right-tri"></div>
		</div>
		<div class="header right-header">
			<div class="header htab">
				<div class="triangle"></div>
				<input class="tab-switch" type="radio" name="attr_quality_toggle" value="martial" title="Martal Arts" />
				<h1 data-i18n="martialarts">Martial Arts</h1><div class="right-tri"></div>
			</div>
		</div>
		<div class="border-box repeat-box">
			<div class="pc-box medium-box">
				<input class="tab-switch" type="hidden" name="attr_quality_toggle" value="quality" />
				<div class="quality">
					<div class="row-long">
						<h3 data-i18n="quality">Quality</h3><h3 data-i18n="type">Type</h3>
					</div>
					<fieldset class="repeating_quality">
						<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
						<button class="pictos" name="quality_chat" type="roll" value="@{gm_toggle} &{template:rolls}{{header=@{quality}}}{{desc=@{notes}}}">w</button>
						<button class="pictos settings-button" name="act_quality" type="action">x</button>
						<div class="settings">
							<div>
								<input type="text" name="attr_quality" placeholder="Quality name" title="Quality name" />
								<select name="attr_type" title="Positive or Negative quality">
									<option value="P" selected="selected" data-i18n="p">P</option>
									<option value="N" selected="selected" data-i18n="n">N</option>
								</select>
								<div class="settings-row">
									<label data-i18n="notes">Notes</label>
									<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
								</div>
							</div>
						</div>
						<div class="display">
							<input class="display-flag" type="checkbox" name="attr_display_flag">
							<div class="display-row"><span name="attr_quality" title="Quality name"></span></div>
							<div class="display-row"><span name="attr_type" title="Quality type"></span></div>
							<div class="collapsable">
								<span class="desc" name="attr_notes"></span>
							</div>
						</div>
					</fieldset>
				</div>
				<div class="martial">
					<div class="row-long">
						<h3 data-i18n="technique">Technique</h3><h3 data-i18n="style">Style</h3>
					</div>
					<fieldset class="repeating_martial">
						<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
						<div class="settings">
							<div>
								<input type="text" name="attr_technique" placeholder="Clinch" title="Technique name" />
								<input type="text" name="attr_style" placeholder="Krav Maga" title="Style name" />
								<div class="settings-row">
									<label data-i18n="notes">Notes</label>
									<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
								</div>
							</div>
						</div>
						<div class="display">
							<input class="display-flag" type="checkbox" name="attr_display_flag">
							<div class="display-row"><span name="attr_technique" title="Technique name"></span></div>
							<div class="display-row"><span name="attr_style" title="Style name"></span></div>
							<div class="collapsable">
								<span class="desc" name="attr_notes"></span>
							</div>
						</div>
						<button class="pictos settings-button" name="act_martial" type="action">x</button>
					</fieldset>
				</div>
			</div>
		</div>
	</div><!-- ~~~~~~~~ End of Quality row ~~~~~~~~ -->
</div><div class="arms pc-col">
	<div class="pc-row weapon-box"><!-- ~~~~~~~~ Start of the Weapon Section  ~~~~~~~~ -->
		<div class="header right-header"><h1 data-i18n="weapons">Weapons</h1><div class="right-tri"></div></div>
		<div class="header right-header">
			<div class="header htab">
				<div class="triangle"></div>
				<input class="tab-switch" type="radio" name="attr_weapon_type_toggle" value="range" checked="checked" title="Range weapons" /><h1 data-i18n="ranged">Ranged</h1>
				<div class="right-tri"></div>
			</div>
			<div class="header htab">
				<div class="triangle"></div>
				<input class="tab-switch" type="radio" name="attr_weapon_type_toggle" value="melee" title="Melee weapons" /><h1 data-i18n="melee">Melee</h1>
				<div class="right-tri"></div>
			</div>
		</div>
		<div class="border-box repeat-box">
			<div class="pc-box medium-box">
				<input class="tab-switch" type="hidden" name="attr_weapon_type_toggle" value="range" />
				<div class="weapon-range row-long">
					<h3 data-i18n="weapon">Weapon</h3><h3 data-i18n="dam">Dam</h3><h3 data-i18n="acc">Acc</h3><h3 data-i18n="ap">AP</h3><h3 data-i18n="mode">Mode</h3><h3 data-i18n="rc">RC</h3><h3 data-i18n="ammo">Ammo</h3>
				</div>
				<div class="weapon-range">
					<fieldset class="repeating_range">
						<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
						<div class="settings">
							<div>
								<input type="text" name="attr_weapon" placeholder="Ares Alpha" title="Weapon name" />
								<input type="text" name="attr_damage" placeholder="11P" style="width: 11%;" title="Damage"  />
								<input type="number" name="attr_acc" placeholder="5" title="Accuracy"  />
								<input type="number" name="attr_ap" placeholder="-2" title="Armor Penetration"  />
								<select name="attr_mode" title="Current mode" >
									<option value="BF" data-i18n="bf">BF</option>
									<option value="FA" data-i18n="fa">FA</option>
									<option value="Other" data-i18n="other">Other</option>
									<option value="SA" data-i18n="sa">SA</option>
									<option value="SS" data-i18n="ss">SS</option>
								</select>
								<input type="number" name="attr_recoil" placeholder="2" title="Recoil Compensation" />
								<input type="number" name="attr_ammo" placeholder="42" title="Ammo per clip" />
								<div class="settings-row">
									<label data-i18n="modeoptions">Mode Options</label><input type="text" name="attr_mode_options" placeholder="SA/BF/FA" title="Available modes" />
									<label data-i18n="range">Range</label><input type="text" name="attr_range" placeholder="25/150/350/550" title="Range" />
									<label data-i18n="primary">Primary</label><input type="checkbox" class="skill-select" name="attr_primary" value="primary" title="Add to Core tab as primary range" />
								</div>
								<div class="settings-row">
									<input type="hidden" name="attr_dicepool" value="0" />
									<label data-i18n="combatskill">Combat Skill</label>
									<select class="skill-select" name="attr_skill" title="Weapon skill" >
										<option class="option-headers" disabled="true" data-i18n="combatskills">Combat Skills</option>
										<option class="option-groups" value="@{firearms}" data-i18n="firearms">Firearms Group</option>
										<option value="@{archery}" data-i18n="archery">Archery</option>
										<option value="@{automatics}" data-i18n="automatics">Automatics</option>
										<option value="0" data-i18n="exoticrange">Exotic Range</option>
										<option value="@{heavyweapons}" data-i18n="heavyweapons">Heavy Weapons</option>
										<option value="@{longarms}" data-i18n="longarms">Longarms</option>
										<option value="@{pistols}" data-i18n="pistols">Pistols</option>
										<option value="@{throwingweapons}" data-i18n="throwingweapons">Throwing Weapons</option>
										<option class="option-headers" disabled="true" data-i18n="vehicleskills">Vehicle Skills</option>
										<option value="@{gunnery}" data-i18n="gunnery">Gunnery</option>
									</select>
									<label data-i18n="specializations">Specialization</label><input class="skill-select" type="checkbox" name="attr_spec" value="2" title="Applicable specialization" />
									<label data-i18n="modifierdice">modifier dice</label><input type="number" name="attr_dicepool_modifier" title="Additional dicepool bonus" />
									<input class="skill-select" type="hidden" name="attr_skill" /><br />
									<div class="exotic-warning">
										<span><i data-i18n="exoticnote">Exotics are not linked to skills. Use Modifier Dice input to set skill dice.</i></span>
									</div>
								</div>
								<div class="settings-row">
									<label data-i18n="notes">Notes</label>
									<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
								</div>
							</div>
						</div>
						<div class="display">
							<div class="display-row" title="Roll attack">
								<input class="flag-primary" type="hidden" name="attr_primary" value="" /><div title="Primary"><span>S</span></div>
								<button type="roll" name="range" value="@{gm_toggle} &{template:rolls}{{header=@{weapon}}}{{base=^{agility}}}{{dice=[[((@{skill}+@{dicepool}+@{agility})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{mode}, ACC @{acc}, DV @{damage}, AP @{ap}}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span name="attr_weapon"></span></button>
							</div>
							<div class="display-row" title="Damage"><span name="attr_damage"></span></div>
							<div class="display-row" title="Accuracy"><span name="attr_acc"></span></div>
							<div class="display-row" title="Armor Penetration"><span name="attr_ap"></span></div>
							<select name="attr_mode" title="Current mode">
								<option value="BF" data-i18n="bf">BF</option>
								<option value="FA" data-i18n="fa">FA</option>
								<option value="Other" data-i18n="other">Other</option>
								<option value="SA" data-i18n="sa">SA</option>
								<option value="SS" data-i18n="ss">SS</option>
							</select>
							<div class="display-row" title="Recoil Compensation"><span name="attr_recoil"></span></div>
							<div class="display-row" title="Armor per clip"><span name="attr_ammo"></span></div>
							<input class="display-flag" type="checkbox" name="attr_display_flag" title="Display notes" /><span>i</span>
							<div class="collapsable">
								<div class="desc" title="Mode options"><i><span name="attr_mode_options"></span></i></div>
								<div class="desc" title="Range"><i><span name="attr_range"></span></i></div>
								<div class="desc"><span name="attr_notes"></span></div>
							</div>
						</div>
						<button class="pictos settings-button" name="act_range" type="action">x</button>
					</fieldset>
				</div>
				<div class="weapon-melee row-long">
					<h3 data-i18n="weapon">Weapon</h3><h3 data-i18n="reach">Reach</h3><h3 data-i18n="dam">Dam</h3><h3 data-i18n="acc">Acc</h3><h3 data-i18n="ap">AP</h3>
				</div>
				<div class="weapon-melee">
					<fieldset class="repeating_melee">
						<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
						<div class="settings">
							<div>
								<input type="text" name="attr_weapon" placeholder="Katana" title="Weapon name" />
								<input type="number" name="attr_reach" placeholder="1" title="Reach"/>
								<input type="text" name="attr_damage" placeholder="6P" title="Damage"/>
								<input type="number" name="attr_acc" placeholder="7" title="Accuracy"/>
								<input type="number" name="attr_ap" placeholder="-3" title="Armor Penetration"/>
								<label data-i18n="primary">Primary</label><input type="checkbox" class="skill-select" name="attr_primary" value="primary" title="Add to Core tab as primary melee"/>
								<div class="settings-row">
									<input type="hidden" name="attr_dicepool" value="0" />
									<label data-i18n="combatskill">Combat Skill</label>
									<select class="skill-select" name="attr_skill" title="Weapon skill">
										<option class="option-headers" disabled="true" data-i18n="combatskills">Combat Skills</option>
										<option class="option-groups" value="@{closecombat}" data-i18n="closecombat">Close Combat Group</option>
										<option value="@{blades}" data-i18n="blades">Blades</option>
										<option value="@{clubs}" data-i18n="clubs">Clubs</option>
										<option value="0" data-i18n="exoticmelee">Exotic Melee</option>
										<option value="@{unarmedcombat}" data-i18n="unarmedcombat">Unarmed Combat</option>
										<option class="option-headers" disabled="true" data-i18n="vehicleskills">Vehicle Skills</option>
										<option value="@{gunnery}" data-i18n="gunnery">Gunnery</option>
									</select>
									<label data-i18n="specializations">Specialization</label><input class="skill-select" type="checkbox" name="attr_spec" value="+2" title="Applicable specialization"/>
									<label data-i18n="modifierdice">modifier dice</label><input type="number" name="attr_dicepool_modifier" title="Additional dicepool bonus"/>
									<div class="exotic-warning">
										<span><i data-i18n="exoticnote">Exotic weapons are currently not linked to the skills section. Use Modifier Dice input to set dicepool.</i></span>
									</div>
								</div>
								<div class="settings-row">
									<label data-i18n="notes">Notes</label>
									<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
								</div>
							</div>
						</div>
						<div class="display">
							<div class="display-row" title="Roll attack">
								<input class="flag-primary" type="hidden" name="attr_primary" value="" /><div title="Primary"><span>S</span></div>
								<button type="roll" name="melee" value="@{gm_toggle} &{template:rolls}{{header=@{weapon}}}{{base=^{agility}}}{{dice=[[((@{skill}+@{dicepool}+@{agility})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=ACC @{acc}, DV @{damage}, AP @{ap}, Reach @{reach}}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span name="attr_weapon"></span></button>
							</div>
							<div class="display-row" title="Reach"><span name="attr_reach"></span></div>
							<div class="display-row" title="Damage"><span name="attr_damage"></span></div>
							<div class="display-row" title="Accuracy"><span name="attr_acc"></span></div>
							<div class="display-row" title="Armor Penetration"><span name="attr_ap"></span></div>
							<input class="display-flag" type="checkbox" name="attr_display_flag" title="Display notes" /><span>i</span>
							<div class="collapsable">
								<div class="desc"><span name="attr_notes"></span></div>
							</div>
						</div>
						<button class="pictos settings-button" name="act_melee" type="action">x</button>
					</fieldset>
				</div>
			</div>
		</div>
	</div><!-- ~~~~~~~~ End of the WEAPON Section  ~~~~~~~~ -->
	<div class="pc-row"><!-- ~~~~~~~~ Start of the ARMOR Section  ~~~~~~~~ -->
		<div class="header right-header"><h1>Armor</h1><div class="right-tri"></div></div>
		<div class="border-box repeat-box armor-box">
			<div class="pc-box medium-box">
				<div class="row-long">
					<h3 data-i18n="armor">Armor</h3><h3 data-i18n="rating">Rating</h3><h3 data-i18n="acid">Acid</h3><h3 data-i18n="cold">Cold</h3><h3 data-i18n="elec">Elec.</h3><h3 data-i18n="fire">Fire</h3><h3 data-i18n="radi">Radi.</h3>
				</div>
				<fieldset class="repeating_armor">
					<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
					<div class="settings">
						<div>
							<input type="text" name="attr_name" placeholder="Armor Jacket" title="Armor name" />
							<input type="number" name="attr_rating" min="0" value="0" placeholder="12" title="Rating" />
							<input type="number" name="attr_acid_modifier" min="0" value="0" placeholder="+5" title="Acid modifier" />
							<input type="number" name="attr_cold_modifier" min="0" value="0" placeholder="0" title="Cold modifier" />
							<input type="number" name="attr_electrical_modifier" min="0" value="0" placeholder="+5" title="Electrical modifier" />
							<input type="number" name="attr_fire_modifier" min="0" value="0" placeholder="0" title="Fire modifier" />
							<input type="number" name="attr_radiation_modifier" min="0" value="0" placeholder="0" title="Radiation modifier" />
							<div class="settings-row">
								<label data-i18n="primary">Primary</label><input type="checkbox" class="skill-select" name="attr_primary" value="primary" title="Add to Core tab as primary armor" />
								<label data-i18n="modifierdice">modifier dice</label><input type="number" name="attr_dicepool_modifier" min="0" value="0" title="Additional dicepool bonus" />
							</div>
							<div class="settings-row">
								<label data-i18n="notes">Notes</label>
								<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
							</div>
						</div>
					</div>
					<div class="display">
						<div class="display-row" title="Soak roll">
							<input class="flag-primary" type="hidden" name="attr_primary" value="" /><div title="Primary"><span>S</span></div>
							<button type="roll" name="soak" value="@{gm_toggle} &{template:rolls}{{header=^{soak}}}{{base=^{body} ♦ ^{armor}}}{{dice=[[((@{body}+@{rating}+@{dicepool_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span name="attr_name"></span></button>
						</div>
						<div class="display-row hoverswitch" title="Armor roll">
							<button type="roll" name="armor" value="@{gm_toggle} &{template:rolls}{{header=@{armor}}}{{base= Armor}}{{dice=[[((@{rating})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
							<span class="default" name="attr_rating"></span><!--<span class="hover" name="attr_soak"></span>--></button>
						</div>
						<div class="display-row hoverswitch" title="Acid protection roll"><button type="roll" name="acid protection" value="@{gm_toggle} &{template:rolls}{{header=^{acidprotection}}}{{base=^{body} ♦ ^{armor}}}{{dice=[[((@{body}+@{rating}+@{dicepool_modifier}+@{acid_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
							<span class="default" name="attr_acid_modifier"></span><!--<span class="hover" name="attr_acid_protection"></span>--></button>
						</div>
						<div class="display-row hoverswitch" title="Cold protection roll"><button type="roll" name="cold protection" value="@{gm_toggle} &{template:rolls}{{header=^{coldprotection}}}{{base=^{body} ♦ ^{armor}}}{{dice=[[((@{body}+@{rating}+@{dicepool_modifier}+@{cold_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
							<span class="default" name="attr_cold_modifier"></span><!--<span class="hover" name="attr_cold_protection"></span>--></button>
						</div>
						<div class="display-row hoverswitch" title="Electrical protection roll"><button type="roll" name="electrical protection" value="@{gm_toggle} &{template:rolls}{{header=^{electricalprotection}}}{{base=^{body} ♦ ^{armor}}}{{dice=[[((@{body}+@{rating}+@{dicepool_modifier}+@{electrical_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
							<span class="default" name="attr_electrical_modifier"></span><!--<span class="hover" name="attr_electrical_protection"></span>--></button>
						</div>
						<div class="display-row hoverswitch" title="Fire protection roll"><button type="roll" name="fire protection" value="@{gm_toggle} &{template:rolls}{{header=^{fireprotection}}}{{base=^{body} ♦ ^{armor}}}{{dice=[[((@{body}+@{rating}+@{dicepool_modifier}+@{fire_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
							<span class="default" name="attr_fire_modifier"></span><!--<span class="hover" name="attr_fire_protection"></span>--></button>
						</div>
						<div class="display-row hoverswitch" title="Radiation protection roll"><button type="roll" name="radiation protection" value="@{gm_toggle} &{template:rolls}{{header=^{radiationprotection}}}{{base=^{body} ♦ ^{armor}}}{{dice=[[((@{body}+@{rating}+@{dicepool_modifier}+@{radiation_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}">
							<span class="default" name="attr_radiation_modifier"></span><!--<span class="hover" name="attr_radiation_protection"></span>--></button>
						</div>
						<input class="display-flag" type="checkbox" name="attr_display_flag" title="Display notes" /><span>i</span>
						<div class="collapsable">
							<div class="desc"><span name="attr_notes"></span></div>
						</div>
					</div>
					<button class="pictos settings-button" name="act_armor" type="action">x</button>
				</fieldset>
			</div>
		</div>
	</div><!-- ~~~~~~~~ End of the ARMOR Section  ~~~~~~~~ -->
</div><div class="augs pc-col">
	<div class="pc-row">
		<div class="header right-header"><h1 data-i18n="augmentations">Augmentations</h1><div class="right-tri"></div></div>
		<div class="border-box repeat-box aug-box">
			<div class="pc-box medium-box">
				<div class="row-long">
					<h3 data-i18n="augmentations">Augementation</h3><h3 data-i18n="rating">Rating</h3><h3 data-i18n="essence">Essence</h3>
				</div>
				<fieldset class="repeating_augementations">
					<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
					<div class="settings">
						<div> 
							<input type="text" name="attr_augmentation" placeholder="Augementation" title="Augementation name" />
							<input type="number" name="attr_rating" placeholder="#" title="Rating"  />
							<input type="text" name="attr_essence" placeholder="6" style="width: 10%" title="Essence cost" />
							<label data-i18n="notes">Notes</label>
							<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
						</div>
					</div>
					<div class="display">
						<input class="display-flag" type="checkbox" name="attr_display_flag"  title="Display settings" />
						<div class="display-row" title="Augementation"><span name="attr_augmentation"></span></div>
						<div class="display-row" title="Rating"><span name="attr_rating"></span></div>
						<div class="display-row" title="Essence"><span name="attr_essence"></span></div>
						<div class="collapsable">
							<div class="desc"><span name="attr_notes"></span></div>
						</div>
					</div>
					<button class="pictos settings-button" name="act_augementations" type="action">x</button>
				</fieldset>
			</div>
		</div>
	</div>
</div><div class="gear pc-col">
	<div class="header right-header"><h1 data-i18n="gear">Gear</h1><div class="right-tri"></div></div>
	<div class="border-box repeat-box item-box">
		<div class="pc-box medium-box">
			<div class="row-long">
				<h3 data-i18n="item">Item</h3><h3 data-i18n="rating">Rating</h3>
			</div>
			<fieldset class="repeating_items">
				<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
				<div class="settings">
					<div>
						<input type="text" name="attr_item" placeholder="Item name" title="Item name" />
						<input type="number" name="attr_rating" placeholder="#" title="Rating"/>
						<label data-i18n="notes">Notes</label>
						<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
					</div>
				</div>
				<div class="display">
					<input class="display-flag" type="checkbox" name="attr_display_flag" title="Settings toggle" />
					<div class="display-row" title="Item name"><span name="attr_item"></span></div>
					<div class="display-row" title="Rating"><span name="attr_rating"></span></div>
					<div class="collapsable">
						<div class="desc"><span name="attr_notes"></span></div>
					</div>
				</div>
				<button class="pictos settings-button" name="act_items" type="action">x</button>
			</fieldset>
		</div>
	</div>
</div>
  <div class="magic pc-col">
    <div class="pc-row spell-box">
      <div class="header right-header">
        <h1 data-i18n="magic">Magic</h1>
        <div class="right-tri"></div>
      </div>
      <div class="header right-header">
        <div class="header htab">
          <div class="triangle"></div>
          <input class="magic-toggle" name="attr_magic_toggle" title="@{magic_toggle}" type="radio" value="spells" checked="checked"/>
          <h1 data-i18n="spells">Spells</h1>
          <div class="right-tri"></div>
        </div>
        <div class="header htab">
          <div class="triangle"></div>
          <input class="magic-toggle" name="attr_magic_toggle" title="@{magic_toggle}" type="radio" value="preps"/>
          <h1 data-i18n="prep">Prep...</h1>
          <div class="right-tri"></div>
        </div>
        <div class="header htab">
          <div class="triangle"></div>
          <input class="magic-toggle" name="attr_magic_toggle" title="@{magic_toggle}" type="radio" value="rituals"/>
          <h1 data-i18n="rituals">Rituals</h1>
          <div class="right-tri"></div>
        </div>
      </div>
      <div class="border-box repeat-box">
        <div class="pc-box medium-box">
          <button data-i18n="drain" name="drain" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{drain}}}{{base=^{base}}}{{dice=[[((@{drain_attribute_1}+@{drain_attribute_2}+@{drain_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}"></button>
          <select class="attribute-select" name="attr_drain_attribute_1" title="@{drain_attribute_1}">
            <option data-i18n="body" value="@{body}">Body</option>
            <option data-i18n="agility" value="@{agility}">Agility</option>
            <option data-i18n="reaction" value="@{reaction}">Reaction</option>
            <option data-i18n="strength" value="@{strength}">Strength</option>
            <option data-i18n="willpower" value="@{willpower}">Willpower</option>
            <option data-i18n="logic" value="@{logic}" selected="selected">Logic</option>
            <option data-i18n="intuition" value="@{intuition}">Intuition</option>
            <option data-i18n="charisma" value="@{charisma}">Charisma</option>
            <option data-i18n="magic" value="@{magic}">Magic</option>
            <option data-i18n="resonance" value="@{resonance}">Resonance</option>
          </select><span>+</span>
          <select class="attribute-select" name="attr_drain_attribute_2" title="@{drain_attribute_2}">
            <option data-i18n="body" value="@{body}">Body</option>
            <option data-i18n="agility" value="@{agility}">Agility</option>
            <option data-i18n="reaction" value="@{reaction}">Reaction</option>
            <option data-i18n="strength" value="@{strength}">Strength</option>
            <option data-i18n="willpower" value="@{willpower}" selected="selected">Willpower</option>
            <option data-i18n="logic" value="@{logic}">Logic</option>
            <option data-i18n="intuition" value="@{intuition}">Intuition</option>
            <option data-i18n="charisma" value="@{charisma}">Charisma</option>
            <option data-i18n="magic" value="@{magic}">Magic</option>
            <option data-i18n="resonance" value="@{resonance}">Resonance</option>
          </select>
          <h3 data-i18n="modifier">modifier</h3>
          <label data-i18n-title="modifier" title="modifier">
            <input name="attr_drain_modifier" title="@{drain_modifier}" type="number" value="0"/>
          </label>
          <input class="magic-toggle" name="attr_magic_toggle" type="hidden" value="spells"/><div class="row-long">
	<h3 data-i18n="spells">Spells</h3><h3 data-i18n="type">Type</h3><h3 data-i18n="range">Range</h3><h3 data-i18n="duration">Duration</h3><h3 data-i18n="drain">Drain</h3>
</div>
<div class="magic-spells">
	<fieldset class="repeating_spell">
		<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
		<div class="settings">
			<div>
				<input type="text" name="attr_name" placeholder="Fireball" title="Spell name" />
				<select name="attr_type" title="Type">
					<option value="Mana" selected="selected" data-i18n="mana">Mana</option>
					<option value="Physcial" data-i18n="physical">Physical</option>
				</select>
				<select name="attr_range" title="Range">
					<option value="LOS" selected="selected" data-i18n="los">LOS</option>
					<option value="LOS (A)" data-i18n="los (a)">LOS (A)</option>
					<option value="Special" data-i18n="special">Special</option>
					<option value="T" data-i18n="t">T</option>
					<option value="T (A)" data-i18n="t (a)">T (A)</option>
				</select>
				<select name="attr_duration" title="Duration">
					<option value="Instant" selected="selected" data-i18n="instant">Instant</option>
					<option value="Permanent" data-i18n="permanent">Permanent</option>
					<option value="Special" data-i18n="special">Special</option>
					<option value="Sustained" data-i18n="sustained">Sustained</option>
				</select>
				<input type="number" name="attr_drain" value="" placeholder="-1" title="Drain code" />
				<div class="settings-row">
					<label data-i18n="category">Spell Category</label>
					<select name="attr_category" title="Category">
						<option class="option" value="Combat" selected="selected" data-i18n="combat">Combat</option>
						<option class="option" value="Detection" data-i18n="detection">Detection</option>
						<option class="option" value="Health" data-i18n="health">Health</option>
						<option class="option" value="Illusion" data-i18n="illusion">Illusion</option>
						<option class="option" value="Manipulation" data-i18n="manipulation">Manipulation</option>
						<option class="option" value="Other" data-i18n="other">Other</option>
					</select>
					<input class="category" name="attr_category" type="hidden" value="Combat">
					<div class="combat-type-hide">
						<label data-i18n="combattype">Combat Type</label>
						<select class="combat-type" name="attr_combat_type" title="Combat type">
							<option class="option" value="Force " selected="selected"></option>
							<option class="option" value="Direct, Force " data-i18n="direct">Direct</option>
							<option class="option" value="Indirect, Force ?{Force|}, AP -" data-i18n="indirect">Indirect</option>
						</select>
						<label class="combat-type" data-i18n="damagetype">Combat Damage</label><input class="spell-input" type="text" name="attr_damage" value="" placeholder="P" title="Damage type" style="width: 8%;"/>
					</div>
				</div>
				<div class="settings-row">
					<input type="hidden" name="attr_dicepool" value="0" />
					<label data-i18n="magicalskill">Magic Skill</label>
					<select class="skill-select" name="attr_skill" title="Magic skill">
						<option class="option-headers" disabled="true" data-i18n="magicalskills">Magic Skills</option>
						<option class="option-groups" value="@{sorcery}" data-i18n="sorcerygroup">Sorcery Group</option>
						<option value="@{spellcasting}" selected="selected" data-i18n="spellcasting">Spellcasting</option>
					</select>
					<label data-i18n="specializations">Specialization</label><input class="skill-select" type="checkbox" name="attr_spec" value="2" title="Applicable specialization" />
					<label data-i18n="modifierdice">modifier dice</label><input type="number" name="attr_dicepool_modifier" title="Additional dicepool bonus" />
				</div>
				<div class="settings-row">
					<label data-i18n="notes">Notes</label>
					<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
				</div>
			</div>
		</div>
		<div class="display">
			<div class="display-row" title="Spell roll">
				<button type="roll" name="spell" value="@{gm_toggle} &{template:rolls}{{header=@{name}}}{{base=^{magic}}}{{dice=[[((@{skill}+@{dicepool}+@{magic})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{combat_type}?{Force|}}}{{drain=[[?{Force|}+(@{drain})]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span name="attr_name"></span></button>
			</div>
			<div class="display-row" title="Type"><span name="attr_type"></span></div>
			<div class="display-row" title="Range"><span name="attr_range"></span></div>
			<div class="display-row" title="Duration"><span name="attr_duration"></span></div>
			<div class="display-row" style="text-align: center;" title="Drain code"><span name="attr_drain"></span></div>
			<input class="display-flag" type="checkbox" name="attr_display_flag" title="Display notes" /><span>i</span>
			<div class="collapsable">
				<div class="desc"><i><span name="attr_category" title="Category"></span></i></div>
				<div class="desc"><i><input class="combat-type" type="hidden" name="attr_combat_type" title="Combat type" /><span></span></i></div>
				<div class="desc"><span name="attr_notes"></span></div>
			</div>
		</div>
		<button class="pictos settings-button" name="act_spell" type="action">x</button>
	</fieldset>
</div>
<div class="magic-preps">
	<fieldset class="repeating_preps">
		<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
		<div class="settings">
			<div>
				<input type="text" name="attr_name" placeholder="Fireball" title="Spell name" />
				<select name="attr_type" title="Type">
					<option value="Mana" selected="selected" data-i18n="mana">Mana</option>
					<option value="Physcial" data-i18n="physical">Physical</option>
				</select>
				<select name="attr_range" title="Range">
					<option value="LOS" selected="selected" data-i18n="los">LOS</option>
					<option value="LOS (A)" data-i18n="losa">LOS (A)</option>
					<option value="Special" data-i18n="special">Special</option>
					<option value="T" data-i18n="t">T</option>
					<option value="T (A)" data-i18n="ta">T (A)</option>
				</select>
				<select name="attr_duration" title="Duration">
					<option value="Instant" selected="selected" data-i18n="instant">Instant</option>
					<option value="Permanent" data-i18n="permanent">Permanent</option>
					<option value="Special" data-i18n="special">Special</option>
					<option value="Sustained" data-i18n="sustained">Sustained</option>
				</select>
				<input type="number" name="attr_drain" value="" placeholder="-1" title="Drain code" />
				<div class="settings-row">
					<label data-i18n="category">Spell Category</label>
					<select name="attr_category" title="Category">
						<option class="option" value="Combat" selected="selected" data-i18n="combat">Combat</option>
						<option class="option" value="Detection" data-i18n="detection">Detection</option>
						<option class="option" value="Health" data-i18n="health">Health</option>
						<option class="option" value="Illusion" data-i18n="illusion">Illusion</option>
						<option class="option" value="Manipulation" data-i18n="manipulation">Manipulation</option>
						<option class="option" value="Other" data-i18n="other">Other</option>
					</select>
					<input class="category" name="attr_category" type="hidden" value="Combat">
					<div class="combat-type-hide">
						<label data-i18n="combattype">Combat Type</label>
						<select class="combat-type" name="attr_combat_type" title="Combat type">
							<option class="option" value="Force " selected="selected"></option>
							<option class="option" value="Direct, Force " data-i18n="direct">Direct</option>
							<option class="option" value="Indirect, Force ?{Force|}, AP -" data-i18n="indirect">Indirect</option>
						</select>
						<label class="combat-type" data-i18n="damagetype">Combat Damage</label><input class="spell-input" type="text" name="attr_damage" value="" placeholder="P" title="Damage type" style="width: 8%;"/>
					</div>
				</div>
				<div class="settings-row">
					<input type="hidden" name="attr_dicepool" value="0" />
					<label data-i18n="magicalskill">Magic Skill</label>
					<select class="skill-select" name="attr_skill" title="Magic skill">
						<option class="option-headers" disabled="true" data-i18n="magicalskills">Magic Skills</option>
						<option class="option-groups" value="@{enchanting}" data-i18n="enchantinggroup">Enchanting Group</option>
						<option value="@{alchemy}" selected="selected" data-i18n="alchemy">Alchemy</option>
					</select>
					<label data-i18n="specializations">Specialization</label><input class="skill-select" type="checkbox" name="attr_spec" value="2" title="Applicable specialization" />
					<label data-i18n="modifierdice">modifier dice</label><input type="number" name="attr_dicepool_modifier" title="Additional dicepool bonus" />
				</div>
				<label data-i18n="notes">Notes</label>
				<textarea name="attr_notes" value="" placeholder="Alchemy notes"></textarea>
			</div>
		</div>
		<div class="display">
			<input class="display-flag" type="checkbox" name="attr_display_flag" />
			<div class="display-row" title="Spell roll"><button type="roll" name="alchemic" value="@{gm_toggle} &{template:rolls}{{header=@{name}}}{{base=^{magic}}}{{dice=[[((@{skill}+@{dicepool}+@{magic})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{combat_type}?{Force|}}}{{drain=[[?{Force|}+(@{drain})]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span name="attr_name"></span></button></div>
			<div class="display-row" title="Type"><span name="attr_type"></span></div>
			<div class="display-row" title="Range"><span name="attr_range"></span></div>
			<div class="display-row" title="Duration"><span name="attr_duration"></span></div>
			<div class="display-row" style="text-align: center;" title="Drain code"><span name="attr_drain"></span></div>
			<input class="display-flag" type="checkbox" name="attr_display_flag" title="Display notes" /><span>i</span>
			<div class="collapsable">
				<div class="desc"><i><span name="attr_category" title="Category"></span></i></div>
				<div class="desc"><i><input class="combat-type" type="hidden" name="attr_combat_type" title="Combat type"/><span></span></i></div>
				<div class="desc"><span name="attr_notes"></span></div>
			</div>
		</div>
		<button class="pictos settings-button" name="act_preps" type="action">x</button
	</fieldset>
</div>
<div class="magic-rituals">
	<fieldset class="repeating_ritual">
		<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
		<div class="settings">
			<div>
				<input type="text" name="attr_name" placeholder="Curse (MATERIAL LINK, SPELL)" title="Ritual name" />
				<div class="settings-row">
					<input type="hidden" name="attr_dicepool" value="0" />
					<label data-i18n="magicalskill">Magic Skill</label>
					<select class="skill-select" name="attr_skill" title="Magic skill">
						<option class="option-headers" disabled="true" data-i18n="magicalskills">Magic Skills</option>
						<option class="option-groups" value="@{sorcery}" data-i18n="sorcerygroup">Sorcery Group</option>
						<option value="@{ritualspell}" selected="selected" data-i18n="ritualspellcasting">Ritual Spellcasting</option>
					</select>
					<label data-i18n="specializations">Specialization</label><input class="skill-select" type="checkbox" name="attr_spec" value="2" title="Applicable specialization" />
					<label data-i18n="modifierdice">modifier dice</label><input type="number" name="attr_dicepool_modifier" title="Additional dicepool bonus" />
				</div>
				<label data-i18n="notes">Notes</label>
				<textarea name="attr_notes" value="" placeholder="Ritual notes"></textarea>
			</div>
		</div>
		<div class="display">
			<input class="display-flag" type="checkbox" name="attr_display_flag"  />
			<div class="display-row" class="Ritual roll"><button type="roll" name="ritual" value="@{gm_toggle} &{template:rolls}{{header=@{name}}}{{base=^{magic}}}{{dice=[[((@{skill}+@{dicepool}+@{magic})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Force ?{Force|}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span name="attr_name"></span></button></div>
			<input class="display-flag" type="checkbox" name="attr_display_flag" title="Display notes" /><span>i</span>
			<div class="collapsable">
				<div class="desc"><span name="attr_notes"></span></div>
			</div>
		</div>
		<button class="pictos settings-button" name="act_ritual" type="action">x</button>
	</fieldset>
</div>
        </div>
      </div>
    </div>
    <div class="pc-row"><div class="header right-header">
	<h1>Adept Powers or Other Abilities</h1>
	<div class="right-tri"></div>
</div>
<div class="border-box repeat-box powers-box">
	<div class="pc-box medium-box">
		<div class="row-long">
			<h3>Name</h3><h3>Rating</h3>
		</div>
		<fieldset class="repeating_powers">
			<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
			<div class="settings">
				<div>
					<input type="text" name="attr_name" placeholder="Adept powers or other ability" title="Ability or power name" />
					<input type="number" name="attr_rating" placeholder="#" title="Rating" />
					<label data-i18n="notes">Notes</label>
					<textarea name="attr_notes" value="" placeholder="Power notes"></textarea>
				</div>
			</div>
			<div class="display">
				<input class="display-flag" type="checkbox" name="attr_display_flag" />
				<div class="display-row" title="Ability or power name"><span name="attr_name"></span></div>
				<div class="display-row" title="Rating"><span name="attr_rating"></span></div>
				<div class="collapsable">
					<div class="desc"><span name="attr_notes"></span></div>
				</div>
			</div>
			<button class="pictos settings-button" name="act_powers" type="action">x</button>
		</fieldset>
	</div>
</div>

    </div>
  </div>
  <div class="matrix pc-col">
    <div class="pc-row"><div class="header right-header"><h1 data-i18n="cyberdeck">Cyberdeck</h1><div class="right-tri"></div></div>
<div class="border-box repeat-box matrix-box">
	<div class="pc-box medium-box cyberdeck">
		<div class="row-long">
			<label data-i18n="model">Model</label><input type="text" name="attr_cyberdeck" value="" placeholder="Sony CYI-720" title="Cyberdeck name" />
		</div>
		<div class="row-long">
			<label><button type="roll" name="device rating" value="&{template:rolls}{{header=^{matrixsoak}}}{{base=^{devicerating}}}{{dice=[[((@{device_rating}+@{firewall})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Roll matrix soak" data-i18n="devicerating">Device Rating</button></label><input type="number" name="attr_device_rating" min="0" value="" placeholder="4" style="margin-right: 15%;" title="@{device_rating}" />
			<label data-i18n="attributearray">Attribute Array</label>
			<input type="number" name="attr_attribute_1" min="0" value="" placeholder="7" />
			<input type="number" name="attr_attribute_2" min="0" value="" placeholder="6" />
			<input type="number" name="attr_attribute_3" min="0" value="" placeholder="5" />
			<input type="number" name="attr_attribute_4" min="0" value="" placeholder="4" />
		</div>
		<div class="row-long">
			<h3 data-i18n="total">Total</h3><h3 data-i18n="temp">Temp</h3><h3 data-i18n="modifier">modifier</h3><h3 data-i18n="base">Base</h3><h3 data-i18n="baseslider">Base slider</h3><br />
			<label><button type="roll" name="attack" value="&{template:rolls}{{header=^{attack}}}{{base=^{attack}}}{{dice=[[(@{attack}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Roll attack" data-i18n="attack">Attack</button>
			</label>
			<div class="matrix-tot" title="@{attack}" ><span name="attr_attack"></span></div><span> = </span>
			<input type="number" name="attr_attack_temp" min="0" value="" placeholder="0" title="@{attack_temp}" /><spam> + </spam>
			<input type="number" name="attr_attack_modifier" min="0" value="" placeholder="0" title="@{attack_modifier}" /><spam> + </spam>
			<input type="number" name="attr_attack_base" min="0" value="" placeholder="7" title="@{attack_base}" />
			<div class="device-attr">
				<div class="matrix-bubble matrixAttack">
					<input type="radio" name="attr_attack_base" value="1" /><span></span>
					<input type="radio" name="attr_attack_base" value="2" /><span></span>
					<input type="radio" name="attr_attack_base" value="3" /><span></span>
					<input type="radio" name="attr_attack_base" value="4" /><span></span>
					<input type="radio" name="attr_attack_base" value="5" /><span></span>
					<input type="radio" name="attr_attack_base" value="6" /><span></span>
					<input type="radio" name="attr_attack_base" value="7" /><span></span>
					<input type="radio" name="attr_attack_base" value="8" /><span></span>
					<input type="radio" name="attr_attack_base" value="9" /><span></span>
					<input type="radio" name="attr_attack_base" value="10" /><span></span>
				</div>
			</div>
		</div>
		<div class="row-long">
			<label><button type="roll" name="sleaze" value="&{template:rolls}{{header=^{sleaze}}}{{base=^{base}}}{{dice=[[(@{sleaze}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Roll sleaze" data-i18n="sleaze">Sleaze</button></label>
			<div class="matrix-tot" title="@{sleaze}" ><span name="attr_sleaze"></span></div><span> = </span>
			<input type="number" name="attr_sleaze_temp" min="0" value="" placeholder="0" title="@{sleaze_temp}" /><spam> + </spam>
			<input type="number" name="attr_sleaze_modifier" min="0" value="" placeholder="0" title="@{sleaze_modifier}" /><spam> + </spam>
			<input type="number" name="attr_sleaze_base" min="0" value="" placeholder="6" title="@{sleaze_base}" />
			<div class="device-attr">
				<div class="matrix-bubble matrixSleaze">
					<input type="radio" name="attr_sleaze_base" value="1" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="2" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="3" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="4" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="5" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="6" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="7" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="8" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="9" /><span></span>
					<input type="radio" name="attr_sleaze_base" value="10" /><span></span>
				</div>
			</div>
		</div>
		<div class="row-long">
			<label><button type="roll" name="data processing" value="&{template:rolls}{{header=^{data_processing}}}{{base=^{base}}}{{dice=[[(@{data_processing}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Roll data processing" data-i18n="dataproc">Data Proc.</button></label>
			<div class="matrix-tot" title="@{data_processing}" ><span name="attr_data_processing"></span></div><span> = </span>
			<input type="number" name="attr_data_processing_temp" min="0" alue="" placeholder="0" title="@{data_processing_temp}" /><spam> + </spam>
			<input type="number" name="attr_data_processing_modifier" min="0" value="" placeholder="0" title="@{data_processing_modifier}" /><spam> + </spam>
			<input type="number" name="attr_data_processing_base" min="0" value="" placeholder="5" title="@{data_processing_base}" />
			<div class="device-attr">
				<div class="matrix-bubble matrixData">
					<input type="radio" name="attr_data_processing_base" value="1" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="2" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="3" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="4" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="5" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="6" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="7" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="8" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="9" /><span></span>
					<input type="radio" name="attr_data_processing_base" value="10" /><span></span>
				</div>
			</div>
		</div>
		<div class="row-long">
			<label><button type="roll" name="firewall" value="&{template:rolls}{{header=^{firewall}}}{{base=^{base}}}{{dice=[[(@{firewall}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" title="Roll firewall" data-i18n="firewall">Firewall</button></label>
			<div class="matrix-tot" title="@{firewall}" ><span name="attr_firewall"></span></div><span> = </span>
			<input type="number" name="attr_firewall_temp" min="0" value="" placeholder="0" title="@{firewall_temp}" /><spam> + </spam>
			<input type="number" name="attr_firewall_modifier" min="0" value="" placeholder="0" title="@{firewall_modifier}" /><spam> + </spam>
			<input type="number" name="attr_firewall_base" min="0" value="" placeholder="4" title="@{firewall_base}" />
			<div class="device-attr">
				<div class="matrix-bubble matrixFirewall">
					<input type="radio" name="attr_firewall_base" value="1" /><span></span>
					<input type="radio" name="attr_firewall_base" value="2" /><span></span>
					<input type="radio" name="attr_firewall_base" value="3" /><span></span>
					<input type="radio" name="attr_firewall_base" value="4" /><span></span>
					<input type="radio" name="attr_firewall_base" value="5" /><span></span>
					<input type="radio" name="attr_firewall_base" value="6" /><span></span>
					<input type="radio" name="attr_firewall_base" value="7" /><span></span>
					<input type="radio" name="attr_firewall_base" value="8" /><span></span>
					<input type="radio" name="attr_firewall_base" value="9" /><span></span>
					<input type="radio" name="attr_firewall_base" value="10" /><span></span>
				</div>
			</div>
		</div>
		<div class="con-hex">
			<input type="radio" name="attr_matrix_con" value="0" /><h2 data-i18n="conditionmonitor">Condition Monitor</h2>
			<input type="radio" name="attr_matrix_con" value="1" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="2" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="3" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="4" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="5" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="6" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="7" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="8" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="9" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="10" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="11" /><span class="hexagon"></span>
			<input type="radio" name="attr_matrix_con" value="12" /><span class="hexagon"></span>
		</div>
		<h3>Programs</h3>
		<div class="program-box">
			<fieldset class="repeating_programs">
				<input type="checkbox" class="settings-toggle" name="attr_flag" checked="checked" title="Settings toggle" /><span>x</span>
				<div class="settings">
					<div>
						<input type="text" name="attr_program" value="" placeholder="Program name" title="Program name" />
						<label data-i18n="notes">Notes</label>
						<textarea name="attr_notes" placeholder="Program description"></textarea>
					</div>
				</div>
				<div class="display">
					<input type="checkbox" class="program-toggle" name="attr_program_on" checked="checked" title="Program loaded" /><span class="program-toggle" style="color: #000;">Q</span>
					<input class="display-flag" type="checkbox" name="attr_display_flag" />
					<div class="display-row" title="Program name"><span name="attr_program"></span></div>
					<div class="collapsable">
						<div class="desc"><span name="attr_notes"></span></div>
					</div>
				</div>
			</fieldset>
		</div>
	</div>
</div>
    </div>
    <div class="pc-row">
      <div class="header right-header">
        <h1 data-i18n="complexform">Complex Forms</h1>
        <div class="right-tri"></div>
      </div>
      <div class="border-box repeat-box form-box">
        <div class="pc-box medium-box">
          <button data-i18n="fade" name="fade" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{fade}}}{{base=^{base}}}{{dice=[[((@{fade_attribute_1}+@{fade_attribute_2}+@{fade_modifier})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}"></button>
          <select class="attribute-select" name="attr_fade_attribute_1" title="@{fade_attribute_1}">
            <option data-i18n="body" value="@{body}">Body</option>
            <option data-i18n="agility" value="@{agility}">Agility</option>
            <option data-i18n="reaction" value="@{reaction}">Reaction</option>
            <option data-i18n="strength" value="@{strength}">Strength</option>
            <option data-i18n="willpower" value="@{willpower}">Willpower</option>
            <option data-i18n="logic" value="@{logic}">Logic</option>
            <option data-i18n="intuition" value="@{intuition}">Intuition</option>
            <option data-i18n="charisma" value="@{charisma}">Charisma</option>
            <option data-i18n="magic" value="@{magic}">Magic</option>
            <option data-i18n="resonance" value="@{resonance}" selected="selected">Resonance</option>
          </select><span>+</span>
          <select class="attribute-select" name="attr_fade_attribute_2" title="@{fade_attribute_2}">
            <option data-i18n="body" value="@{body}">Body</option>
            <option data-i18n="agility" value="@{agility}">Agility</option>
            <option data-i18n="reaction" value="@{reaction}">Reaction</option>
            <option data-i18n="strength" value="@{strength}">Strength</option>
            <option data-i18n="willpower" value="@{willpower}" selected="selected">Willpower</option>
            <option data-i18n="logic" value="@{logic}">Logic</option>
            <option data-i18n="intuition" value="@{intuition}">Intuition</option>
            <option data-i18n="charisma" value="@{charisma}">Charisma</option>
            <option data-i18n="magic" value="@{magic}">Magic</option>
            <option data-i18n="resonance" value="@{resonance}">Resonance</option>
          </select>
          <h3 data-i18n="modifier">modifier</h3>
          <label data-i18n-title="modifier" title="modifier">
            <input name="attr_fade_modifier" title="@{fade_modifier}" type="number" value="0"/>
          </label>
          <div class="row-long">
            <h3 data-i18n="complexform">Complex Form</h3>
            <h3 data-i18n="target">Target</h3>
            <h3 data-i18n="duration">Duration</h3>
            <h3 data-i18n="fade">Fade</h3>
          </div><fieldset class="repeating_forms">
	<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
	<div class="settings">
		<div> 
			<input type="text" name="attr_name" placeholder="Editor" title="Complex Form name" />
			<select name="attr_target" title="Target">
				<option class="option" value="Device" selected="selected" data-i18n="device">Device</option>
				<option class="option" value="File" data-i18n="file">File</option>
				<option class="option" value="Host" data-i18n="host">Host</option>
				<option class="option" value="IC" data-i18n="ic">IC</option>
				<option class="option" value="Persona" data-i18n="persona">Persona</option>
				<option class="option" value="Other" data-i18n="other">Other</option>
				<option class="option" value="Self" data-i18n="self">Self</option>
				<option class="option" value="Sprite" data-i18n="sprite">Sprite</option>
			</select>
			<select name="attr_duration" title="Duration">
				<option value="Extended" data-i18n="extended">Extended</option>
				<option value="Instant" data-i18n="instant">Instant</option>
				<option value="Permanent" data-i18n="permanent">Permanent</option>
				<option value="Other" data-i18n="other">Other</option>
				<option value="Sustained" data-i18n="sustained">Sustained</option>
			</select>
			<input type="number" name="attr_fade" value="" placeholder="-1" title="Fade code" />
			<div class="settings-row">
				<input type="hidden" name="attr_dicepool" value="0" />
				<label>Tech. Skill</label>
				<select class="skill-select" name="attr_skill" title="Technical skill" >
					<option class="option-headers" disabled="true" data-i18n="technicalskills">Technical Skills</option>
					<option class="option-groups" value="@{electronics}" data-i18n="electronicsgroup">Electronics Group</option>
					<option value="@{software}" selected="selected" data-i18n="software">Software</option>
				</select>
				<label data-i18n="specializations">Specialization</label><input class="skill-select" type="checkbox" name="attr_spec" value="2" title="Applicable specialization" />
				<label data-i18n="modifierdice">modifier dice</label><input type="number" name="attr_dicepool_modifier" title="Additional dicepool bonus" />
			</div>
			<label data-i18n="notes">Notes</label>
			<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
		</div>
	</div>
	<div class="display">
		<input class="display-flag" type="checkbox" name="attr_display_flag" />
		<div class="display-row"><button type="roll" name="complex form" value="@{gm_toggle} &{template:rolls}{{header=@{name}}}{{base=^{resonance}}}{{dice=[[((@{skill}+@{dicepool}+@{resonance})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Level ?{Level|}, Fade [[?{Level|}+(@{fade})]]}}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}"><span name="attr_name"></span></button></div>
		<div class="display-row" title="Target"><span name="attr_target"></span></div>
		<div class="display-row" title="Duration"><span name="attr_duration"></span></div>
		<div class="display-row" style="text-align: center;" title="Fade code"><span name="attr_fade"></span></div>
		<input class="display-flag" type="checkbox" name="attr_display_flag" title="Display notes" /><span>i</span>
		<div class="collapsable">
			<div class="desc"><span name="attr_notes"></span></div>
		</div>
	</div>
	<button class="pictos settings-button" name="act_forms" type="action">x</button>
</fieldset>
        </div>
      </div>
    </div>
  </div><div class="social pc-col">
	<div class="pc-row"><!-- ~~~~~~~~ Start of Lifestyles Row  ~~~~~~~~ -->
		<div class="header right-header"><h1 data-i18n="idslifestylecurrency">IDs/Lifestyles/Currency</h1><div class="right-tri"></div></div>
		<div class="border-box repeat-box lifestyle">
			<div class="pc-box small-box social-box">
				<div class="row-long"><h3 data-i18n="primarylifestyle">Primary Lifestyle</h3><input type="text" name="attr_primary_lifestyle" placeholder="Middle /w GRID subscription" style="width: 77%" title="@{primary_lifestyle}" /></div>
				<div class="row-long"><h3 data-i18n="nuyen">Nuyen</h3><input type="text" name="attr_primary_nuyen" placeholder="$1,000 UCAS" style="width: 90%" title="@{primary_nuyen}" /></div>
				<div class="row-long"><h3 data-i18n="licenses">Licenses</h3><input type="text" name="attr_primary_licenses"placeholder="Technomancer, Pistols..." style="width: 87%" title="@{primary_licenses}" /></div>
				<div class="row-long">
					<h3 data-i18n="fakeidsrelated">Fake IDs / Related Lifestyles / Funds / Licenses</h3>
				</div>
				<fieldset class="repeating_lifestyle">
					<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
					<div class="settings">
						<div>
							<h3 data-i18n="fakeid">Fake ID</h3><textarea name="attr_name" placeholder="John Doe" title="Fake ID"></textarea>
							<h3 data-i18n="relatedlifestyle">Related Lifestyle</h3><textarea name="attr_lifestyle" placeholder="Middle" title="Related lifestyle"></textarea>
							<h3 data-i18n="funds">Funds</h3><textarea name="attr_funds" placeholder="$1,000 UCAS" title="Funds"></textarea>
							<h3 data-i18n="licenses">Licenses</h3><textarea name="attr_licenses" placeholder="Technomancer, Pistols" title="Licenses"></textarea>
						</div>
					</div>
					<div class="display">
						<input class="display-flag" type="checkbox" name="attr_display_flag" />
						<div class="display-row" title="Fake ID"><span name="attr_name"></span></div>
						<div class="collapsable">
							<em><span class="desc-lifestyle" name="attr_lifestyle"></span></em>
							<span class="desc-lifestyle" name="attr_funds"></span>
							<span class="desc-lifestyle" name="attr_licenses"></span>
						</div>
					</div>
					<button class="pictos settings-button" name="act_lifestyle" type="action">x</button>
				</fieldset>
			</div>
		</div>
	</div><!-- ~~~~~~~~ End of Lifestyle Row ~~~~~~~~ -->
	<!-- ~~~~~~~~ Start Contacts Row  ~~~~~~~~ -->
	<div class="pc-row">
		<div class="header right-header"><h1 data-i18n="contacts">Contacts</h1><div class="right-tri"></div></div>
		<div class="border-box repeat-box contacts">
			<div class="pc-box small-box">
				<div class="row-long">
					<h3 data-i18n="name">Name</h3><h3 data-i18n="loyalty">Loyalty</h3><h3 data-i18n="connection">Connection</h3><h3 data-i18n="favor">Favor</h3>
				</div>
				<fieldset class="repeating_contacts">
					<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
					<div class="settings">
						<div>
							<input type="text" name="attr_name" placeholder="Old Crow" title="Contact name" />
							<input type="number" name="attr_loyalty" min="1" placeholder="3" title="Loyalty" />
							<input type="number" name="attr_connection" min="1" placeholder="8" title="Connection" />
							<input type="number" name="attr_favors" placeholder="+2" title="Favors" />
							<h3 data-i18n="notes">Notes</h3>
							<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
						</div>
					</div>
					<div class="display">
						<input class="display-flag" type="checkbox" name="attr_display_flag" />
						<div class="display-row" title="Contact name"><span name="attr_display"></span></div>
						<div class="display-row" title="Loyalty"><span name="attr_loyalty"></span></div>
						<div class="display-row" title="Connection"><span name="attr_connection"></span></div>
						<div class="display-row" title="Favors"><span name="attr_favors"></span></div>
						<div class="collapsable">
							<div class="desc" title="Notes"><span name="attr_notes"></span></div>
						</div>
					</div>
					<button class="pictos settings-button" name="act_contacts" type="action">x</button>
				</fieldset>
			</div>
		</div>
	</div><!-- ~~~~~~~~ End of Contacts row ~~~~~~~~ -->
</div><div class="vehicle pc-col">
	<div class="pc-row">
		<div class="header right-header"><h1 data-i18n="vehicle">Vehicle</h1><div class="right-tri"></div></div>
		<div class="border-box repeat-box vehicle-box">
			<div class="pc-box medium-box">
				<fieldset class="repeating_vehicle">
					<input type="hidden" class="settings-toggle" name="attr_flag" value="settings" />
					<div class="settings">
						<div>
							<div class="row-long">
								<label data-i18n="name">Name</label>
								<input type="text" name="attr_name" placeholder="name" title="Vehicle name" />
								<label data-i18n="handling">Handling</label>
								<input type="hidden" name="attr_handling" />
								<input type="number" name="attr_handling_base" placeholder="#" title="Handling base" />
								<input type="number" name="attr_handling_modifier" placeholder="#" title="Handling modifier" />
								<input type="number" name="attr_handling_temp" placeholder="#" title="Handling temp" />
								<input type="hidden" name="attr_display_handling" placeholder="#" />
							</div>
							<div class="row-long">
								<label data-i18n="acceleration">Acceleration</label>
								<input type="hidden" name="attr_acceleration" />
								<input type="number" name="attr_acceleration_base" placeholder="#" title="Acceleration base" />
								<input type="number" name="attr_acceleration_modifier" placeholder="#" title="Acceleration modifier" />
								<input type="number" name="attr_acceleration_temp" placeholder="#" title="Acceleration temp" />
								<input type="hidden" name="attr_display_acceleration" placeholder="#" />
								<label data-i18n="speed">Speed</label>
								<input type="hidden" name="attr_speed" />
								<input type="number" name="attr_speed_base" placeholder="#" title="Speed base" />
								<input type="number" name="attr_speed_modifier" placeholder="#" title="Speed modifier" />
								<input type="number" name="attr_speed_temp" placeholder="#" title="Speed temp" />
								<input type="hidden" name="attr_display_speed" placeholder="#" />
							</div>
							<div class="row-long">
								<label data-i18n="pilot">Pilot</label>
								<input type="hidden" name="attr_pilot"  />
								<input type="number" name="attr_pilot_base" placeholder="#" title="Pilot base" />
								<input type="number" name="attr_pilot_modifier" placeholder="#" title="Pilot modifier" />
								<input type="number" name="attr_pilot_temp" placeholder="#" title="Pilot temp" />
								<input type="hidden" name="attr_display_pilot" placeholder="#" />
								<label data-i18n="body">Body</label>
								<input type="hidden" name="attr_body" />
								<input type="number" name="attr_body_base" placeholder="#" title="Body base" />
								<input type="number" name="attr_body_modifier" placeholder="#" title="Body modifier" />
								<input type="number" name="attr_body_temp" placeholder="#" title="Body temp" />
								<input type="hidden" name="attr_display_body" placeholder="#" />
							</div>
							<div class="row-long">
								<label data-i18n="armor">Armor</label>
								<input type="hidden" name="attr_armor"  />
								<input type="number" name="attr_armor_base" placeholder="#" title="Amro base" />
								<input type="number" name="attr_armor_modifier" placeholder="#" title="Armor modifier" />
								<input type="number" name="attr_armor_temp" placeholder="#" title="Armor temp" />
								<input type="hidden" name="attr_display_armor" placeholder="#" />
								<label data-i18n="sensor">Sensor</label>
								<input type="hidden" name="attr_sensor"  />
								<input type="number" name="attr_sensor_base" placeholder="#" title="Sensor base" />
								<input type="number" name="attr_sensor_modifier" placeholder="#" title="Sensor modifier" />
								<input type="number" name="attr_sensor_temp" placeholder="#" title="Sensor temp" />
								<input type="hidden" name="attr_display_sensor" placeholder="#" />
							</div>
							<div class="row-long">
								<h3 data-i18n="base">Base</h3><h3 data-i18n="modifier">Modifier</h3>
								<h3 data-i18n="temp">Temp</h3><h3 data-i18n="base">Base</h3>
								<h3 data-i18n="modifier">Modifier</h3><h3 data-i18n="temp">Temp</h3>
							</div>
							<h3 data-i18n="notes">Notes</h3>
							<textarea name="attr_notes" value="" placeholder="Notes"></textarea>
						</div>
					</div>
					<div class="display">
						<input class="display-flag" type="checkbox" name="attr_display_flag" />
						<div class="row-long">
							<div class="display-row" title="Vehicle">
								<h3 data-i18n="vehicle">Vehicle</h3>
								<div>
									<span name="attr_name"></span>
								</div>
							</div>
							<div class="display-row" title="Handling">
								<h3 data-i18n="handling">Handling</h3>
								<div class="vehicle-stat">
									<span name="attr_display_handling"></span>
								</div>
							</div>
						</div>
						<div class="row-long">
							<div class="display-row" title="Acceleration">
							<h3 data-i18n="acceleration">Acceleration</h3>
								<div class="vehicle-stat">
									<span name="attr_display_acceleration"></span>
								</div>
							</div>
							<div class="display-row" title="Speed">
								<h3 data-i18n="speed">Speed</h3>
								<div class="vehicle-stat">
									<span name="attr_display_speed"></span>
								</div>
							</div>
						</div>
						<div class="row-long">
							<div class="display-row" title="Pilot">
								<h3 data-i18n="pilot">Pilot</h3>
								<div class="vehicle-stat">
									<span name="attr_display_pilot"></span>
								</div>
							</div>
							<div class="display-row" title="Body">
								<h3 data-i18n="body">Body</h3>
								<div class="vehicle-stat">
									<span name="attr_display_body"></span>
								</div>
							</div>
						</div>
						<div class="row-long">
							<div class="display-row" title="Armor">
								<h3 data-i18n="armor">Armor</h3>
								<div class="vehicle-stat">
									<span name="attr_display_armor"></span>
								</div>
							</div>
							<div class="display-row" title="Sensor">
								<h3 data-i18n="sensor">Sensor</h3>
								<div class="vehicle-stat">
									<span name="attr_display_sensor"></span>
								</div>
							</div>
						</div>
						<div class="collapsable">  
							<div class="desc"><span name="attr_notes"></span></div>
						</div>
					</div>
					<button class="pictos settings-button" name="act_vehicle" type="action">x</button>
				</fieldset>
			</div>
		</div>
	</div>
</div>
  <div class="options pc-col">
	<div class="pc-row">
		<div class="header right-header"><h1 data-i18n="options">Options</h1><div class="right-tri"></div></div>
		<div class="border-box">
			<div class="pc-box">
				<div class="op-col">
					<div>
						<h2 data-i18n="character">Character</h2><br />
						<label data-i18n="mundane">Mundane</label><input class="character-type" type="checkbox" name="attr_flag_special" value="mundane" title="@{flag_special}" checked /><br />
						<label data-i18n="awakened">Awakened</label><input class="character-type" type="checkbox" name="attr_flag_special" value="magic" title="@{flag_special}" /><br />
						<label data-i18n="emerged">Emerged</label><input class="character-type" type="checkbox" name="attr_flag_special" value="resonance" title="@{flag_special}" />
					</div>
					<hr />
					<div>
						<h2 data-i18n="sheetselect">Sheet Select</h2><br />
						<select name="attr_sheet_type" title="@{sheet_type}">
							<option value="pc" data-i18n="pc">PC</option>
							<option value="grunt" data-i18n="grunt">grunt</option>
							<option value="host" data-i18n="host">Host</option>
							<option value="sprite" data-i18n="sprite">Sprite</option>
							<option value="vehicle" data-i18n="vehicle">Vehicle</option>
						</select>
					</div>
					<hr />
					<div>
						<h2 data-i18n="importer">Importer</h2>
						<button type="action" name="act_import_launch" data-i18n="importecharacter">Import Character</button>
						<p data-i18n="importertext">You can import a character with a JSON from Chummer. <!--or Hero Lab.--> The game owner must set a Compendium in the Game Settings. It does not matter which one you pick. Charactermancer software simply requires one be picked.</p>
					</div>
				</div>
				<div class="op-col">
					<div>
						<h2 data-i18n="temporarymodifiers">Temporary Modifiers</h2><br />
						<label data-i18n="defense">Defense</label><input type="number" name="attr_defense_temp" title="@{defense_temp}" /><input type="checkbox" name="attr_defense_temp_flag" value="on" checked />
						<label data-i18n="soak">Soak</label><input type="number" name="attr_soak_temp" title="@{soak_temp}" /><input type="checkbox" name="attr_soak_temp_flag" value="on" checked />
						<hr />
						<label data-i18n="body">Body</label><input type="number" name="attr_body_temp" title="@{body_temp}" /><input type="checkbox" name="attr_body_temp_flag" value="on" checked />
						<label data-i18n="agility">Agility</label><input type="number" name="attr_agility_temp" title="@{agility_temp}" /><input type="checkbox" name="attr_agility_temp_flag" value="on" checked />
						<label data-i18n="reaction">Reaction</label><input type="number" name="attr_reaction_temp" title="@{reaction_temp}" /><input type="checkbox" name="attr_reaction_temp_flag" value="on" checked />
						<label data-i18n="strength">Strength</label><input type="number" name="attr_strength_temp" title="@{strength_temp}" /><input type="checkbox" name="attr_strength_temp_flag" value="on" checked />
						<label data-i18n="willpower">Willpower</label><input type="number" name="attr_willpower_temp" title="@{willpower_temp}" /><input type="checkbox" name="attr_willpower_temp_flag" value="on" checked />
						<label data-i18n="logic">Logic</label><input type="number" name="attr_logic_temp" title="@{logic_temp}" /><input type="checkbox" name="attr_logic_temp_flag" value="on" checked />
						<label data-i18n="intuition">Intuition</label><input type="number" name="attr_intuition_temp" title="@{intuition_temp}" /><input type="checkbox" name="attr_intuition_temp_flag" value="on" checked />
						<label data-i18n="charisma">Charisma</label><input type="number" name="attr_charisma_temp" title="@{charisma_temp}" /><input type="checkbox" name="attr_charisma_temp_flag" value="on" checked />
						<label data-i18n="magic">Magic</label><input type="number" name="attr_magic_temp" title="@{magic_temp}" /><input type="checkbox" name="attr_magic_temp_flag" value="on" checked />
						<label data-i18n="resonance">Resonance</label><input type="number" name="attr_resonance_temp" title="@{resonance_temp}" /><input type="checkbox" name="attr_resonance_temp_flag" value="on" checked />
						<hr />
						<label data-i18n="initiative">Initiative</label><input type="number" name="attr_initiative_temp" title="@{initiative_temp}" /><input type="checkbox" name="attr_initiative_temp_flag" value="on" checked />
						<label data-i18n="initiativedice">Initiative Dice</label><input type="number" name="attr_initiative_dice_temp" title="@{initiative_dice_temp}" /><input type="checkbox" name="attr_initiative_dice_temp_flag" value="on" checked />
						<hr />
						<label data-i18n="mentallimit">Mental Limit</label><input type="number" name="attr_mental_limit_temp" title="@{mental_limit_temp}" /><input type="checkbox" name="attr_mental_limit_temp_flag" value="on" checked />
						<label data-i18n="physicallimit">Physical Limit</label><input type="number" name="attr_physical_limit_temp" title="@{physical_limit_temp}" /><input type="checkbox" name="attr_physical_limit_temp_flag" value="on" checked />
						<label data-i18n="sociallimit">Social Limit</label><input type="number" name="attr_social_limit_temp" title="@{social_limit_temp}" /><input type="checkbox" name="attr_social_limit_temp_flag" value="on" checked />
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
</div>
<div class="npc">
  <div class="tabs"><img alt="Shadowrun black and metallic logo" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Shadowrun5thEdition/images/ShadowrunLogo.png"/>
    <h2 data-i18n-title="/w GM">/w GM</h2>
    <label class="switch" data-i18n-title="whisper rolls to gm" title="whisper rolls to gm">
      <input class="whisper-toggle" name="attr_gm_toggle" type="checkbox" value="/w gm"/><span class="slider"></span>
    </label>
    <h2 data-i18n-title="wounds">wounds</h2>
    <label class="switch" data-i18n-title="wounds" title="wounds">
      <input class="whisper-toggle" name="attr_wounds_toggle" type="checkbox" value="@{wounds}"/><span class="slider"></span>
    </label>
    <h2 data-i18n-title="modifiers">modifiers</h2>
    <label class="switch" data-i18n-title="modifiers" title="modifiers">
      <input class="whisper-toggle" name="attr_modifiers_toggle" type="checkbox" value="?{Modifiers +/-|0}"/><span class="slider"></span>
    </label>
    <h2 data-i18n-title="edge">edge</h2>
    <label class="switch" data-i18n-title="edge" title="edge">
      <input class="whisper-toggle" name="attr_edge_toggle" type="checkbox" value="@{edge}"/><span class="slider"></span>
    </label>
    <button name="d6" title="Roll D6s" type="roll" value="@{gm_toggle} &amp;{template:rolls}{{header=^{d6}}}{{base=^{d6}}}{{dice=[[(?{d6s|0}d6&gt;5)]]}}">L</button>
    <select name="attr_sheet_type" title="Sheet Type">
      <option value="grunt" data-i18n="grunt">Grunt</option>
      <option value="host" data-i18n="host">Host</option>
      <option value="sprite" data-i18n="sprite">Sprite</option>
      <option value="vehicle" data-i18n="vehicle">Vehicle</option>
      <option value="pc" data-i18n="pc">PC</option>
    </select>
    <input name="attr_stats_toggle" type="checkbox" value="settings" checked="checked"/><span class="pictos">y</span>
  </div>
  <input name="attr_stats_toggle" type="hidden" value="settings"/>
  <div class="grunt attribute">
    <button data-i18n="b" name="body" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{body}}}{{base=^{base}}}{{dice=[[((@{body}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">b</button><span name="attr_display_body"></span>
    <label class="settings" data-i18n-title="Body" title="Body">
      <input name="attr_body_base" placeholder="3" title="@{body_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_body_modifier" placeholder="+" title="@{body_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="a" name="agility" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{agility}}}{{base=^{base}}}{{dice=[[((@{agility}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">a</button><span name="attr_display_agility"></span>
    <label class="settings" data-i18n-title="Agility" title="Agility">
      <input name="attr_agility_base" placeholder="3" title="@{agility_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_agility_modifier" placeholder="+" title="@{agility_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="r" name="reaction" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{reaction}}}{{base=^{base}}}{{dice=[[((@{reaction}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">r</button><span name="attr_display_reaction"></span>
    <label class="settings" data-i18n-title="Reaction" title="Reaction">
      <input name="attr_reaction_base" placeholder="3" title="@{reaction_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_reaction_modifier" placeholder="+" title="@{reaction_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="s" name="strength" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{strength}}}{{base=^{base}}}{{dice=[[((@{strength}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">s</button><span name="attr_display_strength"></span>
    <label class="settings" data-i18n-title="Strength" title="Strength">
      <input name="attr_strength_base" placeholder="3" title="@{strength_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_strength_modifier" placeholder="+" title="@{strength_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="w" name="willpower" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{willpower}}}{{base=^{base}}}{{dice=[[((@{willpower}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">w</button><span name="attr_display_willpower"></span>
    <label class="settings" data-i18n-title="Willpower" title="Willpower">
      <input name="attr_willpower_base" placeholder="3" title="@{willpower_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_willpower_modifier" placeholder="+" title="@{willpower_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="l" name="logic" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{logic}}}{{base=^{base}}}{{dice=[[((@{logic}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">l</button><span name="attr_display_logic"></span>
    <label class="settings" data-i18n-title="Logic" title="Logic">
      <input name="attr_logic_base" placeholder="3" title="@{logic_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_logic_modifier" placeholder="+" title="@{logic_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="i" name="intuition" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{intuition}}}{{base=^{base}}}{{dice=[[((@{intuition}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">i</button><span name="attr_display_intuition"></span>
    <label class="settings" data-i18n-title="Intuition" title="Intuition">
      <input name="attr_intuition_base" placeholder="3" title="@{intuition_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_intuition_modifier" placeholder="+" title="@{intuition_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="c" name="charisma" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{charisma}}}{{base=^{base}}}{{dice=[[((@{charisma}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">c</button><span name="attr_display_charisma"></span>
    <label class="settings" data-i18n-title="Charisma" title="Charisma">
      <input name="attr_charisma_base" placeholder="3" title="@{charisma_base}" type="number" value="3"/>
    </label>
    <label class="settings" data-i18n-title="modifier" title="modifier">
      <input name="attr_charisma_modifier" placeholder="+" title="@{charisma_modifier}" type="number" value=""/>
    </label>
    <button data-i18n="e" name="edge" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{edge}}}{{base=^{base}}}{{dice=[[((@{edge}+@{attribute_roll})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">e</button><span name="attr_edge"></span>
    <label class="settings" data-i18n-title="edge" title="edge">
      <input name="attr_edge" placeholder="3" title="@{edge}" type="number" value="3"/>
    </label>
    <h1 data-i18n="ess">ess</h1><span name="attr_essence"></span>
    <label class="settings" data-i18n-title="essence" title="essence">
      <input name="attr_essence" placeholder="6" title="@{essence}" type="number" value="6"/>
    </label>
    <h1 class="hide-magic" data-i18n="m">m</h1><span class="hide-magic" name="attr_magic"></span>
    <label class="settings hide-magic" data-i18n-title="magic" title="magic">
      <input name="attr_magic" placeholder="6" title="@{magic}" type="number" value="6"/>
    </label>
    <h1 class="hide-magic" data-i18n="f">f</h1><span class="hide-magic" name="attr_force"></span>
    <label class="settings hide-magic" data-i18n-title="force" title="force">
      <input name="attr_force" placeholder="6" title="@{force}" type="number" value="6"/>
    </label>
    <h1 class="hide-resonance" data-i18n="r">r</h1><span class="hide-resonance" name="attr_resonance"></span>
    <label class="settings hide-resonance" data-i18n-title="resonance" title="resonance">
      <input name="attr_resonance" placeholder="6" title="@{resonance}" type="number" value="6"/>
    </label>
  </div>
  <div class="host attribute">
    <button data-i18n="host_rating" name="host_rating" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{host_rating}}}{{base=^{host_rating}}}{{dice=[[((@{host_rating}+@{host_rating})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">host_rating</button><span name="attr_host_rating"></span>
    <label class="settings" data-i18n-title="host_rating" title="Host Rating">
      <input name="attr_host_rating" placeholder="5" title="@{host_rating}" type="number" value=""/>
    </label>
    <button data-i18n="attack" name="attack" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{attack}}}{{base=^{host_rating}}}{{dice=[[((@{host_rating}+@{attack})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">attack</button><span name="attr_attack"></span>
    <label class="settings" data-i18n-title="attack" title="Attack">
      <input name="attr_attack" placeholder="5" title="@{attack}" type="number" value=""/>
    </label>
    <button data-i18n="sleaze" name="sleaze" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{sleaze}}}{{base=^{host_rating}}}{{dice=[[((@{host_rating}+@{sleaze})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">sleaze</button><span name="attr_sleaze"></span>
    <label class="settings" data-i18n-title="sleaze" title="Sleaze">
      <input name="attr_sleaze" placeholder="6" title="@{sleaze}" type="number" value=""/>
    </label>
    <button data-i18n="data_processing" name="data_processing" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{data_processing}}}{{base=^{host_rating}}}{{dice=[[((@{host_rating}+@{data_processing})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">data_processing</button><span name="attr_data_processing"></span>
    <label class="settings" data-i18n-title="data_processing" title="Data Processing">
      <input name="attr_data_processing" placeholder="7" title="@{data_processing}" type="number" value=""/>
    </label>
    <button data-i18n="firewall" name="firewall" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{firewall}}}{{base=^{host_rating}}}{{dice=[[((@{host_rating}+@{firewall})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">firewall</button><span name="attr_firewall"></span>
    <label class="settings" data-i18n-title="firewall" title="Firewall">
      <input name="attr_firewall" placeholder="8" title="@{firewall}" type="number" value=""/>
    </label>
  </div>
  <div class="vehicle attribute">
    <h1 data-i18n="hand">Hand</h1><span name="attr_handling"></span>
    <label class="settings" data-i18n-title="hand" title="Hand">
      <input name="attr_handling" placeholder="3" title="@{handling}" type="number" value=""/>
    </label>
    <h1 data-i18n="handoff">Hand (Off)</h1><span name="attr_handling_offroad"></span>
    <label class="settings" data-i18n-title="handoff" title="Hand (Off)">
      <input name="attr_handling_offroad" placeholder="3" title="@{handling_offroad}" type="number" value=""/>
    </label>
    <h1 data-i18n="speed">Speed</h1><span name="attr_speed"></span>
    <label class="settings" data-i18n-title="speed" title="Speed">
      <input name="attr_speed" placeholder="3" title="@{speed}" type="number" value=""/>
    </label>
    <h1 data-i18n="speedoff">Speed (Off)</h1><span name="attr_speed_offroad"></span>
    <label class="settings" data-i18n-title="speedoff" title="Speed (Off)">
      <input name="attr_speed_offroad" placeholder="3" title="@{speed_offroad}" type="number" value=""/>
    </label>
    <h1 data-i18n="accel">Accel</h1><span name="attr_acceleration"></span>
    <label class="settings" data-i18n-title="accel" title="Accel">
      <input name="attr_acceleration" placeholder="3" title="@{acceleration}" type="number" value=""/>
    </label>
    <h1 data-i18n="body">Body</h1><span name="attr_body"></span>
    <label class="settings" data-i18n-title="body" title="Body">
      <input name="attr_body" placeholder="3" title="@{body}" type="number" value=""/>
    </label>
    <button data-i18n="pilot" name="pilot" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{pilot}}}{{base=^{pilot}}}{{dice=[[((@{pilot}+@{pilot})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">pilot</button><span name="attr_pilot"></span>
    <label class="settings" data-i18n-title="pilot" title="Pilot">
      <input name="attr_pilot" placeholder="3" title="@{pilot}" type="number" value=""/>
    </label>
    <h1 data-i18n="sensor">Sensor</h1><span name="attr_sensor"></span>
    <label class="settings" data-i18n-title="sensor" title="Sensor">
      <input name="attr_sensor" placeholder="3" title="@{sensor}" type="number" value=""/>
    </label>
    <h1 data-i18n="seat">Seat</h1><span name="attr_seating"></span>
    <label class="settings" data-i18n-title="seat" title="Seat">
      <input name="attr_seating" placeholder="3" title="@{seating}" type="number" value=""/>
    </label>
  </div>
  <div class="sprite attribute">
    <button data-i18n="level" name="level" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{level}}}{{base=^{level}}}{{dice=[[((@{level}+@{level})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">level</button><span name="attr_level"></span>
    <label class="settings" data-i18n-title="level" title="Level">
      <input name="attr_level" placeholder="5" title="@{level}" type="number" value=""/>
    </label>
    <button data-i18n="attack" name="attack" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{attack}}}{{base=^{level}}}{{dice=[[((@{level}+@{attack})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">attack</button><span name="attr_attack"></span>
    <label class="settings" data-i18n-title="attack" title="Attack">
      <input name="attr_attack" placeholder="5" title="@{attack}" type="number" value=""/>
    </label>
    <button data-i18n="sleaze" name="sleaze" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{sleaze}}}{{base=^{level}}}{{dice=[[((@{level}+@{sleaze})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">sleaze</button><span name="attr_sleaze"></span>
    <label class="settings" data-i18n-title="sleaze" title="Sleaze">
      <input name="attr_sleaze" placeholder="6" title="@{sleaze}" type="number" value=""/>
    </label>
    <button data-i18n="data_processing" name="data_processing" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{data_processing}}}{{base=^{level}}}{{dice=[[((@{level}+@{data_processing})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">data_processing</button><span name="attr_data_processing"></span>
    <label class="settings" data-i18n-title="data_processing" title="Data Processing">
      <input name="attr_data_processing" placeholder="7" title="@{data_processing}" type="number" value=""/>
    </label>
    <button data-i18n="firewall" name="firewall" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{firewall}}}{{base=^{level}}}{{dice=[[((@{level}+@{firewall})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">firewall</button><span name="attr_firewall"></span>
    <label class="settings" data-i18n-title="firewall" title="Firewall">
      <input name="attr_firewall" placeholder="8" title="@{firewall}" type="number" value=""/>
    </label>
  </div>
  <div class="mid body">
    <div class="column">
      <h1 class="settings" data-i18n="bonuses">Bonuses</h1>
      <input name="attr_pr" type="hidden" value=""/>
      <div class="rows grunt">
        <h2 data-i18n="pr">Professional Rating</h2><span name="attr_pr" style="margin-left: 2%;"></span>
        <label class="settings" data-i18n-title="pr" title="Professional Rating">
          <input name="attr_pr" title="@{pr}" type="number"/>
        </label>
      </div>
      <div class="rows grunt">
        <button data-i18n="initiative" name="Initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{initiative}}}{{base=^{base}}}{{dice=[[((@{initiative_mod})+@{wounds_toggle}+@{modifiers_toggle})+(@{initiative_dice})d6cf0 &{tracker}]]}}">Initiative</button>
        <label class="settings" data-i18n-title="modifier" title="modifier">
          <input name="attr_initiative_modifier" placeholder="0" title="@{initiative_modifier}" type="number" value="0"/>
        </label><span class="settings">+</span>
        <label class="settings" data-i18n-title="modifierdice" title="Modifier Dice">
          <input min="0" max="4" name="attr_initiative_dice_modifier" placeholder="0" title="@{initiative_dice_modifier}" type="number" value="0"/>
        </label><span class="settings" data-i18n="d6">d6</span><span class="settings tiny-span">=</span><span name="attr_display_initiative_mod"></span><span class="tiny-span">+</span><span name="attr_initiative_dice"></span><span class="tiny-span" data-i18n="d6">d6</span>
      </div>
      <div class="rows grunt hide-magic">
        <button data-i18n="astralinitiative" name="Astral Initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{astralinitiative}}}{{base=^{base}}}{{dice=[[((@{astral_mod})+@{wounds_toggle}+@{modifiers_toggle})+(@{astral_dice})d6cf0 &{tracker}]]}}">Astral Initiative</button>
        <label class="settings" data-i18n-title="modifier" title="modifier">
          <input name="attr_astral_mod_modifier" placeholder="0" title="@{astral_modifier}" type="number" value="0"/>
        </label><span class="settings">+</span>
        <label class="settings" data-i18n-title="modifierdice" title="Modifier Dice">
          <input min="0" max="4" name="attr_astral_dice_modifier" placeholder="0" title="@{astral_dice_modifier}" type="number" value="0"/>
        </label><span class="settings" data-i18n="d6">d6</span><span class="settings tiny-span">=</span><span name="attr_display_astral_mod"></span><span class="tiny-span">+</span><span name="attr_astral_dice"></span><span class="tiny-span" data-i18n="d6">d6</span>
      </div>
      <div class="rows grunt vehicle sprite host">
        <button data-i18n="matrixinitiative" name="Matrix Initiative" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{matrixinitiative}}}{{base=^{base}}}{{dice=[[((@{matrix_mod})+@{wounds_toggle}+@{modifiers_toggle})+(@{matrix_dice})d6cf0 &{tracker}]]}}">Matrix Initiative</button>
        <label class="settings" data-i18n-title="modifier" title="modifier">
          <input name="attr_matrix_mod_modifier" placeholder="0" title="@{matrix_modifier}" type="number" value="0"/>
        </label><span class="settings">+</span>
        <label class="settings" data-i18n-title="modifierdice" title="Modifier Dice">
          <input min="0" max="4" name="attr_matrix_dice_modifier" placeholder="0" title="@{matrix_dice_modifier}" type="number" value="0"/>
        </label><span class="settings" data-i18n="d6">d6</span><span class="settings tiny-span">=</span><span name="attr_display_matrix_mod"></span><span class="tiny-span">+</span><span name="attr_matrix_dice"></span><span class="tiny-span" data-i18n="d6">d6</span>
      </div>
      <div class="rows grunt">
        <h2 data-i18n="movement">Movement</h2>
        <label class="settings" data-i18n-title="walk modifier" title="walk modifier">
          <input name="attr_walk_modifier" placeholder="0" title="@{walk_modifier}" type="number" value="0"/>
        </label><span class="settings"> / </span>
        <label class="settings" data-i18n-title="run modifier" title="run modifier">
          <input name="attr_run_modifier" placeholder="0" title="@{run_modifier}" type="number" value="0"/>
        </label><span class="settings"> / + </span>
        <label class="settings" data-i18n-title="movement modifier" title="movement modifier">
          <input name="attr_movement_mod_modifier" placeholder="2" title="@{movement_mod_modifier}" type="number" value="2"/>
        </label><span class="settings"></span><span class="settings tiny-span">=</span><span name="attr_walk" title="@{walk}"></span><span> / </span><span name="attr_run" title="@{run}"></span><span> / + </span><span name="attr_movement_mod" title="@{movement_mod}"></span><span></span>
      </div>
      <div class="rows grunt">
        <button data-i18n="conditionmonitorps" name="act_cond_reset" type="action">Condition Monitor (P/S)</button>
        <label class="settings" data-i18n-title="physicalbonus" title="physicalbonus">
          <input name="attr_physical_modifier" placeholder="0" title="@{physical_modifier}" type="number" value="0"/>
        </label><span class="settings">/</span>
        <label class="settings" data-i18n-title="stunbonus" title="stunbonus">
          <input name="attr_stun_modifier" placeholder="0" title="@{stun_modifier}" type="number" value="0"/>
        </label><span class="settings tiny-span">=</span><span name="attr_physical" title="@{physical_modifier}"></span><span>/</span><span name="attr_stun" title="@{stun_modifier}"></span>
      </div>
      <div class="rows vehicle">
        <button data-i18n="conditionmonitorpm" name="act_cond_reset" type="action">Condition Monitor (P/M)</button>
        <label class="settings" data-i18n-title="physicalbonus" title="physicalbonus">
          <input name="attr_physical_modifier" placeholder="0" title="@{physical_modifier}" type="number" value="0"/>
        </label><span class="settings">/</span>
        <label class="settings" data-i18n-title="matrixbonus" title="matrixbonus">
          <input name="attr_matrix_modifier" placeholder="0" title="@{matrix_modifier}" type="number" value="0"/>
        </label><span class="settings tiny-span">=</span><span name="attr_physical" title="@{physical_modifier}"></span><span>/</span><span name="attr_matrix" title="@{matrix_modifier}"></span>
      </div>
      <div class="rows host sprite">
        <button data-i18n="conditionmonitorm" name="act_cond_reset" type="action">Condition Monitor (M)</button><span name="attr_matrix"></span>
      </div>
      <div class="rows grunt">
        <h2 data-i18n="physical">val</h2>
        <label class="settings" data-i18n-title="modifier" title="modifier">
          <input name="attr_physical_limit_modifier" placeholder="0" title="@{physical_limit_modifier}" type="number" value="0"/>
        </label><span class="settings tiny-span">=</span><span name="attr_physical_limit" title="@{physical_limit}"></span>
        <h2 data-i18n="mental">val</h2>
        <label class="settings" data-i18n-title="modifier" title="modifier">
          <input name="attr_mental_limit_modifier" placeholder="0" title="@{mental_limit_modifier}" type="number" value="0"/>
        </label><span class="settings tiny-span">=</span><span name="attr_mental_limit" title="@{mental_limit}"></span>
        <h2 data-i18n="social">val</h2>
        <label class="settings" data-i18n-title="modifier" title="modifier">
          <input name="attr_social_limit_modifier" placeholder="0" title="@{social_limit_modifier}" type="number" value="0"/>
        </label><span class="settings tiny-span">=</span><span name="attr_social_limit" title="@{social_limit}"></span>
      </div>
      <div class="rows grunt pain-tolerance">
        <h2 data-i18n="paintolerance">Pain Tolerance</h2>
        <label class="settings" data-i18n-title="paintolerance" title="paintolerance">
          <input name="attr_pain_tolerance" min="-1" max="3" placeholder="0" title="@{pain_tolerance}" type="number" value="0"/>
        </label><em><span data-i18n="painfooter">Low Pain Tolernace adds a -1 and High Pain Tolerance adds a +1 per rank.</span></em>
      </div>
      <div class="rows vehicle">
        <div class="rows">
          <h2 data-i18n="data_processing">key</h2>
          <label class="settings" data-i18n-title="data_processing" title="data_processing"> 
            <input name="attr_data_processing" min="0" placeholder="0" title="@{data_processing}" type="number" value=""/>
          </label><span class="settings tiny-span">=</span><span name="attr_data_processing"></span>
        </div>
        <div class="rows">
          <h2 data-i18n="firewall">key</h2>
          <label class="settings" data-i18n-title="firewall" title="firewall"> 
            <input name="attr_firewall" min="0" placeholder="0" title="@{firewall}" type="number" value=""/>
          </label><span class="settings tiny-span">=</span><span name="attr_firewall"></span>
        </div>
        <div class="rows">
          <h2 data-i18n="devicerating">key</h2>
          <label class="settings" data-i18n-title="devicerating" title="devicerating"> 
            <input name="attr_device_rating" min="0" placeholder="0" title="@{device_rating}" type="number" value=""/>
          </label><span class="settings tiny-span">=</span><span name="attr_device_rating"></span>
        </div>
      </div>
    </div>
    <div class="column">
      <h1 class="settings" data-i18n="modifier">Modifier</h1>
      <div class="rows">
        <button data-i18n="armorrating" name="armorrating" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{armorrating}}}{{base=base}}{{dice=[[((@{soak})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">armorrating</button>
        <label class="settings" data-i18n-title="armorrating" title="armorrating">
          <input ="" ame="attr_armor_rating" placeholder="9" title="@{armor_rating}" type="number" value="0"/>
        </label>
      </div>
      <div class="rows">
        <button data-i18n="defense" name="defense" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{defense}}}{{base=base}}{{dice=[[((@{soak}+@{defense_modifier})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">defense</button>
        <label class="settings" data-i18n-title="defense" title="defense">
          <input name="attr_defense_modifier" placeholder="0" title="@{defense_modifier}" type="number" value="0"/>
        </label><span class="settings tiny-span">=</span><span name="attr_defense"></span>
      </div>
      <div class="rows">
        <button data-i18n="soak" name="soak" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{soak}}}{{base=base}}{{dice=[[((@{soak}+@{soak_modifier})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">soak</button>
        <label class="settings" data-i18n-title="soak" title="soak">
          <input name="attr_soak_modifier" placeholder="0" title="@{soak_modifier}" type="number" value="0"/>
        </label><span class="settings tiny-span">=</span><span name="attr_soak"></span>
      </div>
      <div class="rows">
        <button data-i18n="acidprotection" name="acidprotection" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{acidprotection}}}{{base=base}}{{dice=[[((@{soak}+@{acid_modifier})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">acidprotection</button>
        <label class="settings" data-i18n-title="acidprotection" title="acidprotection">
          <input name="attr_acid_modifier" placeholder="0" title="@{acid_modifier}" type="number" value="0"/>
        </label>
      </div>
      <div class="rows">
        <button data-i18n="coldprotection" name="coldprotection" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{coldprotection}}}{{base=base}}{{dice=[[((@{soak}+@{cold_modifier})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">coldprotection</button>
        <label class="settings" data-i18n-title="coldprotection" title="coldprotection">
          <input name="attr_cold_modifier" placeholder="0" title="@{cold_modifier}" type="number" value="0"/>
        </label>
      </div>
      <div class="rows">
        <button data-i18n="electricalprotection" name="electricalprotection" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{electricalprotection}}}{{base=base}}{{dice=[[((@{soak}+@{electrical_modifier})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">electricalprotection</button>
        <label class="settings" data-i18n-title="electricalprotection" title="electricalprotection">
          <input name="attr_electrical_modifier" placeholder="0" title="@{electrical_modifier}" type="number" value="0"/>
        </label>
      </div>
      <div class="rows">
        <button data-i18n="fireprotection" name="fireprotection" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{fireprotection}}}{{base=base}}{{dice=[[((@{soak}+@{fire_modifier})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">fireprotection</button>
        <label class="settings" data-i18n-title="fireprotection" title="fireprotection">
          <input name="attr_fire_modifier" placeholder="0" title="@{fire_modifier}" type="number" value="0"/>
        </label>
      </div>
      <div class="rows">
        <button data-i18n="radiationprotection" name="radiationprotection" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=^{radiationprotection}}}{{base=base}}{{dice=[[((@{soak}+@{radiation_modifier})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}">radiationprotection</button>
        <label class="settings" data-i18n-title="radiationprotection" title="radiationprotection">
          <input name="attr_radiation_modifier" placeholder="0" title="@{radiation_modifier}" type="number" value="0"/>
        </label>
      </div>
    </div>
    <!--/- OPTIONS-->
    <div class="column">
      <div class="rows">
        <h1 class="settings" data-i18n="options">Options</h1>
      </div>
      <div class="rows grunt">
        <label class="settings" data-i18n-title="mundane" title="mundane">
          <input class="character-type" name="attr_flag_special" title="@{flag_special}" type="radio" value="mundane"/>
          <h2 data-i18n="mundane">key</h2>
        </label>
        <label class="settings" data-i18n-title="awakened" title="awakened">
          <input class="character-type" name="attr_flag_special" title="@{flag_special}" type="radio" value="magic"/>
          <h2 data-i18n="awakened">key</h2>
        </label>
        <label class="settings" data-i18n-title="emerged" title="emerged">
          <input class="character-type" name="attr_flag_special" title="@{flag_special}" type="radio" value="resonance"/>
          <h2 data-i18n="emerged">key</h2>
        </label>
      </div>
      <div class="rows host grunt vehicle">
        <label class="settings" title="Matrix Device">
          <input class="character-type" name="attr_flag_matrix" title="@{flag_matrix}" type="checkbox" value="matrix"/>
          <h2>Matrix Device</h2>
        </label>
      </div>
      <div class="rows vehicle">
        <label class="settings" title="Drone">
          <input class="character-type" name="attr_flag_drone" title="@{flag_drone}" type="checkbox" value="drone"/>
          <h2>Drone</h2>
        </label>
      </div>
    </div>
  </div>
  <div class="end body">
    <input name="attr_quality" type="hidden" value=""/>
    <div class="textrow grunt">
      <h1 data-i18n="quality">key</h1><span name="attr_quality"></span>
      <label class="settings" data-i18n-title="quality" title="Qualities">
        <textarea name="attr_quality" placeholder="Qualities" title="@{quality}"></textarea>
      </label>
    </div>
    <input name="attr_augmentations" type="hidden" value=""/>
    <div class="textrow grunt">
      <h1 data-i18n="augmentations">key</h1><span name="attr_augmentations"></span>
      <label class="settings" data-i18n-title="augmentations" title="Augmentations">
        <textarea name="attr_augmentations" placeholder="Augmentations" title="@{augmentations}"></textarea>
      </label>
    </div>
    <input name="attr_gear" type="hidden" value=""/>
    <div class="textrow grunt vehicle">
      <h1 data-i18n="gear">key</h1><span name="attr_gear"></span>
      <label class="settings" data-i18n-title="gear" title="Gear">
        <textarea name="attr_gear" placeholder="Gear" title="@{gear}"></textarea>
      </label>
    </div>
    <input name="attr_programs" type="hidden" value=""/>
    <div class="textrow vehicle">
      <h1 data-i18n="programs">key</h1><span name="attr_programs"></span>
      <label class="settings" data-i18n-title="programs" title="Programs">
        <textarea name="attr_programs" placeholder="Programs" title="@{programs}"></textarea>
      </label>
    </div>
    <input name="attr_modifications" type="hidden" value=""/>
    <div class="textrow vehicle">
      <h1 data-i18n="modifications">key</h1><span name="attr_modifications"></span>
      <label class="settings" data-i18n-title="modifications" title="Modifications">
        <textarea name="attr_modifications" placeholder="Modifications" title="@{modifications}"></textarea>
      </label>
    </div>
    <input name="attr_powers" type="hidden" value=""/>
    <div class="textrow grunt hide-magic">
      <h1 data-i18n="powers">key</h1><span name="attr_powers"></span>
      <label class="settings" data-i18n-title="powers" title="Powers">
        <textarea name="attr_powers" placeholder="Powers" title="@{powers}"></textarea>
      </label>
    </div>
    <input name="attr_weakness" type="hidden" value=""/>
    <div class="textrow grunt hide-magic">
      <h1 data-i18n="weakness">key</h1><span name="attr_weakness"></span>
      <label class="settings" data-i18n-title="weakness" title="Weakness">
        <textarea name="attr_weakness" placeholder="Weakness" title="@{weakness}"></textarea>
      </label>
    </div>
    <div class="textrow grunt hide-magic">
      <input name="attr_initiate" type="hidden" value=""/>
      <h1 data-i18n="initiate">key</h1><span name="attr_initiate"></span>
      <label class="settings" data-i18n-title="initiate" title="Initiate">
        <input name="attr_initiate" placeholder="initiate" type="number" title="@{initiate}"/>
      </label><br/><span name="attr_metamagic"></span>
      <label class="settings" data-i18n-title="metamagic" title="metamagic">
        <textarea name="attr_metamagic" placeholder="metamagic" title="@{metamagic}"></textarea>
      </label>
    </div>
    <div class="textrow grunt hide-resonance">
      <input name="attr_submersion" type="hidden" value=""/>
      <h1 data-i18n="submersion">key</h1><span name="attr_submersion"></span>
      <label class="settings" data-i18n-title="submersion" title="Submersion">
        <input name="attr_submersion" placeholder="submersion" type="number" title="@{submersion}"/>
      </label><br/><span name="attr_echos"></span>
      <label class="settings" data-i18n-title="echos" title="echos">
        <textarea name="attr_echos" placeholder="echos" title="@{echos}"></textarea>
      </label>
    </div>
    <div class="rows grunt repeating inline-repeating">
      <h1 data-i18n="skills">skills</h1>
      <fieldset class="repeating_active">
        <input name="attr_display_rating" type="hidden"/>
        <input name="attr_display_specialization" type="hidden" value=""/>
        <input name="attr_display_limit" type="hidden" value="Physical"/>
        <input name="attr_display_attribute" type="hidden" value="Agility"/>
        <input name="attr_dicepool" type="hidden" value="0"/>
        <input class="toggle" name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <button name="skill" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{display_limit}}}"><span name="attr_display"></span></button>
        <button name="specialization" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute}+2)+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Spec: @{specialization}, @{display_limit}}}"><span name="attr_display_specialization"></span></button><span name="attr_display_rating"></span>
        <div class="settings">
          <h2 data-i18n="skill">Skill</h2>
          <h2 data-i18n="rating">Rating</h2>
          <h2 data-i18n="ratingmodifier">Rating Modifier</h2>
          <h2 data-i18n="attribute">Attribute</h2>
          <h2 data-i18n="limit">Limit</h2>
          <select class="skill-select" name="attr_skill" title="@{repeating_active_${x}_skill}" value="Close Combat Group"><option class="option-headers" disabled="true" data-i18n="combatskills">Combat Skills</option>
<option class="option-groups" value="Close Combat Group" data-i18n="closecombat">Close Combat Group</option>
<option class="option-groups" value="Firearms Group" data-i18n="firearms">Firearms Group</option>
<option value="Archery" data-i18n="archery">Archery</option>
<option value="Automatics" data-i18n="automatics">Automatics</option>
<option value="Blades" data-i18n="blades">Blades</option>
<option value="Clubs" data-i18n="clubs">Clubs</option>
<option value="Exotic Melee" data-i18n="exoticmelee">Exotic Melee</option>
<option value="Exotic Range" data-i18n="exoticrange">Exotic Range</option>
<option value="Heavy Weapons" data-i18n="heavyweapons">Heavy Weapons</option>
<option value="Longarms" data-i18n="longarms">Longarms</option>
<option value="Pistols" data-i18n="pistols">Pistols</option>
<option value="Throwing Weapons" data-i18n="throwingweapons">Throwing Weapons</option>
<option value="Unarmed Combat" data-i18n="unarmedcombat">Unarmed Combat</option>
<option class="option-headers" disabled="true" data-i18n="physicalskills">Physical Skills</option>
<option class="option-groups" value="Athletics Group" data-i18n="athleticsgroup">Athletics Group</option>
<option class="option-groups" value="Outdoors Group" data-i18n="outdoorsgroup">Outdoors Group</option>
<option class="option-groups" value="Stealth Group" data-i18n="stealthgroup">Stealth Group</option>
<option value="Disguise" data-i18n="disguise">Disguise</option>
<option value="Diving" data-i18n="diving">Diving</option>
<option value="Escape Artist" data-i18n="escapeartist">Escape Artist</option>
<option value="Flight" data-i18n="flight">Flight</option>
<option value="Free Fall" data-i18n="freefall">Free Fall</option>
<option value="Gymnastics" data-i18n="gymnastics">Gymnastics</option>
<option value="Palming" data-i18n="palming">Palming</option>
<option value="Perception" data-i18n="perception">Perception</option>
<option value="Running" data-i18n="running">Running</option>
<option value="Sneaking" data-i18n="sneaking">Sneaking</option>
<option value="Survival" data-i18n="survival">Survival</option>
<option value="Swimming" data-i18n="swimming">Swimming</option>
<option value="Tracking" data-i18n="tracking">Tracking</option>
<option class="option-headers" disabled="true" data-i18n="socialskills">Social Skills</option>
<option class="option-groups" value="Acting Group" data-i18n="actinggroup">Acting Group</option>
<option class="option-groups" value="Influence Group" data-i18n="influencegroup">Influence Group</option>
<option value="Con" data-i18n="con">Con</option>
<option value="Etiquette" data-i18n="etiquette">Etiquette</option>
<option value="Impersonation" data-i18n="impersonation">Impersonation</option>
<option value="Instruction" data-i18n="instruction">Instruction</option>
<option value="Intimidation" data-i18n="intimidation">Intimidation</option>
<option value="Leadership" data-i18n="leadership">Leadership</option>
<option value="Negotiation" data-i18n="negotiation">Negotiation</option>
<option value="Performance" data-i18n="performance">Performance</option>
<option class="option-headers" disabled="true" data-i18n="magicalskills">Magical Skills</option>
<option class="option-groups" value="Conjuring Group" data-i18n="conjuringgroup">Conjuring Group</option>
<option class="option-groups" value="Enchanting Group" data-i18n="enchantinggroup">Enchanting Group</option>
<option class="option-groups" value="Sorcery Group" data-i18n="sorcerygroup">Sorcery Group</option>
<option value="Alchemy" data-i18n="alchemy">Alchemy</option>
<option value="Arcana" data-i18n="arcana">Arcana</option>
<option value="Assensing" data-i18n="assensing">Assensing</option>
<option value="Astral Combat" data-i18n="astralcombat">Astral Combat</option>
<option value="Banishing" data-i18n="banishing">Banishing</option>
<option value="Binding" data-i18n="binding">Binding</option>
<option value="Counterspelling" data-i18n="counterspelling">Counterspelling</option>
<option value="Disenchanting" data-i18n="disenchanting">Disenchanting</option>
<option value="Ritual Spellcasting" data-i18n="ritualspellcasting">Ritual Spellcasting</option>
<option value="Spellcasting" data-i18n="spellcasting">Spellcasting</option>
<option value="Summoning" data-i18n="summoning">Summoning</option>
<option class="option-headers" disabled="true" data-i18n="resonanceskills">Resonance Skills</option>
<option class="option-groups" value="Tasking Group" data-i18n="taskinggroup">Tasking Group</option>
<option value="Compiling" data-i18n="compiling">Compiling</option>
<option value="Decompiling" data-i18n="decompiling">Decompiling</option>
<option value="Registering" data-i18n="registering">Registering</option>
<option class="option-headers" disabled="true" data-i18n="technicalskills">Technical Skills</option>
<option class="option-groups" value="Biotech Group" data-i18n="biotechgroup">Biotech Group</option>
<option class="option-groups" value="Cracking Group" data-i18n="crackinggroup">Cracking Group</option>
<option class="option-groups" value="Electronics Group" data-i18n="electronicsgroup">Electronics Group</option>
<option class="option-groups" value="Engineering Group" data-i18n="engineeringgroup">Engineering Group</option>
<option value="Aeronautics Mechanic" data-i18n="aeronauticsmechanic">Aeronautics Mechanic</option>
<option value="Animal Handling" data-i18n="animalhandling">Animal Handling</option>
<option value="Armorer" data-i18n="armorer">Armorer</option>
<option value="Artisan" data-i18n="artisan">Artisan</option>
<option value="Automotive Mechanic" data-i18n="automotivemechanic">Automotive Mechanic</option>
<option value="Biotechnology" data-i18n="biotechnology">Biotechnology</option>
<option value="Chemistry" data-i18n="chemistry">Chemistry</option>
<option value="Computer" data-i18n="computer">Computer</option>
<option value="Cybercombat" data-i18n="cybercombat">Cybercombat</option>
<option value="Cybertechnology" data-i18n="cybertechnology">Cybertechnology</option>
<option value="Demolitions" data-i18n="demolitions">Demolitions</option>
<option value="Electronic Warfare" data-i18n="eletronicwarfare">Electronic Warfare</option>
<option value="First Aid" data-i18n="firstaid">First Aid</option>
<option value="Forgery" data-i18n="forgery">Forgery</option>
<option value="Hacking" data-i18n="hacking">Hacking</option>
<option value="Hardware" data-i18n="hardware">Hardware</option>
<option value="Industrial Mechanic" data-i18n="industrialmechanic">Industrial Mechanic</option>
<option value="Locksmith" data-i18n="locksmith">Locksmith</option>
<option value="Medicine" data-i18n="medicine">Medicine</option>
<option value="Nautical Mechanic" data-i18n="nauticalmechanic">Nautical Mechanic</option>
<option value="Navigation" data-i18n="navigation">Navigation</option>
<option value="Gunnery" data-i18n="gunnery">Gunnery</option>
<option value="Pilot Aerospace" data-i18n="pilotaerospace">Pilot Aerospace</option>
<option value="Pilot Aircraft" data-i18n="pilotaircraft">Pilot Aircraft</option>
<option value="Pilot Exotic Vehicle" data-i18n="pilotexoticvehicle">Pilot Exotic Vehicle</option>
<option value="Pilot Ground Craft" data-i18n="pilotgroundcraft">Pilot Ground Craft</option>
<option value="Pilot Walker" data-i18n="pilotwalker">Pilot Walker</option>
<option value="Pilot Watercraft" data-i18n="pilotwatercraft">Pilot Watercraft</option>
<option value="Software" data-i18n="software">Software</option>
          </select>
          <label data-i18n-title="rating" title="rating">
            <input name="attr_rating" min="0" placeholder="0" title="@{repeating_active_${x}_rating}" type="number"/>
          </label>
          <label data-i18n-title="ratingmodifier" title="Rating Modifier">
            <input name="attr_rating_modifier" min="0" placeholder="0" title="@{repeating_active_${x}_rating_modifier}" type="number"/>
          </label>
          <select class="attribute-select" name="attr_attribute" title="@{repeating_active_${x}_attribute}">
            <option data-i18n="body" value="@{body}">Body</option>
            <option data-i18n="agility" value="@{agility}" selected="selected">Agility</option>
            <option data-i18n="reaction" value="@{reaction}">Reaction</option>
            <option data-i18n="strength" value="@{strength}">Strength</option>
            <option data-i18n="willpower" value="@{willpower}">Willpower</option>
            <option data-i18n="logic" value="@{logic}">Logic</option>
            <option data-i18n="intuition" value="@{intuition}">Intuition</option>
            <option data-i18n="charisma" value="@{charisma}">Charisma</option>
            <option data-i18n="magic" value="@{magic}">Magic</option>
            <option data-i18n="resonance" value="@{resonance}">Resonance</option>
          </select>
          <select class="limit-select" name="attr_limit" title="@{repeating_active_${x}_limit}" value="physical_limit">
            <option value="none">-</option>
            <option data-i18n="mental" value="@{mental_limit}">Mental</option>
            <option data-i18n="physical" value="@{physical_limit}" selected="selected">Physical</option>
            <option data-i18n="social" value="@{social_limit}">Social</option>
            <option data-i18n="attack" value="@{attack}">Attack</option>
            <option data-i18n="data_processing" value="@{data_processing}">Data Processing</option>
            <option data-i18n="firewall" value="@{firewall}">Firewall</option>
            <option data-i18n="sleaze" value="@{sleaze}">Sleaze</option>
          </select>
          <h2 class="full-row" data-i18n="specializations">Specializations</h2>
          <label class="full-row" data-i18n-title="specializations" title="Specializations"> 
            <input name="attr_specialization" placeholder="Specalizations" title="@{repeating_active_${x}_specialization}" type="text"/>
          </label>
        </div>
      </fieldset>
    </div>
    <div class="rows grunt repeating inline-repeating">
      <h1 data-i18n="knowledgeskills">knowledgeskills</h1>
      <fieldset class="repeating_knowledge">
        <input name="attr_display_rating" type="hidden"/>
        <input name="attr_display_specialization" type="hidden" value=""/>
        <input name="attr_display_limit" type="hidden" value="Mental"/>
        <input name="attr_display_attribute" type="hidden" value="Logic"/>
        <input name="attr_dicepool" type="hidden" value="0"/>
        <input class="toggle" name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <button name="skill" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{display_limit}}}"><span name="attr_display"></span></button>
        <button name="specialization" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute}+2)+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Spec: @{specialization}, @{display_limit}}}"><span name="attr_display_specialization"></span></button><span name="attr_display_rating"></span>
        <div class="settings">
          <h2 data-i18n="skill">Skill</h2>
          <h2 data-i18n="rating">Rating</h2>
          <h2 data-i18n="ratingmodifier">Rating Modifier</h2>
          <h2 data-i18n="attribute">Attribute</h2>
          <h2 data-i18n="limit">Limit</h2>
          <label data-i18n-title="skill" title="skill">
            <input name="attr_skill" placeholder="knowledge" title="@{repeating_knowledge_${x}_skill}" type="text"/>
          </label>
          <label data-i18n-title="rating" title="rating">
            <input name="attr_rating" min="0" placeholder="0" title="@{repeating_knowledge_${x}_rating}" type="number"/>
          </label>
          <label data-i18n-title="ratingmodifier" title="Rating Modifier">
            <input name="attr_rating_modifier" min="0" placeholder="0" title="@{repeating_knowledge_${x}_rating_modifier}" type="number"/>
          </label>
          <select class="attribute-select" name="attr_attribute" title="@{repeating_knowledge_${x}_attribute}">
            <option data-i18n="body" value="@{body}">Body</option>
            <option data-i18n="agility" value="@{agility}">Agility</option>
            <option data-i18n="reaction" value="@{reaction}">Reaction</option>
            <option data-i18n="strength" value="@{strength}">Strength</option>
            <option data-i18n="willpower" value="@{willpower}">Willpower</option>
            <option data-i18n="logic" value="@{logic}" selected="selected">Logic</option>
            <option data-i18n="intuition" value="@{intuition}">Intuition</option>
            <option data-i18n="charisma" value="@{charisma}">Charisma</option>
            <option data-i18n="magic" value="@{magic}">Magic</option>
            <option data-i18n="resonance" value="@{resonance}">Resonance</option>
          </select>
          <select class="limit-select" name="attr_limit" title="@{repeating_knowledge_${x}_limit}" value="physical_limit">
            <option value="none">-</option>
            <option data-i18n="mental" value="@{mental_limit}" selected="selected">Mental</option>
            <option data-i18n="physical" value="@{physical_limit}">Physical</option>
            <option data-i18n="social" value="@{social_limit}">Social</option>
            <option data-i18n="attack" value="@{attack}">Attack</option>
            <option data-i18n="data_processing" value="@{data_processing}">Data Processing</option>
            <option data-i18n="firewall" value="@{firewall}">Firewall</option>
            <option data-i18n="sleaze" value="@{sleaze}">Sleaze</option>
          </select>
          <h2 class="full-row" data-i18n="specializations">Specializations</h2>
          <label class="full-row" data-i18n-title="specializations" title="Specializations"> 
            <input name="attr_specialization" placeholder="Specalizations" title="@{repeating_knowledge_${x}_specialization}" type="text"/>
          </label>
        </div>
      </fieldset>
    </div>
    <div class="rows grunt repeating inline-repeating">
      <h1 data-i18n="languageskills">languageskills</h1>
      <fieldset class="repeating_language">
        <input name="attr_display_rating" type="hidden"/>
        <input name="attr_display_specialization" type="hidden" value=""/>
        <input name="attr_display_limit" type="hidden" value="Social"/>
        <input name="attr_display_attribute" type="hidden" value="Charisma"/>
        <input name="attr_dicepool" type="hidden" value="0"/>
        <input class="toggle" name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <button name="skill" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{display_limit}}}"><span name="attr_display"></span></button>
        <button name="specialization" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=@{display_attribute}}}{{dice=[[((@{dicepool}+@{attribute}+2)+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=Spec: @{specialization}, @{display_limit}}}"><span name="attr_display_specialization"></span></button><span name="attr_display_rating"></span>
        <div class="settings">
          <h2 data-i18n="skill">Skill</h2>
          <h2 data-i18n="rating">Rating</h2>
          <h2 data-i18n="ratingmodifier">Rating Modifier</h2>
          <h2 data-i18n="attribute">Attribute</h2>
          <h2 data-i18n="limit">Limit</h2>
          <label data-i18n-title="skill" title="skill">
            <input name="attr_skill" placeholder="language" title="@{repeating_language_${x}_skill}" type="text"/>
          </label>
          <label data-i18n-title="rating" title="rating">
            <input name="attr_rating" min="0" placeholder="0" title="@{repeating_language_${x}_rating}" type="number"/>
          </label>
          <label data-i18n-title="ratingmodifier" title="Rating Modifier">
            <input name="attr_rating_modifier" min="0" placeholder="0" title="@{repeating_language_${x}_rating_modifier}" type="number"/>
          </label>
          <select class="attribute-select" name="attr_attribute" title="@{repeating_language_${x}_attribute}">
            <option data-i18n="body" value="@{body}">Body</option>
            <option data-i18n="agility" value="@{agility}">Agility</option>
            <option data-i18n="reaction" value="@{reaction}">Reaction</option>
            <option data-i18n="strength" value="@{strength}">Strength</option>
            <option data-i18n="willpower" value="@{willpower}">Willpower</option>
            <option data-i18n="logic" value="@{logic}">Logic</option>
            <option data-i18n="intuition" value="@{intuition}">Intuition</option>
            <option data-i18n="charisma" value="@{charisma}" selected="selected">Charisma</option>
            <option data-i18n="magic" value="@{magic}">Magic</option>
            <option data-i18n="resonance" value="@{resonance}">Resonance</option>
          </select>
          <select class="limit-select" name="attr_limit" title="@{repeating_language_${x}_limit}" value="physical_limit">
            <option value="none">-</option>
            <option data-i18n="mental" value="@{mental_limit}">Mental</option>
            <option data-i18n="physical" value="@{physical_limit}">Physical</option>
            <option data-i18n="social" value="@{social_limit}" selected="selected">Social</option>
            <option data-i18n="attack" value="@{attack}">Attack</option>
            <option data-i18n="data_processing" value="@{data_processing}">Data Processing</option>
            <option data-i18n="firewall" value="@{firewall}">Firewall</option>
            <option data-i18n="sleaze" value="@{sleaze}">Sleaze</option>
          </select>
          <h2 class="full-row" data-i18n="specializations">Specializations</h2>
          <label class="full-row" data-i18n-title="specializations" title="Specializations"> 
            <input name="attr_specialization" placeholder="Specalizations" title="@{repeating_language_${x}_specialization}" type="text"/>
          </label>
        </div>
      </fieldset>
    </div>
    <div class="rows sprite repeating inline-repeating">
      <h1 data-i18n="skills">skills</h1>
      <fieldset class="repeating_active">
        <input class="toggle" name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <button name="skill" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{skill}}}{{base=^{level}}}{{dice=[[((@{level}+@{level})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}"><span name="attr_display"></span></button>
        <div class="settings">
          <h2 class="full-row" data-i18n="skill">Skill</h2>
          <select class="skill-select" name="attr_skill" title="@{repeating_undefined_${x}_skill}">	<option value="Computer" data-i18n="computer">Computer</option>
	<option value="Cybercombat" data-i18n="cybercombat">Cybercombat</option>
	<option value="Electronic Warfare" data-i18n="eletronicwarfare">Electronic Warfare</option>
	<option value="Hacking" data-i18n="hacking">Hacking</option>
	<option value="Hardware" data-i18n="hardware">Hardware</option>
          </select>
        </div>
      </fieldset>
    </div>
    <div class="rows sprite repeating inline-repeating">
      <h1 data-i18n="powers">Powers</h1>
      <fieldset class="repeating_powers">
        <input class="toggle" name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <button name="power" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{power}}}{{base=^{level}}}{{dice=[[((@{level}+@{level})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}"><span name="attr_power"></span></button>
        <div class="settings">
          <h2 class="full-row" data-i18n="power">power</h2>
          <label class="full-row" data-i18n-title="power" title="power">
            <input name="attr_power" placeholder="power" title="@{repeating_powers_${x}_power} power name" type="text"/>
          </label>
          <h2 class="full-row" data-i18n="notes">Notes</h2>
          <label class="full-row" data-i18n-title="notes" title="notes">
            <textarea name="attr_notes" placeholder="Powers notes" title="@{repeating_powers_${x}_notes}" value=""></textarea>
          </label>
        </div>
      </fieldset>
    </div>
    <div class="rows grunt vehicle repeating weapons">
      <h1 data-i18n="weapons">Weapons</h1>
      <fieldset class="repeating_weapon">
        <input name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <input name="attr_weapon" type="hidden" value=""/><span name="attr_weapon_dice"></span>
        <button name="weapon" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{weapon_type}}}{{base=^{base}}}{{dice=[[((@{weapon_dice})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=ACC @{weapon_acc}, DV @{weapon_dv}, AP @{weapon_ap}}}{{rea=[[@{weapon_reach}]]}}"><span name="attr_weapon_name"></span></button>
        <div class="settings">
          <input name="attr_weapon_range" type="hidden" value="range"/>
          <h2 data-i18n="range">Range</h2>
          <h2 data-i18n="dice">Dice</h2>
          <h2 data-i18n="name">Name</h2>
          <h2 data-i18n="type">Type</h2>
          <h2 data-i18n="reach">Reach</h2>
          <h2 data-i18n="acc">ACC</h2>
          <h2 data-i18n="dam">Dam</h2>
          <h2 data-i18n="ap">AP</h2>
          <h2 data-i18n="modes">Modes</h2>
          <h2 data-i18n="recoil">Recoil</h2>
          <h2 data-i18n="ammo">Ammo</h2>
          <select name="attr_weapon_range" title="@{repeating_weapon_${x}_weapon_range}" value="range">
            <option data-i18n="range" value="range" selected="selected">range</option>
            <option data-i18n="melee" value="melee">melee</option>
          </select>
          <label data-i18n-title="dice" title="Dice">
            <input name="attr_weapon_dice" placeholder="18" title="@{repeating_weapon_${x}_weapon_dice}" type="number"/>
          </label>
          <label data-i18n-title="name" title="Name">
            <input name="attr_weapon_name" placeholder="Ares Predator" title="@{repeating_weapon_${x}_weapon_name}" type="text"/>
          </label>
          <label data-i18n-title="type" title="Type">
            <input name="attr_weapon_type" placeholder="Heavy Pistol" title="@{repeating_weapon_${x}_weapon_type}" type="text"/>
          </label>
          <label data-i18n-title="reach" title="Reach">
            <input name="attr_weapon_reach" placeholder="0" title="@{repeating_weapon_${x}_weapon_reach}" type="number"/>
          </label>
          <label data-i18n-title="acc" title="ACC">
            <input name="attr_weapon_acc" placeholder="5" title="@{repeating_weapon_${x}_weapon_acc}" type="text"/>
          </label>
          <label data-i18n-title="dam" title="Dam">
            <input name="attr_weapon_dv" placeholder="9P" title="@{repeating_weapon_${x}_weapon_dv}" type="text"/>
          </label>
          <label data-i18n-title="ap" title="AP">
            <input name="attr_weapon_ap" placeholder="-2" title="@{repeating_weapon_${x}_weapon_ap}" type="number"/>
          </label>
          <label data-i18n-title="modes" title="Modes">
            <input name="attr_weapon_mode" placeholder="SA/BF/FA" title="@{repeating_weapon_${x}_weapon_mode}" type="text"/>
          </label>
          <label data-i18n-title="recoil" title="Recoil">
            <input name="attr_weapon_recoil" placeholder="+2" title="@{repeating_weapon_${x}_weapon_recoil}" type="text"/>
          </label>
          <label data-i18n-title="ammo" title="Ammo">
            <input name="attr_weapon_ammo" placeholder="15" title="@{repeating_weapon_${x}_weapon_ammo}" type="number"/>
          </label>
          <label data-i18n-title="notes" title="Notes">
            <input name="attr_weapon_note" placeholder="w/ 3 clips of explosive rounds" title="@{repeating_weapon_${x}_weapon_note}" type="text"/>
          </label><span>(c)</span>
        </div>
      </fieldset>
    </div>
    <div class="rows grunt repeating spells hide-magic">
      <h1 data-i18n="spells">Spells</h1>
      <fieldset class="repeating_NPCspell">
        <input name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <input name="attr_spell" type="hidden" value=""/><span name="attr_dice"></span>
        <button name="spell" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{name}}}{{base=^{base}}}{{dice=[[((@{dice})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=@{combat_type}?{Force|}, Drain [[?{Force|}+(@{drain})]]}}"><span name="attr_name"></span></button><span name="attr_spell"></span>
        <div class="settings">
          <input name="attr_category" type="hidden" value=""/>
          <h2 data-i18n="category">Category</h2>
          <h2 data-i18n="dice">Dice</h2>
          <h2 data-i18n="name">Name</h2>
          <h2 data-i18n="type">Type</h2>
          <h2 data-i18n="range">Range</h2>
          <h2 data-i18n="duration">Duration</h2>
          <h2 data-i18n="drain">Drain</h2>
          <h2 data-i18n="combat">Combat</h2>
          <h2 data-i18n="dam">Dam</h2>
          <select name="attr_category" title="@{repeating_NPCspell_${x}_category}" value="combat">
            <option data-i18n="combat" value="Combat" selected="selected">combat</option>
            <option data-i18n="detection" value="Detection">detection</option>
            <option data-i18n="health" value="Health">health</option>
            <option data-i18n="illusion" value="Illusion">illusion</option>
            <option data-i18n="manipulation" value="Manipulation">manipulation</option>
          </select>
          <label data-i18n-title="dice" title="Dice">
            <input name="attr_dice" placeholder="18" title="@{repeating_NPCspell_${x}_dice}" type="number"/>
          </label>
          <label data-i18n-title="name" title="Name">
            <input name="attr_name" placeholder="Fireball" title="@{repeating_NPCspell_${x}_name}" type="text"/>
          </label>
          <select name="attr_type" title="@{repeating_NPCspell_${x}_type}" value="P">
            <option data-i18n="mana" value="M">mana</option>
            <option data-i18n="physical" value="P">physical</option>
          </select>
          <select name="attr_range" title="@{repeating_NPCspell_${x}_range}" value="LOS">
            <option data-i18n="los" value="LOS">los</option>
            <option data-i18n="los (a)" value="LOS (A)">los (a)</option>
            <option data-i18n="special" value="Special">special</option>
            <option data-i18n="t" value="T">t</option>
            <option data-i18n="t (a)" value="T (A)">t (a)</option>
          </select>
          <select name="attr_duration" title="@{repeating_NPCspell_${x}_duration}" value="Instant">
            <option data-i18n="instant" value="Instant">instant</option>
            <option data-i18n="permanent" value="Permanent">permanent</option>
            <option data-i18n="special" value="Special">special</option>
            <option data-i18n="sustained" value="Sustained">sustained</option>
          </select>
          <label data-i18n-title="drain" title="Drain">
            <input name="attr_drain" placeholder="-1" title="@{repeating_NPCspell_${x}_drain}" type="number"/>
          </label>
          <select name="attr_combat_type" title="@{repeating_NPCspell_${x}_combat_type}" value="Force">
            <option value="Force " selected="selected"></option>
            <option data-i18n="direct" value="Direct, Force ">direct</option>
            <option data-i18n="indirect" value="Indirect, Force ?{Force|}, AP -">indirect</option>
          </select>
          <label data-i18n-title="dam" title="Dam">
            <input name="attr_damage" placeholder="P" title="@{repeating_NPCspell_${x}_damage}" type="text"/>
          </label>
          <label data-i18n-title="notes" title="Notes">
            <input name="attr_note" placeholder="may start fires" title="@{repeating_NPCspell_${x}_note}" type="text"/>
          </label>
        </div>
      </fieldset>
    </div>
    <div class="rows grunt repeating forms hide-resonance">
      <h1 data-i18n="complexform">Complex Forms</h1>
      <fieldset class="repeating_form">
        <input name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <input name="attr_form" type="hidden" value=""/><span name="attr_form_dice"></span>
        <button name="complex form" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{form_name}}}{{base=^{base}}}{{dice=[[((@{form_dice})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{desc=?{Level|}, Fade [[?{Level|}+(@{form_fade})]]}}"><span name="attr_form_name"></span></button><span name="attr_form"></span>
        <div class="settings">
          <h2 data-i18n="dice">Dice</h2>
          <h2 data-i18n="name">Name</h2>
          <h2 data-i18n="target">Target</h2>
          <h2 data-i18n="duration">Duration</h2>
          <h2 data-i18n="fade">Fade</h2>
          <label data-i18n-title="dice" title="Dice">
            <input name="attr_form_dice" placeholder="18" title="@{repeating_form_${x}_form_dice}" type="number"/>
          </label>
          <label data-i18n-title="name" title="Name">
            <input name="attr_form_name" placeholder="Editor" title="@{repeating_form_${x}_form_name}" type="text"/>
          </label>
          <select name="attr_form_target" title="@{repeating_form_${x}_form_target}" value="device">
            <option data-i18n="device" value="Device" selected="selected">device</option>
            <option data-i18n="file" value="File">file</option>
            <option data-i18n="host" value="Host">host</option>
            <option data-i18n="ic" value="IC">ic</option>
            <option data-i18n="persona" value="Persona">persona</option>
            <option data-i18n="self" value="Self">self</option>
            <option data-i18n="sprite" value="Sprite">sprite</option>
          </select>
          <label data-i18n-title="duration" title="Duration">
            <input name="attr_form_duration" placeholder="Permanent" title="@{repeating_form_${x}_form_duration}" type="text"/>
          </label>
          <label data-i18n-title="fade" title="Fade">
            <input name="attr_form_fade" placeholder="+2" title="@{repeating_form_${x}_form_fade}" type="number"/>
          </label>
          <label data-i18n-title="notes" title="Notes">
            <input name="attr_form_note" placeholder="edit files" title="@{repeating_form_${x}_form_note}" type="text"/>
          </label>
        </div>
      </fieldset>
    </div>
    <div class="rows host repeating ic">
      <h1 data-i18n="intrusioncountermeasures">Intrusion Countermeasures</h1>
      <fieldset class="repeating_IC">
        <input name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <input name="attr_IC" type="hidden" value=""/>
        <button name="IC" type="roll" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=@{Intrusion Countermeasures}}}{{base=^{base}}}{{dice=[[((@{IC_attack})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}"><span name="attr_IC_name"></span></button><span name="attr_IC"></span>
        <div class="settings">
          <h2 data-i18n="name">Name</h2>
          <h2 data-i18n="ic limit">IC Limit</h2>
          <h2 data-i18n="defense attribute">Defense Attribute</h2>
          <h2 data-i18n="defense matrix attribute">Defense Matrix Attribute</h2>
          <label data-i18n-title="name" title="Name">
            <input name="attr_IC_name" placeholder="Black" title="@{repeating_IC_${x}_name}" type="text"/>
          </label>
          <select name="attr_IC_limit" title="@{repeating_IC_${x}_limit}" value="attack">
            <option data-i18n="attack" value="Attack" selected="selected">attack</option>
            <option data-i18n="data_processing" value="Data Processing">data_processing</option>
          </select>
          <select name="attr_IC_attribute" title="@{repeating_IC_${x}_attribute}" value="willpower">
            <option data-i18n="willpower" value="Willpower" selected="selected">willpower</option>
            <option data-i18n="intuition" value="Intuition">intuition</option>
            <option data-i18n="logic" value="Logic">logic</option>
          </select>
          <select name="attr_IC_matrix" title="@{repeating_IC_${x}_matrix}" value="firewall">
            <option data-i18n="attack" value="Attack">attack</option>
            <option data-i18n="sleaze" value="Sleaze">sleaze</option>
            <option data-i18n="data_processing" value="Data Processing">data_processing</option>
            <option data-i18n="firewall" value="Firewall" selected="selected">firewall</option>
          </select>
          <label data-i18n-title="notes" title="Notes">
            <input name="attr_IC_note" placeholder="deploy the ic" title="@{repeating_IC_${x}_note}" type="text"/>
          </label>
        </div>
      </fieldset>
    </div>
  </div>
  <input name="attr_flag_matrix" type="hidden" value=""/>
  <div class="matrix body matrix-device">
    <div class="rows">
      <h1 data-i18n="matrixdevice">Matrix Device</h1>
      <label data-i18n-title="device" title="device">
        <input name="attr_device_name" placeholder="Sony CIY-720" type="text"/>
      </label>
      <button data-i18n="devicerating" name="device rating" value="@{gm_toggle} &{template:rolls}{{mod=[[@{modifiers_toggle}]]}}{{wound=[[@{wounds_toggle}]]}}{{edge=[[@{edge_toggle}]]}}{{header=Matrix Resistance}}{{base=^{base}}}{{dice=[[((@{device_rating}+@{firewall})+@{wounds_toggle}+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}" type="roll">Device Rating</button>
      <label class="round" data-i18n-title="devicerating" title="devicerating">
        <input name="attr_device_rating" placeholder="4" type="number" value=""/>
      </label>
    </div>
    <div class="rows">
      <button data-i18n="attack" name="Attack" value="&{template:rolls}{{header=^{attack}}}{{base=^{base}}}{{dice=[[(@{attack}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" type="roll">Attack</button>
      <div class="matrix-bubble matrixAttack">
        <input name="attr_attack" value="1" type="radio"/><span></span>
        <input name="attr_attack" value="2" type="radio"/><span></span>
        <input name="attr_attack" value="3" type="radio"/><span></span>
        <input name="attr_attack" value="4" type="radio"/><span></span>
        <input name="attr_attack" value="5" type="radio"/><span></span>
        <input name="attr_attack" value="6" type="radio"/><span></span>
        <input name="attr_attack" value="7" type="radio"/><span></span>
        <input name="attr_attack" value="8" type="radio"/><span></span>
        <input name="attr_attack" value="9" type="radio"/><span></span>
        <input name="attr_attack" value="10" type="radio"/><span></span>
        <input name="attr_attack" value="11" type="radio"/><span></span>
        <input name="attr_attack" value="12" type="radio"/><span></span>
        <input name="attr_attack" value="13" type="radio"/><span></span>
        <input name="attr_attack" value="14" type="radio"/><span></span>
        <input name="attr_attack" value="15" type="radio"/><span></span>
        <input name="attr_attack" value="16" type="radio"/><span></span>
        <input name="attr_attack" value="17" type="radio"/><span></span>
        <input name="attr_attack" value="18" type="radio"/><span></span>
        <input name="attr_attack" value="19" type="radio"/><span></span>
        <input name="attr_attack" value="20" type="radio"/><span></span>
      </div>
      <label class="round" data-i18n-title="attack" title="attack">
        <input name="attr_attack" placeholder="4" type="number" value=""/>
      </label>
    </div>
    <div class="rows">
      <button data-i18n="sleaze" name="Sleaze" value="&{template:rolls}{{header=^{sleaze}}}{{base=^{base}}}{{dice=[[(@{sleaze}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" type="roll">Sleaze</button>
      <div class="matrix-bubble matrixSleaze">
        <input name="attr_sleaze" value="1" type="radio"/><span></span>
        <input name="attr_sleaze" value="2" type="radio"/><span></span>
        <input name="attr_sleaze" value="3" type="radio"/><span></span>
        <input name="attr_sleaze" value="4" type="radio"/><span></span>
        <input name="attr_sleaze" value="5" type="radio"/><span></span>
        <input name="attr_sleaze" value="6" type="radio"/><span></span>
        <input name="attr_sleaze" value="7" type="radio"/><span></span>
        <input name="attr_sleaze" value="8" type="radio"/><span></span>
        <input name="attr_sleaze" value="9" type="radio"/><span></span>
        <input name="attr_sleaze" value="10" type="radio"/><span></span>
        <input name="attr_sleaze" value="11" type="radio"/><span></span>
        <input name="attr_sleaze" value="12" type="radio"/><span></span>
        <input name="attr_sleaze" value="13" type="radio"/><span></span>
        <input name="attr_sleaze" value="14" type="radio"/><span></span>
        <input name="attr_sleaze" value="15" type="radio"/><span></span>
        <input name="attr_sleaze" value="16" type="radio"/><span></span>
        <input name="attr_sleaze" value="17" type="radio"/><span></span>
        <input name="attr_sleaze" value="18" type="radio"/><span></span>
        <input name="attr_sleaze" value="19" type="radio"/><span></span>
        <input name="attr_sleaze" value="20" type="radio"/><span></span>
      </div>
      <label class="round" data-i18n-title="sleaze" title="sleaze">
        <input name="attr_sleaze" placeholder="4" type="number" value=""/>
      </label>
    </div>
    <div class="rows">
      <button data-i18n="data_processing" name="Data Processing" value="&{template:rolls}{{header=^{data_processing}}}{{base=^{base}}}{{dice=[[(@{data_processing}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" type="roll">Data Processing</button>
      <div class="matrix-bubble matrixData">
        <input name="attr_data_processing" value="1" type="radio"/><span></span>
        <input name="attr_data_processing" value="2" type="radio"/><span></span>
        <input name="attr_data_processing" value="3" type="radio"/><span></span>
        <input name="attr_data_processing" value="4" type="radio"/><span></span>
        <input name="attr_data_processing" value="5" type="radio"/><span></span>
        <input name="attr_data_processing" value="6" type="radio"/><span></span>
        <input name="attr_data_processing" value="7" type="radio"/><span></span>
        <input name="attr_data_processing" value="8" type="radio"/><span></span>
        <input name="attr_data_processing" value="9" type="radio"/><span></span>
        <input name="attr_data_processing" value="10" type="radio"/><span></span>
        <input name="attr_data_processing" value="11" type="radio"/><span></span>
        <input name="attr_data_processing" value="12" type="radio"/><span></span>
        <input name="attr_data_processing" value="13" type="radio"/><span></span>
        <input name="attr_data_processing" value="14" type="radio"/><span></span>
        <input name="attr_data_processing" value="15" type="radio"/><span></span>
        <input name="attr_data_processing" value="16" type="radio"/><span></span>
        <input name="attr_data_processing" value="17" type="radio"/><span></span>
        <input name="attr_data_processing" value="18" type="radio"/><span></span>
        <input name="attr_data_processing" value="19" type="radio"/><span></span>
        <input name="attr_data_processing" value="20" type="radio"/><span></span>
      </div>
      <label class="round" data-i18n-title="data_processing" title="data_processing">
        <input name="attr_data_processing" placeholder="4" type="number" value=""/>
      </label>
    </div>
    <div class="rows">
      <button data-i18n="firewall" name="Firewall" value="&{template:rolls}{{header=^{firewall}}}{{base=^{base}}}{{dice=[[(@{firewall}+(?{Attribute|Willpower,@{willpower}|Logic,@{logic}|Intuition,@{intuition}})+@{modifiers_toggle}+@{edge_toggle})d6>5@{explode_toggle}]]}}{{mod=[[@{modifiers_toggle}]]}}{{edge=[[@{edge_toggle}]]}}" type="roll">Firewall</button>
      <div class="matrix-bubble matrixFirewall">
        <input name="attr_firewall" value="1" type="radio"/><span></span>
        <input name="attr_firewall" value="2" type="radio"/><span></span>
        <input name="attr_firewall" value="3" type="radio"/><span></span>
        <input name="attr_firewall" value="4" type="radio"/><span></span>
        <input name="attr_firewall" value="5" type="radio"/><span></span>
        <input name="attr_firewall" value="6" type="radio"/><span></span>
        <input name="attr_firewall" value="7" type="radio"/><span></span>
        <input name="attr_firewall" value="8" type="radio"/><span></span>
        <input name="attr_firewall" value="9" type="radio"/><span></span>
        <input name="attr_firewall" value="10" type="radio"/><span></span>
        <input name="attr_firewall" value="11" type="radio"/><span></span>
        <input name="attr_firewall" value="12" type="radio"/><span></span>
        <input name="attr_firewall" value="13" type="radio"/><span></span>
        <input name="attr_firewall" value="14" type="radio"/><span></span>
        <input name="attr_firewall" value="15" type="radio"/><span></span>
        <input name="attr_firewall" value="16" type="radio"/><span></span>
        <input name="attr_firewall" value="17" type="radio"/><span></span>
        <input name="attr_firewall" value="18" type="radio"/><span></span>
        <input name="attr_firewall" value="19" type="radio"/><span></span>
        <input name="attr_firewall" value="20" type="radio"/><span></span>
      </div>
      <label class="round" data-i18n-title="firewall" title="firewall">
        <input name="attr_firewall" placeholder="4" type="number" value=""/>
      </label>
    </div>
    <div class="rows repeating">
      <h1 data-i18n="programs">Programs</h1>
      <fieldset class="repeating_programs">
        <input class="toggle" name="attr_flag" title="Settings toggle" type="checkbox" checked="checked"/><span class="pictos">x</span>
        <input class="toggle" name="attr_program_on" type="checkbox" checked="checked"/><span class="pictos">Q</span>
        <button name="program" type="roll" value="@{gm_toggle} &amp;{template:rolls}{{header=@{program}}}{{desc=@{program_note}}}"><span name="attr_program"></span></button><span name="attr_program_note"></span>
        <div class="settings">
          <h2 data-i18n="name">name</h2>
          <label data-i18n-title="name" title="name">
            <input name="attr_program" placeholder="Program Name" title="@{repeating_programs_${x}_program}" type="text" value=""/>
          </label>
          <h2 data-i18n="notes">notes</h2>
          <label data-i18n-title="notes" title="notes">
            <textarea name="attr_program_note" placeholder="Program Description" title="@{repeating_programs_${x}_program_note}" type="text" value=""></textarea>
          </label>
        </div>
      </fieldset>
    </div>
  </div>
</div><div class="footer">
	<div>
		<span data-i18n="copyrightfooter">The Topps Company, Inc. has sole ownership of the names, logo, artwork, marks, photographs, sounds, audio, video and/or any proprietary material used in connection with the game Shadowrun. The Topps Company, Inc. has granted permission to use such names, logos, artwork, marks and/or any proprietary materials for promotional and informational purposes on its website but does not endorse, and is not affiliated with any official capacity whatsoever.
		</span>
		<span>Version </span><span name="attr_version"></span>
	</div>
	<img src="https://raw.githubusercontent.com/clevett/SheetTemplate/master/images/EProd_Emerald_Gloss.png" />
</div><div class="rolltemplates">
	<!--Roll Template for rolling without Focus-->
    <rolltemplate class="sheet-rolltemplate-rolls">
    	<div class="sheet-template-body">
	    	<div class="sheet-template-header">
	    		{{#header}}{{header}}{{/header}}{{#spec}}<span> ({{spec}})</span>{{/spec}}<br />
	    		{{#arm}}<span>{{arm}}</span>{{/arm}}
	    		{{#base}}<span>{{base}}</span>{{/base}}
	    		{{#rollLess() wound 0}}<span> ♦ </span><span data-i18n="wounds">Wounds</span>{{/rollLess() wound 0}}
	    		{{#rollLess() mod 0}}<span> ♦ </span><span data-i18n="modifier">Modifier</span>{{/rollLess() mod 0}}
	    		{{#rollGreater() mod 0}}<span> ♦ </span><span data-i18n="modifier">Modifier</span>{{/rollGreater() mod 0}}
	    		{{#rollGreater() edge 0}}<span> ♦ </span><span data-i18n="edge">Edge</span>{{/rollGreater() edge 0}}
	    	</div>
	    		{{#dice}}<div class="sheet-template-row">{{dice}}</div>{{/dice}}
	    		{{#desc}}
	    			<div class="sheet-template-row">
	    				<span class="sheet-template-desc">
		    				{{desc}}
		    				{{#rollGreater() rea 0}}, <span data-i18n="reach">Reach<span> {{rea}}{{/rollGreater() rea 0}}
		    				{{#rollGreater() drain 1}}, <span data-i18n="drain">Drain</span> {{drain}}{{/rollGreater() drain 1}}
		    				{{#rollLess() drain 2}}, <span data-i18n="drain-2">Drain 2<span>{{/rollLess() drain 2}}
	    				</span>
	    			</div>
	    		{{/desc}}
	    		{{#opp}}<div class="sheet-template-row">{{opp}}</div>{{/opp}}
	    </div>
    </rolltemplate>
</div>
<input type="hidden" name="attr_wounds" value="0" />
<input type="hidden" name="attr_explode_toggle" value="" />
<input type="hidden" name="attr_attribute_roll" value="" />

<input type="hidden" name="attr_armor_name" value="select a Primary in Arms" />
<input type="hidden" name="attr_soak" min="0" value="3" />
<input type="hidden" name="attr_armor" min="0" value="3" />
<input type="hidden" name="attr_acid_protection" min="0" value="3" />
<input type="hidden" name="attr_cold_protection" min="0" value="3" />
<input type="hidden" name="attr_electrical_protection" min="0" value="3" />
<input type="hidden" name="attr_fire_protection" min="0" value="3" />
<input type="hidden" name="attr_radiation_protection" min="0" value="3" />

<input type="hidden" name="attr_primary_range_weapon" value="select a Primary in Arms" />
<input type="hidden" name="attr_primary_range_weapon_skill" />
<input type="hidden" name="attr_primary_range_weapon_damage" />
<input type="hidden" name="attr_primary_range_weapon_dicepool" />
<input type="hidden" name="attr_primary_range_weapon_acc" />
<input type="hidden" name="attr_primary_range_weapon_ap" />
<input type="hidden" name="attr_primary_range_weapon_mode" />
<input type="hidden" name="attr_primary_range_weapon_recoil" />
<input type="hidden" name="attr_primary_range_weapon_ammo" />
<input type="hidden" name="attr_shots_fired" value="1" />

<input type="hidden" name="attr_primary_melee_weapon" value="select a Primary in Arms" />
<input type="hidden" name="attr_primary_melee_weapon_skill" />
<input type="hidden" name="attr_primary_melee_weapon_damage" />
<input type="hidden" name="attr_primary_melee_weapon_dicepool" />
<input type="hidden" name="attr_primary_melee_weapon_acc" />
<input type="hidden" name="attr_primary_melee_weapon_ap" />
<input type="hidden" name="attr_primary_melee_weapon_reach" />

<input type="hidden" name="attr_physical_limit" value="4" />
<input type="hidden" name="attr_mental_limit"s value="4" />
<input type="hidden" name="attr_social_limit" value="5" />
<input type="hidden" name="attr_initiative_mod" value="6" />
<input type="hidden" name="attr_initiative_dice" min="1" max="5" value="1" />
<input type="hidden" name="attr_astral_mod" value="6" />
<input type="hidden" name="attr_astral_dice" max="5" value="3" />
<input type="hidden" name="attr_matrix_mod" value="0" />
<input type="hidden" name="attr_matrix_dice" max="5" />
<input type="hidden" name="attr_walk" value="12" />
<input type="hidden" name="attr_run" value="24" />
<input type="hidden" name="attr_physical" value="10" />
<input type="hidden" name="attr_stun" value="10" />
<input type="hidden" name="attr_physical_max" min="0" value="10" />
<input type="hidden" name="attr_stun_max" min="0" value="10" />
<input type="hidden" name="attr_matrix" value="10" />
<input type="hidden" name="attr_matrix_max" min="8" value="10" />
<input type="hidden" name="attr_defense" value="6" />

<input type="hidden" name="attr_acting" min="0" value="0" />
<input type="hidden" name="attr_aeronauticsmechanic" min="0" value="0" />
<input type="hidden" name="attr_alchemy" min="0" value="0" />
<input type="hidden" name="attr_animalhandling" min="0" value="0" />
<input type="hidden" name="attr_arcana" min="0" value="0" />
<input type="hidden" name="attr_archery" min="0" value="0" />
<input type="hidden" name="attr_armorer" min="0" value="0" />
<input type="hidden" name="attr_artificing" min="0" value="0" />
<input type="hidden" name="attr_artisan" min="0" value="0" />
<input type="hidden" name="attr_assensing" min="0" value="0" />
<input type="hidden" name="attr_astralcombat" min="0" value="0" />
<input type="hidden" name="attr_athletics" min="0" value="0" />
<input type="hidden" name="attr_automatics" min="0" min="0" value="0" />
<input type="hidden" name="attr_automotivemechanic" min="0" value="0" />
<input type="hidden" name="attr_banishing" min="0" value="0" />
<input type="hidden" name="attr_binding" min="0" value="0" />
<input type="hidden" name="attr_biotech" min="0" value="0" />
<input type="hidden" name="attr_biotechnology" min="0" value="0" />
<input type="hidden" name="attr_blades" min="0" value="0" />
<input type="hidden" name="attr_chemistry" min="0" value="0" />
<input type="hidden" name="attr_closecombat" min="0" value="0" />
<input type="hidden" name="attr_clubs" min="0" value="0" />
<input type="hidden" name="attr_compiling" min="0" value="0" />
<input type="hidden" name="attr_computer" min="0" value="0" />
<input type="hidden" name="attr_con" min="0" value="0" />
<input type="hidden" name="attr_conjuring" min="0" value="0" />
<input type="hidden" name="attr_counterspelling" min="0" value="0" />
<input type="hidden" name="attr_cracking" min="0" value="0" />
<input type="hidden" name="attr_cybercombat" min="0" value="0" />
<input type="hidden" name="attr_cybertechnology" min="0" value="0" />
<input type="hidden" name="attr_decompiling" min="0" value="0" />
<input type="hidden" name="attr_demolitions" min="0" value="0" />
<input type="hidden" name="attr_disenchanting" min="0" value="0" />
<input type="hidden" name="attr_disguise" min="0" value="0" />
<input type="hidden" name="attr_diving" min="0" value="0" />
<input type="hidden" name="attr_electronics" min="0" value="0" />
<input type="hidden" name="attr_electronicwarfare" min="0" value="0" />
<input type="hidden" name="attr_enchanting" min="0" value="0" />
<input type="hidden" name="attr_engineering" min="0" value="0" />
<input type="hidden" name="attr_escapeartist" min="0" value="0" />
<input type="hidden" name="attr_etiquette" min="0" value="0" />
<input type="hidden" name="attr_exoticmelee" min="0" value="0" />
<input type="hidden" name="attr_exoticrange" min="0" value="0" />
<input type="hidden" name="attr_firearms" min="0" value="0" />
<input type="hidden" name="attr_firstaid" min="0" value="0" />
<input type="hidden" name="attr_flight" min="0" value="0" />
<input type="hidden" name="attr_forgery" min="0" value="0" />
<input type="hidden" name="attr_freefall" min="0" value="0" />
<input type="hidden" name="attr_gunnery" min="0" value="0" />
<input type="hidden" name="attr_gymnastics" min="0" value="0" />
<input type="hidden" name="attr_hacking" min="0" value="0" />
<input type="hidden" name="attr_hardware" min="0" value="0" />
<input type="hidden" name="attr_heavyweapons" min="0" value="0" />
<input type="hidden" name="attr_impersonation" min="0" value="0" />
<input type="hidden" name="attr_industrialmechanic" min="0" value="0" />
<input type="hidden" name="attr_influence" min="0" value="0" />
<input type="hidden" name="attr_instruction" min="0" value="0" />
<input type="hidden" name="attr_intimidation" min="0" value="0" />
<input type="hidden" name="attr_leadership" min="0" value="0" />
<input type="hidden" name="attr_locksmith" min="0" value="0" />
<input type="hidden" name="attr_longarms" min="0" value="0" />
<input type="hidden" name="attr_medicine" min="0" value="0" />
<input type="hidden" name="attr_nauticalmechanic" min="0" value="0" />
<input type="hidden" name="attr_navigation" min="0" value="0" />
<input type="hidden" name="attr_negotiation" min="0" value="0" />
<input type="hidden" name="attr_outdoors" min="0" value="0" />
<input type="hidden" name="attr_palming" min="0" value="0" />
<input type="hidden" name="attr_perception" min="0" value="0" />
<input type="hidden" name="attr_performance" min="0" value="0" />
<input type="hidden" name="attr_pilotaerospace" min="0" value="0" />
<input type="hidden" name="attr_pilotaircraft" min="0" value="0" />
<input type="hidden" name="attr_pilotexoticvehicle" min="0" value="0" />
<input type="hidden" name="attr_pilotgroundcraft" min="0" value="0" />
<input type="hidden" name="attr_pilotwalker" min="0" value="0" />
<input type="hidden" name="attr_pilotwatercraft" min="0" value="0" />
<input type="hidden" name="attr_pistols" min="0" value="0" />
<input type="hidden" name="attr_registering" min="0" value="0" />
<input type="hidden" name="attr_ritualspellcasting" min="0" value="0" />
<input type="hidden" name="attr_running" min="0" value="0" />
<input type="hidden" name="attr_sneaking" min="0" value="0" />
<input type="hidden" name="attr_software" min="0" value="0" />
<input type="hidden" name="attr_sorcery" min="0" value="0" />
<input type="hidden" name="attr_spellcasting" min="0" value="0" />
<input type="hidden" name="attr_stealth" min="0" value="0" />
<input type="hidden" name="attr_summoning" min="0" value="0" />
<input type="hidden" name="attr_survival" min="0" value="0" />
<input type="hidden" name="attr_swimming" min="0" value="0" />
<input type="hidden" name="attr_tasking" min="0" value="0" />
<input type="hidden" name="attr_throwingweapons" min="0" value="0" />
<input type="hidden" name="attr_tracking" min="0" value="0" />
<input type="hidden" name="attr_unarmedcombat" min="0" value="0" /><script type="text/worker">

//Sheet open versioning
	on("sheet:opened", function() {
		getAttrs(["version"], (v) => { versioning(parseFloat(v.version) || 1); });

		let translations = [];
		let attributes = ["attribute", "body", "agility", "reaction", "strength", "willpower", "logic", "intuition", "charisma", "edge", "none"];
		attributes.forEach((attribute) => {
			translations.push(getTranslationByKey(attribute));
		});

		let attribute_roll = `?{${translations[0]}`;
	    for (i = 1; i <= (attributes.length - 2); i += 1) {
	    	attribute_roll +=  `|${translations[i]},@{${attributes[i]}}`;
	    };
	    attribute_roll += `|${translations[10]},0}`; //For None

	    setAttrs({
	    	attribute_roll: attribute_roll
	    });
	});			

    const versioning = (version) => {
    	console.log(`%c Shadowrun 5th Edition versioning, ${version}`, "color: blue; font-weight:bold");
       if (version >= 1.41) {
			console.log(`%c Shadowrun 5th Edition is update to date`, "color: red; font-weight:bold");
       	} else if (version >= 1.4) {
       		const toggles = [`wound_toggle`, `edge_toggle`, `modifier_toggle`];
			getAttrs(toggles, (v) => {
				let set = {};
				toggles.forEach(attr => {
					const name = attr.split("_")[0], value = v[`${attr}`].toString();
					(value != "0" || !value.includes(name)) ? set[`${attr}`] = 0 : false;
				});
				setAttrs(set);
			});
       		setAttrs({version: 1.41}, () => {versioning(1.41)});
        } else if (version >= 1.35) {
        	getAttrs(["sheet_type"], (v) => {
        		let update = {};
        		(v.sheet_type === "goon") ? update["sheet_type"] = "grunt" : false;
        		setAttrs(update);
        	});
            setAttrs({version: 1.36}, () => {versioning(1.4)});
        } else {
			setAttrs({version: 1.35}, () => {versioning(1.35)});
		};
    };

    on("clicked:shots_remove clicked:shots_add", (eventinfo) => {
    	getAttrs([`shots_fired`], (v) => {
    		let shots = parseInt(v[`shots_fired`]) || 0;
    		const trigger = eventinfo.triggerName;
			setAttrs({
				shots_fired: (shots > 0 && trigger.includes("remove")) ? shots -= 1 : trigger.includes("add") ? shots += 1 : shots
			});
		});
	});

    on("clicked:primary_ammo", (eventinfo) => {
    	getAttrs([`primary_range_weapon_ammo`, `shots_fired`], (v) => {
			let ammo  = parseInt(v[`primary_range_weapon_ammo`]) || 0;
			const shots = parseInt(v[`shots_fired`]) || 0;
			setAttrs({
				primary_range_weapon_ammo: ammo -= shots
			});
		});
	});

   on("clicked:reload", (eventinfo) => {
    	getAttrs([`primary_range_weapon_ammo_max`], (v) => {
			const reload  = parseInt(v[`primary_range_weapon_ammo_max`]) || 0;
			setAttrs({
				primary_range_weapon_ammo: reload
			});
		});
	});

	["active", "knowledge", "language"].forEach((attr) => {
		on(`clicked:repeating_${attr}:skill`, (eventinfo) => {
			settingsToggle(eventinfo);
		}); 
	});

	["quality", "martial", "items", "range", "melee", "armor", "spell", "preps", "ritual", "powers", "forms", "vehicle", "augementations", "lifestyle", "contacts", "programs"].forEach((attr) => {
		on(`clicked:repeating_${attr}:${attr}`, (eventinfo) => {
			settingsToggle(eventinfo);
		}); 
	});

	const settingsToggle = (eventinfo) => {
		const split = eventinfo.sourceAttribute.split("_");
		const source = `${split[0]}_${split[1]}_${split[2]}`;
		getAttrs([`${source}_flag`], (v) => {
			setAttrs({
				[`${source}_flag`]: (v[`${source}_flag`] === "settings") ? "display" : "settings"
			});
		});
	};

   [`core`, `arms`, `augs`, `gear`, `magic`, `matrix`, `social`, `vehicle`, `options`].forEach(attr => {
   		on(`clicked:tab_${attr}`, () => {
   			setAttrs({tab: attr});
   		});
   });

	//Watch for Updates and Run the needed functions
		on("change:agility change:walk_modifier change:run_modifier", () => {
			update_movement();
		});

		on("change:body change:strength change:lift_carry_modifier", (eventinfo) => {
			const source = eventinfo.sourceAttribute;
			update_common_rolls(["body", "strength", "lift_carry_modifier"]);
			//STRENGTH & BODY RUN THIS
			(source.includes("strength") || source.includes("body")) ? update_limit("physical") : false;
			//ONLY RUN ON BODY CHANGE
			if (source.includes("body")) {
				update_common_rolls(["body", "overflow_modifier"]);
				update_common_rolls(["body", "armor_rating", "soak_modifier", "soak_temp", `soak_temp_flag`]);
				update_track("physical");
			};
		});

		on("change:reaction change:intuition", (eventinfo) => {
			const source = eventinfo.sourceAttribute;
			update_common_rolls(["reaction", "intuition", "defense_modifier", "defense_temp", `defense_temp_flag`]);
			update_initiative();
			//REACTION UPDATES PHYSICAL, INTUITION UPDATES MENTAL
			(source.includes("reaction")) ? update_limit("physical") : update_limit("mental");
			//ONLY RUN ON INTUITION CHANGE
			(source.includes("intuition")) ? update_common_rolls(["charisma", "intuition", "judge_intentions_modifier"]) : false;
		});

		on("change:willpower", () => {
			update_common_rolls(["charisma", "willpower", "composure_modifier"]);
			update_common_rolls(["logic", "willpower", "memory_modifier"]);
			update_track("stun");
			update_limit("social");
			update_limit("mental");
		});

		on("change:logic change:memory_modifier", (eventinfo) => {
			const source = eventinfo.sourceAttribute;
			update_common_rolls(["logic", "willpower", "memory_modifier"]);
			//LOGIC UPDATES LIMIT
			(source.includes("logic")) ? update_limit("mental") : false;
		});

		on("change:charisma change:composure_modifier change:judge_intentions_modifier", (eventinfo) => {
			const source = eventinfo.sourceAttribute;
			//CHARISMA & COMPOSURE UPDATE COMPOSURE
			(source.includes("charisma") || source.includes("composure")) ? update_common_rolls(["charisma", "willpower", "composure_modifier"]) : false;
			//CHARISMA & JUDGE INTENTIONS UPDATE JUDGE INTENTIONS
			(source.includes("charisma") || source.includes("judge")) ? update_common_rolls(["charisma", "intuition", "judge_intentions_modifier"]) : false;
			//ONLY CHARISMA UPDATES SOCIAL LIMIT
			(source.includes("charisma")) ? update_limit("social") : false;
		});

		on("change:essence", () => {
			update_limit("social");
		});

		on("change:physical_modifier change:flag_drone", () => {
			update_track("physical");
		});

		on("change:stun_modifier", () => {
			 update_track("stun");
		});

		on("change:initiative_modifier change:initiative_temp change:initiative_temp_flag", () => {
			update_initiative();
		});

		on("change:defense_modifier change:defense_temp change:defense_temp_flag", () => {
			update_common_rolls(["reaction", "intuition", "defense_modifier", "defense_temp", `defense_temp_flag`]);
		});

		on("change:armor_rating change:soak_modifier change:soak_temp change:soak_temp_flag", () => {
			update_common_rolls(["body", "armor_rating", "soak_modifier", "soak_temp", `soak_temp_flag`]);
		});

		on("change:mental_limit_modifier change:mental_limit_temp change:mental_limit_temp_flag change:physical_limit_modifier change:physical_limit_temp change:physical_limit_temp_flag change:social_limit_modifier change:social_limit_temp change:social_limit_temp_flag",  (eventinfo) => {
			const type = eventinfo.sourceAttribute.split("_")[0]; update_limit(type);
		});

		on("change:pain_tolerance", () => {
			update_wounds();
		});

	//Calculate ATTRIBUTES
	   ['body', 'agility', 'reaction', 'strength', 'willpower', 'logic', 'intuition','charisma','magic', 'resonance',
	    ].forEach(attr => {
	        // Attach listener
	        on(`change:${attr}_base change:${attr}_modifier change:${attr}_temp change:${attr}_temp_flag`, () => {
	            // Load attribute values
	            getAttrs([`${attr}_base`, `${attr}_modifier`, `${attr}_temp`, `${attr}_temp_flag`], (v) => {
	                // Do some math to calculate the total
		            const bas = parseInt(v[`${attr}_base`]) || 0;
		            const mod = parseInt(v[`${attr}_modifier`]) || 0;
	              	const tem = (v[`${attr}_temp_flag`] === "on") ? parseInt(v[`${attr}_temp`]) || 0 : 0;
	                const bon = mod + tem;
	                const stat = bas + bon;

	                // Update the finalized total
	                setAttrs({
	                    [attr]: stat,
	                    [`display_${attr}`]: bon === 0 ? bas : `${bas} (${stat})`
	                });
	            });
	        });
	    });

	//Calculaute limts
		const update_limit = (type)  => {
			let attrs = [`${type}_limit_modifier`, `${type}_limit_temp`, `${type}_limit_temp_flag`];

			if (type === "mental") {
				attrs.push("intuition", "willpower", "logic");
			} else if (type === "physical") {
				attrs.push("body", "reaction", "strength");
			} else {
				attrs.push("essence", "willpower", "charisma");
			};

			getAttrs(attrs, (v) => {
				const attr1 = attrs[3], attr2 = attrs[4], attr3 = attrs[5];
				const stat1 = (attr1 === "essence") ? Math.ceil(v[`${attr1}`]) || 0 : parseInt(v[`${attr1}`]) || 0; //Essence, Intuition, Body
				const stat2 = parseInt(v[`${attr2}`]) || 0; //Willpower, Reaction
				const stat3 = parseInt(v[`${attr3}`]) || 0; //Logic, Strenght, Charisma

				const mod = parseInt(v[`${type}_limit_modifier`]) || 0;
				const tem = (v[`${type}_limit_temp_flag`] === "on") ? parseInt(v[`${type}_limit_temp`]) || 0 : 0;

				const tot = ((stat1 + stat2 + (stat3 * 2))/3);
				const update = Math.ceil(tot) + (mod + tem);

				setAttrs({[`${type}_limit`]: update});
			})
		};

	//This function checks changes to repeating_armor and updates the Primary Armor if needed
	on("change:repeating_armor", (eventInfo) => {
		const source = eventInfo.sourceAttribute;
		const newV   = eventInfo.newValue;
		const arm    = ["repeating_armor"];
		const armors = [`${arm}_name`, `${arm}_rating`, `${arm}_acid_modifier`, `${arm}_electrical_modifier`, `${arm}_cold_modifier`,`${arm}_fire_modifier`, `${arm}_radiation_modifier`, `${arm}_dicepool_modifier`];

		//Check if the event was related to the primary flag & armor is set to primary
		if (source.includes('primary') && newV === 'primary') {
			//Get attributes from the repeating_armor
			getAttrs(armors, (v) => {
				let update = {};
				//Update the hidden static Primary Armor attributes with the repeating_armor attributes
				_.each(armors, (armor) => {
					const name = (armor.includes("name") || armor.includes("rating")) ? armor.split("repeating_")[1] : armor.split(`${arm}_`)[1];
					update[`${name}`] = v[`${armor}`];
            	});

            	setAttrs(update);
            });

			//Set the other repeating_armor primary flags to 0 aka unchecked
            getSectionIDs(`${arm}`, function(ids) {
				let IDs    = [];
				let update = {};

		        for(var i=0; i < ids.length; i++) {
		            IDs.push(`${arm}_` + ids[i] + "_primary");
	        	};

	        	IDs.forEach(id => {
	        		if (id != source) {
	        			update[`${id}`] = 0;
	        		};
	        	});

	        	setAttrs(update);
	        });
		//Check if the event was for a relevant Primary Armor attribute
		} else if (source.includes('name') || source.includes('rating') || source.includes('dicepool') || source.includes('acid') || source.includes('cold') || source.includes('electrical') || source.includes('fire') || source.includes('radiation')) {
			//Get the primary flag attribute for this armor. Also get the repeating_armor attribute we'll need for an update, doing it now is more efficient.
			getAttrs([`${arm}_primary`, `${source}`], (v) => {
				//Check if this armor is the designated Primary Armor.
				if (v[`${arm}_primary`] === 'primary') {
					let update = {};
					//Apply the repeating_armor attribute to its static counterpart
					switch (true) {
						case /name/.test(source)      : update["armor_name"] = v[`${source}`]; break;
						case /rating/.test(source)    : update["armor_rating"] = v[`${source}`]; break;
						case /dicepool/.test(source)  : update["soak_modifier"] = v[`${source}`]; break;
						case /acid/.test(source)      : update["acid_modifier"] = v[`${source}`]; break;
						case /cold/.test(source)      : update["cold_modifier"] = v[`${source}`]; break;
						case /electrical/.test(source): update["electrical_modifier"] = v[`${source}`]; break;
						case /fire/.test(source)      : update["fire_modifier"] = v[`${source}`]; break;
						case /radiation/.test(source) : update["radiation_modifier"] = v[`${source}`]; break;
						default: console.log(`Source  ${source} was invalid`);}

					setAttrs(update);
				};
			});
		} else {
			console.log("CHANGE NOT RELEVENT Primary Armor");
		};
	});

	// COMMON ROLLS: MEOMORY, JUDGE INTETIONS, COMPOSURE, LIFT & CARRY, OVERFLOW, DEFENSE, & SOAK ROLLS
	const update_common_rolls = (attrs) => {
		getAttrs(attrs, (v) => {
			const found = attrs.find((mod) => { return mod.includes("_modifier") });
			const name  = found.split("_modifier")[0];
			let numbers = [];

			//DEFENSE & SOAK HAVE TWO EXTRA ATTRIBUTES. TEMP IS NEEDED BUT ONLY IF THE FLAG IS CHECKED IN SETTINGS
			const array = (name === "defense" || name === "soak") ? (v[`${name}_temp_flag`] === "on") ? attrs.splice(0, 4) : attrs.splice(0, 3) : attrs;

			_.each(array, (attr) => { numbers.push(parseInt(v[`${attr}`]) || 0); });
        	const add   = (a, b) => a + b, sum = numbers.reduce(add);

			setAttrs({[`${name}`]: sum});
		});
	};

	//Calculate Movement Rates
		var update_movement = () => {
			getAttrs(["agility", "walk_modifier", "run_modifier"], (v) => {
				const agi = parseInt(v.agility) || 0, wmod = parseInt(v.walk_modifier) || 0, rmod = parseInt(v.run_modifier) || 0;
				let update = {};
				update["walk"] = (agi * 2) + wmod;
				update["run"] = (agi * 4) + rmod;
				setAttrs(update);
			});
		};

	//Update condition tracks
		const update_track = (track) => {
			let attrs = [`${track}_modifier`, `${track}_damage`];
			(track === "stun") ? attrs.push("willpower") : attrs.push("body", "sheet_type", "flag_drone");

			getAttrs(attrs, (v) =>{
				const attr1 = attrs[2], stat1 = parseInt(v[`${attr1}`]) || 0; //Willpower or Body
				const mod = parseInt(v[`${track}_modifier`]) || 0;
				const dam = parseInt(v[`${track}_damage`]) || 0;
				let update = {};

				if (track === "stun" || v["sheet_type"] === "pc" || v["sheet_type"] === "grunt") {
					tot = Math.ceil(stat1/2) + 8 + mod;
				} else if (v["sheet_type"] === "vehicle" && v["flag_drone"]  === "drone") {
					tot = (Math.ceil(stat1/2) + 6 + mod);
				} else if (v["sheet_type"] === "vehicle") {
					tot = (Math.ceil(stat1/2) + 12 + mod);
				} else {
					tot = 0; //Sprites don't have Stun or Physical track
				};

				const current = (dam != 0) ? tot - dam : tot;

				update[`${track}`] = current;
				update[`${track}_max`] = tot;

				setAttrs(update, {silent:true});
			});
		};

	//Calculate Device Rating Track
		on("change:device_rating change:matrix_modifier", () => {
			getAttrs(["device_rating","matrix_modifier","matrix"], (v) =>{
				const dev = parseInt(v.device_rating) || 0, mod = parseInt(v.matrix_modifier) || 0;
				const dam = parseInt(v.matrix) || 0;
				const tot = Math.ceil(dev/2) + 8 + mod;
				const current = (dam > 0) ? dam : tot;

				setAttrs({matrix: current});
				setAttrs({matrix_max: tot});
			});
		});

	//Convert physical into the physical damage track boxes and reverse
		['physical', 'stun'].forEach(attr => {
			on(`change:${attr} change:${attr}_damage`, (eventinfo) => {
				getAttrs([`${attr}`, `${attr}_damage`, `${attr}_max`], (v) => {
					const stat = parseInt(v[`${attr}`]) || 0, dam = parseInt(v[`${attr}_damage`]) || 0, max = parseInt(v[`${attr}_max`]) || 0, source = eventinfo.sourceAttribute;
					const wou = (source === `${attr}`) ? max - stat : max - dam;

					if (source === `${attr}`) {
						(dam === wou) ? false : ((stat < max && dam != wou) ? setAttrs({[`${attr}_damage`]: wou}, {silent: true}) : setAttrs({[`${attr}_damage`]: 0}, {silent: true}));
					} else {
						(stat === wou) ? false : setAttrs({[`${attr}`]: wou}, {silent: true});
					};

					update_wounds();
				});
			});
		});

	const update_wounds = () => {
		getAttrs(["stun_damage", "physical_damage", "pain_tolerance"], (v) => {
			const stu = parseInt(v.stun_damage) || 0, phy = parseInt(v.physical_damage) || 0, pai = parseInt(v.pain_tolerance) || 0;
			lowP = (pai < 0) ? 2 : 3;
			highPhy = (pai > 0) ? phy - pai : phy;
			highStu = (pai > 0) ? stu - pai : stu;
			pMod = (phy > 0) ? (Math.floor(highPhy/lowP)) : 0;
			sMod = (stu > 0) ? (Math.floor(highStu/lowP)) : 0;
			wou = Math.floor(-(pMod) + -(sMod));
			
			setAttrs({wounds: wou});
		});
	};

	//Calculate Initiatves
		var update_initiative = () => {
			getAttrs(["reaction", "intuition", "initiative_modifier", "initiative_temp", "initiative_temp_flag"], (v) => {
				const rea = parseInt(v.reaction) || 0;
				const int = parseInt(v.intuition) || 0;
				const mod = parseInt(v.initiative_modifier) || 0;
				const tem = (v.initiative_temp_flag === "on") ? parseInt(v.initiative_temp) || 0 : 0;
				const bas = rea + int;
				const tot = rea + int + mod + tem;
				let update = {};
				update["initiative_mod"] = tot;
				update["display_initiative_mod"] = (mod != 0) ? `${bas} (${tot})` : bas;
				setAttrs(update);
			});
		};

		on("change:initiative_dice_modifier change:edge_toggle change:initiative_dice_temp change:initiative_dice_temp_flag", () => {
			getAttrs(["initiative_dice_modifier", "edge_toggle", "initiative_dice_temp", "initiative_dice_temp_flag"], (v) =>{
				const mod = parseInt(v.initiative_dice_modifier) || 0;
				const tem = (v.initiative_dice_temp_flag === "on") ? parseInt(v.initiative_dice_temp) || 0 : 0;
				const bas = mod + tem;
				const tot = Math.min(bas+1,5);
				edg = (v.edge_toggle == 0) ? tot : 5;

				setAttrs({initiative_dice: edg});
			});
		});

		//Calculate Astral Initiatve
		on("change:intuition change:astral_mod_modifier", () => {
			getAttrs(["intuition", "astral_mod_modifier"], (v) => {
				const int = parseInt(v.intuition) || 0;
				const mod = parseInt(v.astral_mod_modifier) || 0;
				const bas = int * 2;
				const tot = (int * 2) + mod;
				let update = {};

				update["astral_mod"] = tot;
				update["display_astral_mod"] = (mod != 0) ? `${bas} (${tot})` : bas;

				setAttrs(update);
			});
		});

		on("change:astral_dice_modifier change:edge_toggle", () => {
			getAttrs(["astral_dice_modifier", "edge_toggle"], (v) =>{
				var mod = parseInt(v.astral_dice_modifier) || 0;
				var tot = Math.min(mod+3,5);
				edg = (v.edge_toggle == 0) ? tot : 5;

				setAttrs({astral_dice: edg});
			});
		});

	//Calculate Matrix Initiatve.
		on("change:host_rating change:data_processing change:pilot change:intuition change:matrix_mod_modifier change:level change:matrix_dice_modifier change:edge_toggle", () => {
			getAttrs(["sheet_type", "data_processing", "pilot", "intuition", "matrix_mod_modifier", "host_rating", "level", "matrix_dice_modifier", "edge_toggle"], (v) => {
				const dat = parseInt(v.data_processing) || 0;
				const pil = parseInt(v.pilot) || 0;
				const int = parseInt(v.intuition) || 0;
				const mat = parseInt(v.matrix_mod_modifier) || 0;
				const hos = parseInt(v.host_rating) || 0;
				const lev = parseInt(v.level) || 0;
				const dic = parseInt(v.matrix_dice_modifier) || 0;
				let update = {};

				dice = 	(v.sheet_type === "grunt" && v.edge_toggle == 0) ? 4 + dic : 
						((v.sheet_type === "grunt" && v.edge_toggle != 0) ? 5 :
						4);

				tot = (v.sheet_type === "vehicle") ? dat + pil :
					  (v.sheet_type === "host") ? dat + hos :
					  (v.sheet_type === "sprite") ? dat + lev + mat :
					  dat + int + mat;

				bas = (v.sheet_type === "sprite") ? dat + lev : dat + int ;

				update["matrix_mod"] = tot;
				update["matrix_dice"] = dice;

				update["display_matrix_mod"] = (mat != 0) ? `${bas} (${tot})` : tot;

				setAttrs(update);
			});
		});

	//Edge toggle to include ! for exploding dice
		on("change:edge_toggle", () => {
			getAttrs(["edge_toggle"], (v) =>{
				edg = (v.edge_toggle != 0) ? "!" : "";

				setAttrs({explode_toggle: edg});
			});
		});

	//Calculate Reset Condition Track
		on("clicked:cond_reset", () => {
			getAttrs(["sheet_type","physical_max","stun_max", "matrix_max"], (v) => {
				var phy = parseInt(v.physical_max) || 0;
				var stun = parseInt(v.stun_max) || 0;
				var mat = parseInt(v.matrix_max) || 0;
				let update = {};

				if (v.sheet_type === "grunt" || v.sheet_type === "pc") {
					update["physical"] = phy;
					update["stun"] = stun;
				} else if (v.sheet_type === "sprite") {
					update["matrix"] = mat;
				} else if (v.sheet_type === "vehicle") {
					update["physical"] = phy;
					update["matrix"] = mat;
				} else {
					return "Not a grunt or vehicle";
				};

				setAttrs(update);
			});
		});	

	on("clicked:cond_reset_physical clicked:cond_reset_stun", (eventinfo) => {
		const attr = eventinfo.triggerName.split("_")[2];
		setAttrs({
			[`${attr}_damage`] : 0
		});
	});

	//Weapon displays set into an Array
		// Builder function to display details properly
		// Note that since undefined are falsey if there's no label or sign we can leave the parameters blank
		function repeatingStringBuilder(v, keyBase) {
		    return function(key, label, sign) {
		        // fetch the attr from v checking if it has a value
		        const val = v[`${keyBase}${key}`];
		        if (!val) return '';

		        // Apply the sign if needed
		        const disp = sign && val > 0 ? `+${val}` : val;

		        // Apply label if needed
		        return label ? `${label} ${disp}` : disp;
		    }
		}

	on("change:repeating_weapon", () => {
	    getAttrs(["repeating_weapon_weapon_range", "repeating_weapon_weapon_melee", "repeating_weapon_weapon_type", "repeating_weapon_weapon_reach", "repeating_weapon_weapon_acc", "repeating_weapon_weapon_dv", "repeating_weapon_weapon_ap", "repeating_weapon_weapon_mode", "repeating_weapon_weapon_rc", "repeating_weapon_weapon_ammo", "repeating_weapon_weapon_note"], (v) => {
	        // Local builder putting the needed variables into scope for repeatingStringBuilder
	        const b = repeatingStringBuilder(v, 'repeating_weapon_weapon_');
	        // Determine fields to display and in their proper order and formatting
	        // Anonymous function is purely stylistic and adds more overhead than just a simple switch/case.  Personally I find the function looks cleaner and hides any internal scope that might conflict with outside
	        const display = (() => {
	            // 0 for weapon_range is a ranged weapon. A 1 is a melee weapon.
	            switch(v.repeating_weapon_weapon_range) {
	                case '0':
	                // Not a fan of how ammo has to be handled.  Could potentially be placed in the repeatingStringBuilder if used more often for other change:repeating functions as some sort of suffix parameter
	                const ammo = b('amm');
	                return [
	                    b('type'),
	                    b('acc', 'ACC'),
	                    b('dv', 'DV'),
	                    b('ap', 'AP', true),
	                    b('mode'),
	                    b('rc', 'RC'),
	                    ammo ? `${ammo} (c)` : '',
	                    b('note')
	                ];
	                case '1': return [
	                    b('type'),
	                    b('reach', 'Reach', true),
	                    b('acc', 'ACC'),
	                    b('dv', 'DV'),
	                    b('ap', 'AP', true),
	                    b('note')
	                ];
	                default: return [
	                    b('type'),
	                    b('acc', 'ACC'),
	                    b('dv', 'DV'),
	                    b('ap', 'AP', true),
	                    b('note')
	                ];
	            }
	        })()
	            // Remove all empty strings
	            .filter(s => s)
	            // Concat all the strings and add comma between
	            .join(', ');

	        // Finally wrap square brackets around the weapon display
	        setAttrs({repeating_weapon_weapon: `[${display}]`});
	    });
	});

	//Spell displays set into an Array
		on("change:repeating_NPCspell", () => {
		    getAttrs(["repeating_NPCspell_combat_type", "repeating_NPCspell_type", "repeating_NPCspell_range", "repeating_NPCspell_damage", "repeating_NPCspell_duration", "repeating_NPCspell_drain", "repeating_NPCspell_note"], (v) =>{
		        const com = v.repeating_NPCspell_combat_type;
		        const typ = `Type ${v.repeating_NPCspell_type}, `;
				const ran = `${v.repeating_NPCspell_range}, `;
				const dam = `Damage ${v.repeating_NPCspell_damage}, `;
				const dur = `Duration ${v.repeating_NPCspell_duration}, `;
				const not = `, ${v.repeating_NPCspell_note}`;
				const dra = v.repeating_NPCspell_drain;

				const drain = (dra > 0) ? `F+${dra} ` : (dra < 0) ? `F${dra} ` :"F ";
				const info = `[${typ}${ran}${dam}${dur}${drain}${not}]`;

				display = (com === "Direct, Force ") ? ` (Direct) ${info}` : 
					(com === "Indirect, Force ?{Force|}, AP -") ? ` (Indirect) ${info}` : `${info}`;
		        setAttrs({repeating_NPCspell_spell: display});
		    });
		});

	//Complex Form displays  set into an Array
		on("change:repeating_form", () => {
		    getAttrs(["repeating_form_form_duration", "repeating_form_form_target", "repeating_form_form_fade", "repeating_form_form_note", ], (v) =>{
		    	const tar = `Target ${v.repeating_form_form_target}, `;
				const dur = `Duration ${v.repeating_form_form_duration}, `;
				const not = `, ${v.repeating_form_form_note}` || '';
				const fad = (v.repeating_form_form_fade > 0) ? `L+${v.repeating_form_form_fade}` : 
							(v.repeating_form_form_fade < 0) ? `L${v.repeating_form_form_fade}` : "L";

		        setAttrs({
		        	repeating_form_form: ` [${tar}${dur}${fad}${not}]`
		        });
		    });
		});

	//IC displays are set into an Array
		on("change:repeating_IC", () => {
		    getAttrs(["attack", "data_processing", "repeating_IC_IC_limit", "repeating_IC_IC_attribute", "repeating_IC_IC_matrix", "repeating_IC_IC_note"], (v) =>{
		    	const att = parseInt(v.attack) || 0;
		    	const data = parseInt(v.data_processing) || 0;
				const attr = v.repeating_IC_IC_attribute;
				const mat = v.repeating_IC_IC_matrix;
				const not = v.repeating_IC_IC_note;

		        setAttrs({
		        	repeating_IC_IC: (v.repeating_IC_IC_limit === "@{data_processing}") ? ` ([${data}] vs. ${attr} + ${mat}, ${not})` : `([${att}] vs. ${attr} + ${mat}, ${not})`
		        });
		    });
		});

	//IC  Attack Dice & Condition Track
		on("change:host_rating", () => {
			getAttrs(["host_rating"], (v) => {
				var hos = parseInt(v.host_rating) || 0;
				var tot = 8 + Math.ceil(hos/2);
				var atk = Math.min(hos + hos);

				setAttrs({matrix: tot});
				setAttrs({ic_attack: atk});
			});
		});

	//Sprite Condition Track
		on("change:level", () => {
			getAttrs(["level"], (v) => {
				var lev = parseInt(v.level) || 0;
				var tot = 8 + Math.ceil(lev/2);

				setAttrs({matrix: tot});
			});
		});

	//REFACTORED Skills
	  	['repeating_active','repeating_knowledge','repeating_language'].forEach(field => {
	        on(`change:${field}`, (eventinfo) => { 
				const source = eventinfo.sourceAttribute;
				const type   = eventinfo.sourceType;

	        	if (source.includes("rating")) {
	        		getAttrs([`${field}_rating`, `${field}_rating_modifier`], (v) => {
	        			const bas = parseInt(v[`${field}_rating`]) || 0;
						const mod = parseInt(v[`${field}_rating_modifier`]) || 0;
						const tot = bas + mod;
	                    setAttrs({
	                        [`${field}_dicepool`]: tot,
	                        [`${field}_display_rating`]: (mod === 0) ? bas : `${bas} (${tot})`
	                    });
	        		});
	        	} else if (source.includes("attribute") && type === "player") {
	        		getAttrs([`${source}`], (v) => {
						const attribute   = v[`${source}`].slice(2, -1);
						const translation = getTranslationByKey(`${attribute}`);
	        			setAttrs({
	                       [`${field}_display_attribute`]: translation
	                    });
	        		});
	        	} else if (source.includes("limit") && type === "player") {
	        		const limit = eventinfo.newValue.slice(2, -1);
	        		if (eventinfo.newValue === "none") {
	        			setAttrs({
		                   [`${field}_display_limit`]: ""
		                });
	        		} else {
						const translation = getTranslationByKey(`${limit}`);
	        			setAttrs({
	                       [`${field}_display_limit`]: `${translation} ${eventinfo.newValue}`
	                    });
	        		}
	        	} else if (source.includes("specialization") && type === "player")  {	
	        		getAttrs([`${source}`], (v) => {
						const bas   = v[`${source}`];
						const size  = bas.length;
						let display = (size > 0 && size <= 20) ? `(${bas})` : (size > 20 ) ? "(" + bas.slice(0, 20) + "...)" : " ";
	        			setAttrs({
	                       [`${field}_display_specialization`]: display
	                    });
	        		});
	        	} else if (source.includes("skill")) {
	                getAttrs([`${source}`], (v) => {
						const bas   = v[`${source}`];
						const size  = bas.length;
						let display = (size > 0 && size <= 20) ? bas : (size > 20 ) ? bas.slice(0, 20) + "..." : " ";
	                    setAttrs({
	                       [`${field}_display`]: display
	                    });
	                });
	            } else if (source.includes("dicepool")) {
	                getAttrs([`${source}`, `${field}_skill`], (v) => {
						const skill     = v[`${field}_skill`];
						let lowercase   = skill.toLowerCase();
						let removeGroup = (lowercase.includes("group")) ? lowercase.slice(0, -6) : lowercase;
						let skillSet    = (removeGroup.includes(" ")) ? removeGroup.replace(/ /g,"") : removeGroup;
	                    setAttrs({
	                       [`${skillSet}`]: v[`${source}`]
	                    });
	                });
	        	}  else  {
	        		console.log(`Change to ${field} did not set attr`);
	        	};
	        });
	    }); 


	   	//Setting the Default attribute name for default skill
		on("change:default_attribute", (eventinfo) => {
			getAttrs(["default_display"], (v) => {
				const display   = (v.default_display);
				let update      = {};

				//This sets a hidden input with the Attribute name so the roll template can use it to indicate what attribute was rolled
				const attribute   = eventinfo.newValue.slice(2, -1);
				const translation = getTranslationByKey(`${attribute}`);
				if (translation != display) {
					setAttrs({
						default_display: translation
					});
				};
			});
		});

	//REFACTORED Range & MELEE UPDATES
	   ['repeating_range','repeating_melee'].forEach(weap => {
	        on(`change:${weap}`, (eventInfo) => {
				const source = eventInfo.sourceAttribute;
				const newV   = eventInfo.newValue;
				const type   = weap.slice(-5);

	            //Setting this here for now to ensure dicepool attribute gets updated. Remove in a future update
	        	getAttrs([`${weap}_dicepool_modifier`, `${weap}_spec`], (v) => {
	        		const mod = parseInt(v[`${weap}_dicepool_modifier`]) || 0;
					const spec = parseInt(v[`${weap}_spec`]) || 0;
					const tot = mod + spec;

					setAttrs({[`${weap}_dicepool`]: tot});
	        	});

	            if (source.includes('primary')) {
	                if (newV === 'primary') {
	                	//Shared attributes names. 
	                	let array = ["dicepool", "weapon", "damage", "acc", "ap", "skill"];
	                	//Add the range or melee specific ones
	                	(type === "range") ? array.push("ammo", "ammo_max", "mode", "recoil") : array.push("reach");
	                	//Add the repeating section to the begining of each attribute
	                	let attrs = [];
				        for(var i=0; i < array.length; i++) {
				            attrs.push(`${weap}_` + array[i]);
			        	};

		                getAttrs(attrs, (v) => {
		                	let update = {};
		                	//Primary weapon name does not follow the naming scheme.
		                	update[`primary_${type}_weapon`] = v[`${weap}_weapon`];

		                	_.each(array, (value) => {
		                		if (value != undefined || value != "weapon") {
		                			update[`primary_${type}_weapon_${value}`] = (value === "ammo_max") ? v[`${weap}_ammo`] : v[`${weap}_${value}`];
		                		};
		                	});

		                	setAttrs(update);
		                });

						//Set the other repeating_weapon primary flags to 0 aka unchecked
			            getSectionIDs(`${weap}`, function(ids) {
					        let IDs = [];
					        let update = {};

					        for(var i=0; i < ids.length; i++) {
					            IDs.push(`${weap}_` + ids[i] + "_primary");
				        	};

				        	IDs.forEach(id => {
				        		if (id != source) {
				        			update[`${id}`] = 0;
				        		};
				        	});

				        	setAttrs(update);
				        });
		            };
	           	} else if (source.includes('dicepool') || source.includes('weapon') || source.includes('damage') || source.includes('acc') || source.includes('ap') || source.includes('skill') || source.includes('reach') || source.includes('ammo') || source.includes('mode') || source.includes('recoil')) {
					getAttrs([`${weap}_primary`, `${source}`], (v) => {
						if (v[`${weap}_primary`] === 'primary') {
							let update = {};
							//This whole process needs refactored in the future. Its working for now.
							if (source.includes('ammo')) {
								update[`primary_${type}_weapon_ammo`]     = v[`${source}`];
								update[`primary_${type}_weapon_ammo_max`] = v[`${source}`];
							} else {
								console.log(eventinfo);
							};

							setAttrs(update);
						};
					});
	            } else {
	                 console.log("Change was not relevant.");
	            };
	        });
	    });

	//PC SPELLS/PREPS/RITUALS
	  	['repeating_spell','repeating_preps','repeating_ritual'].forEach(field => {
	        // Attach listener
	        on(`change:${field}`, (eventInfo) => {
	        	const source = eventInfo.sourceAttribute;
	        	if (source.includes("dicepool") || source.includes("specialization")) {
	        		getAttrs([`${field}_spec`, `${field}_dicepool_modifier`], (v) => {
	        			const spec = parseInt(v[`${field}_spec`]) || 0;
						const mod = parseInt(v[`${field}_dicepool_modifier`]) || 0;
						const tot = spec + mod;

	                    setAttrs({
	                        [`${field}_dicepool`]: tot
	                    });
	        		});
	        	}  else  {
	        		console.log(`Change to ${field} did not set attr`);
	        	};
	        });
	    });

	//Repeating contacts for PC sheet
		on("change:repeating_contacts", () => {
			getAttrs(["repeating_contacts_name"], (v) => {
				const name = (v.repeating_contacts_name);

				((name).length > 0 && (name).length <= 30) ? setAttrs({repeating_contacts_display: (name)}) : 
					((name).length > 30) ? setAttrs({repeating_contacts_display: (name).slice(0, 30) + "..."}) :
					setAttrs({repeating_contacts_display: " "});
			});
		});


	//Cyberdeck Calculations
	 	['attack', 'sleaze', 'data_processing', 'firewall'].forEach(attr => {
	        on(`change:${attr}_base change:${attr}_modifier change:${attr}_temp`, () => {
	            update_common_rolls([`${attr}_base`, `${attr}_modifier`, `${attr}_temp`]);
	        });
	    });

	   ['acceleration', 'armor', 'body', 'data_processing', 'handling', 'pilot', 'sensor','speed'].forEach(attr => {
	        // Attach listener
	        on(`change:repeating_vehicle:${attr}_base change:repeating_vehicle:${attr}_modifier change:repeating_vehicle:${attr}_temp`, () => {
	            // Load attribute values
	            getAttrs([`repeating_vehicle_${attr}_base`, `repeating_vehicle_${attr}_modifier`, `repeating_vehicle_${attr}_temp`], (v) => {
	                // Do some math to calculate the total
	                const bas = parseInt(v[`repeating_vehicle_${attr}_base`]) || 0;
	                const mod = parseInt(v[`repeating_vehicle_${attr}_modifier`]) || 0;
	                const tem = parseInt(v[`repeating_vehicle_${attr}_temp`]) || 0;
	                const bon = mod + tem;
	                const stat = bas + bon;

	                // Update the finalized total
	                setAttrs({
	                    [attr]: stat,
	                    [`repeating_vehicle_display_${attr}`]: bon === 0 ? bas : `${bas} (${stat})`
	                }, {silent: true});
	            });
	        });
	    });


// CHARACTERMANCER IMPORTER
	on("clicked:import_launch", (eventinfo) => {
		startCharactermancer("importer");
	});

	on("page:importer", () => {
		setAttrs({builder: "Chummer"});
		setCharmancerText({
			"directions" : chummerDirections
		});
	});

	on("clicked:import", () => {
		const mancerData = getCharmancerData();
		const mancerValues = mancerData["importer"].values;
		let applyEnabled = true;
	    let setText = {};

	    // Verify the user entered a JSON in the textarea. If not, provide user feedabck.
	    if (mancerValues.jsonData) {
	    	const parsedData = JSON.parse(mancerValues.jsonData) || false;
	    	setText[`import-feedback`] = "";
	    	// There is a value in the textarea! Check to see if its a valid JSON. Provide users feeadback 
	    	if (parsedData) {
	    		setText[`import-feedback`] += `<p class="feedback">A valid JSON was imported for ${mancerValues.builder}.</p>`
		      // Send the parsed data to the selected importer or let users know something went wrong 
		      if (mancerValues.builder && mancerValues.builder === "Chummer") {
				if (parsedData.characters && parsedData.characters.character) {
					importChummer(parsedData.characters.character);
		      	} else {
					setText[`import-feedback`] += `<p class="warning">Parsed JSON is missing character data.</p>`;
					applyEnabled = false
		      	}
		      } else if (mancerValues.builder && mancerValues.builder === "Hero Lab") {
		      	importHeroLab();
		      	setText[`import-feedback`] += `<p class="warning">Coming Soon....</p>`;
		      } else {
		      	setText[`import-feedback`] += `<p class="warning">A character builder was not selected. Try changing your selection then change it back if needed.</p>`;
		      	applyEnabled = false
		      }
		    } else {
		      setText[`import-feedback`] += `<p class="warning"><span>The text imported is not a valid JSON. Verify the JSON is formatted correctly. Check the format at,</span> JSONLint.com.</p>`;
		      applyEnabled = false
		    };
	    } else {
	    	 setText[`import-feedback`] = `<p class="warning">No information was entered in the JSON text area.</p>`;
	    	 applyEnabled = false
	    };

	    let buttonStatus = (applyEnabled) ? "" : "disabled";
	    setText[`finish-button`] = `<button class="finish" type="finish" value="apply" data-i18n="apply" ${buttonStatus}>Apply</button>`;

	    setCharmancerText(setText);
	});

	const chummerDirections = `<ol>
				<li>In Chummer mark your character as created</li>
				<li>Go to File -> Export -> Export JSON</li>
				<li>Copy the JSON in the file</li>
				<li>Paste it into the textfield below</li>
				<li>Click the Import button</li>
				<li>Review the data. Use the checkbox <strong>Show Hidden Inputs</strong> to fix data.</li> 
				<li>Click Apply to <u>overwrite</u> information on the character sheet</li>
			</ol>`;

	const herolabDirections = `
		<ol>
			<li>Download the file "HLtoRoll20Export.hl" from: https://drive.google.com/file/d/0B3E3jkp51s8aRmpTU1NMRjRIVkk/view</li>
			<li>Double click the file. Hero Lab will import it automatically now.</li>
			<li>Load a character</li>
			<li>Go to File/Save Custom Output and select the "Roll20 Export"</li>
			<li>Save the file. It should open automatically in your browser</li>
			<li>Follow the directions.</li>
		</ol>`;

	on("change:builder", (eventinfo) => {
		let setText = {};
		setText[`directions`] = (eventinfo.newValue === "Chummer") ? chummerDirections : herolabDirections;
		setCharmancerText(setText);
	});

  const clean = () => {
    ['active', 'knowledge', 'language', 'quality', 'martial',
      'range', 'melee', 'weapon', 'armor', 'augementations',
      'items', 'NPCspell', 'spell', 'rituals', 'preps', 'powers',
      'contacts', 'vehicle', 'lifestyle', "programs", "forms"].forEach(group => {
      getSectionIDs(`repeating_${group}`, (ids) => {
        ids.forEach((id) => {
          removeRepeatingRow(`repeating_${group}_${id}`);
        });
      });
    });
  };

	//USEFUL FUNCTIONS
	const capitialize = (string) => {
		return string.charAt(0).toUpperCase() + string.slice(1);
	};

	const addFeedback = (attribute, value) => {
		return `<p class="feedback"><strong>${capitialize(attribute)}:</strong> ${value} </p>`
	};

	const alphabatizeKeys = (unsortedJSON) => {
		let alphabeticalKeys = {};
		Object.keys(unsortedJSON).sort().forEach((key) => {
			  alphabeticalKeys[key] = unsortedJSON[key];
		});
		return alphabeticalKeys
	};

	const getValInParen = (value) => {
		return value.split("(")[1].split(")")[0];
	};

	const getArray = (array) => {
		return Array.isArray(array) ? array : [ array ];
	};

	const getSplitNum = (value) => {
		return value.split("/")[0];
	}

	//IMPORTERS
	const importHeroLab = (character) => {
		console.log(`%c HERO LAB IMPORTER:`, "color: purple; font-weight:bold");
	};

	const importChummer = (character) => {
		//Match Chummer JSON keys with their sheet attribute. 
		//Chummer name is on the left, Roll20 sheet atribute on right.
		const jsonKeys = {
			"name": "name"
			,"adept": "flag_special"
			,"age" : "age"
			,"alias": "character_name"
			,"armor": "armor"
			,"calculatednotoriety": "notoriety"
			,"calculatedpublicawareness": "public_awareness"
			,"calculatedstreetcred": "street_cred"
			,"cmoverflow": "overflow"
			,"composure" : "composure"
			,"height": "height"
			,"initdice": "initiative_dice"
			,"initvalue": "initiative_mod"
			,"judgeintentions" : "judge_intentions"
			,"karma": "karma" 
			,"liftandcarry": "lift_carry"
			,"limitmental": "mental_limit"
			,"limitphysical": "physical_limit"
			,"limitsocial": "social_limit"
			,"magician": "flag_special"
			,"memory": "memory"
			,"nuyen":"primary_nuyen"
			,"physicalcm": "physical_max"
			//,"physicalcmfilled": "physical_damage" //RESULTING IN INFINATE LOOP
			,"playername": "player_name"
			,"sex": "sex"
			,"stuncm": "stun_max"
			//,"stuncmfilled": "stun_damage"
			,"technomancer": "flag_special"
			,"totaless": "essence"
			,"totalkarma": "total_karma"
			,"weight": "weight"
			,"indirectdefenseresist": "defense"
		};

		const attributeKeys = {
			"BOD": "body"
			,"AGI": "agility"
			,"REA": "reaction"
			,"STR": "strength"
			,"CHA": "charisma"
			,"INT": "intuition"
			,"LOG": "logic"
			,"WIL": "willpower"
			,"EDG": "edge"
			,"MAG": "magic"
			,"RES": "resonance"
		};

		const processChummer = new Promise((resolve, reject) => {
			console.log(`%c CHUMMER IMPORTER`, "color: purple; font-weight:bold");
			const sortedKeys = alphabatizeKeys(jsonKeys);
			let setText = {
				"error": "",
				"results": "",
				"ignored": ""
			};
			let update = {};

			//MATRIX
			const setCyberdeck = (cyberdeck) => {
				update["cyberdeck"]     = cyberdeck.name;
				update["device_rating"] = cyberdeck.devicerating;
				update["attribute_1"]   = cyberdeck.attack;
				update["attribute_2"]   = cyberdeck.sleaze;
				update["attribute_3"]   = cyberdeck.dataprocessing;
				update["attribute_4"]   = cyberdeck.firewall;
				update["matrix_con"]   = 0;
			}

			// PROCESS TOP LEVEL KEYS
			Object.keys(sortedKeys).forEach((key) => {
				try {
					const charSheetAttr = jsonKeys[key];
					const chummerValue = character[key];
					if ((key === "adept" || key === "magician" || key === "technomancer")) {
			            if (chummerValue.toUpperCase() === "TRUE") {
			              update[`${charSheetAttr}`] = (key === "technomancer") ? "resonance" : "magic";
			            } else if (!update.hasOwnProperty(`${charSheetAttr}`)) { // if we don't have the property set already otherwise keys get overriden
			              update[`${charSheetAttr}`] = "mundane";
			            };
					} else if (key === "totaless") {
						const essence = chummerValue.includes(",") ? chummerValue.replace(",", ".") : chummerValue;
						update[`${charSheetAttr}`] = parseFloat(essence) || 6;
					} else if (chummerValue && chummerValue != null) {
						update[`${charSheetAttr}`] = chummerValue;
					} else {
						setText["error"] += addFeedback(charSheetAttr, chummerValue);
					};

					const textUpdate = (update[`${charSheetAttr}`]) ? "results" : "ignored";
					const feedbackText = addFeedback(jsonKeys[key].replace("_"," "), update[`${charSheetAttr}`]);
					(setText[`results`].includes(feedbackText) || setText[`ignored`].includes(feedbackText)) ? false : setText[`${textUpdate}`] += feedbackText;
				} catch (error) {
					setText["error"] += addFeedback(JSON.stringify(key), error);
				};
			});

			// PROCESS METATYPE
			try {
				update[`metatype`] = character.metatype;
				if (character.metavariant) {
					update[`metatype`] += ` (${character.metavariant})`
				}
			} catch (error) {
				setText["error"] += addFeedback(JSON.stringify(character.metatype), error);
			};

			// PROCESS ATTRIBUTES
			const attributes = character.attributes[1].attribute;
			let attributeTotals = { 
				"essence": update["essence"] 
			}; // USED FOR LIMITS BELOW
			attributes.forEach((object) => {
				try {
					const charSheetAttr = attributeKeys[object.name];
					if (charSheetAttr === "edge") {
						update[`${charSheetAttr}`] = object.base;
					} else {
						update[`${charSheetAttr}_base`] = object.base;
					    update[`${charSheetAttr}_modifier`] = object.total - object.base;
					};

					// USED FOR LIMITS BELOW
					attributeTotals[`${charSheetAttr}`] = parseInt(object.total) || 0;
				} catch (error) {
					setText["error"] += addFeedback(JSON.stringify(object), error);
				};
			});

			//PROCESS LIMITS
			const limitKeys = {
				"limitmental": "mental_limit"
				,"limitphysical": "physical_limit"
				,"limitsocial": "social_limit"
			};

			Object.keys(limitKeys).forEach((key) => {
				//CALCULATE THE BASE FOR LIMIT
				const limitCalculate = (attrsArray) => {
					return Math.ceil(((attrsArray[0] + attrsArray[1] + (attrsArray[2] * 2))/3))
				};

				try {
					let attrs = [];
					if (key === "limitmental") {
						attrs.push(attributeTotals["intuition"], attributeTotals["willpower"], attributeTotals["logic"]);
					} else if (key === "limitphysical") {
						attrs.push(attributeTotals["body"], attributeTotals["reaction"], attributeTotals["strength"]);
					} else {
						attrs.push(attributeTotals["essence"], attributeTotals["willpower"], attributeTotals["charisma"]);
					}; 

					//SET LIMIT MODIFIER EQUAL TO THE TOTAL IN CHUMMER - THE CALCULATED BASE LIMIT
					update[`${limitKeys[key]}_modifier`] = parseInt(character[key]) - limitCalculate(attrs);
				} catch (error) {
					setText["error"] += addFeedback(JSON.stringify(`${key}`), error);
				};
			}); 

			// LOOP THROUGHT QUALITIES
			if (character.qualities != null && character.qualities.quality != null) {
				const qualitiesList = getArray(character.qualities.quality);
				qualitiesList.forEach((quality) => {
					try {
						const id = generateRowID();
						update[`repeating_quality_${id}_flag`] = "display";
						update[`repeating_quality_${id}_quality`] = quality.name;
						update[`repeating_quality_${id}_type`] = (quality.qualitytype === "Positive") ? "P" : "N";
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(quality), error);
					};
				});
			}

			// LOOP THROUGH SKILLS & GENERATE REPEATING FIELDS
			if (character.skills != null && character.skills.skill != null) {
				const skillsList = getArray(character.skills.skill);
				skillsList.forEach((skill) => {
					try {
						const rating = parseInt(skill.rating) || 0;
						if (rating > 0) {
							const id = generateRowID();
							const type = 
								(skill.knowledge.toUpperCase() === "TRUE" && skill.islanguage.toUpperCase() === "TRUE") ? "language" : 
								(skill.knowledge.toUpperCase() === "TRUE") ? "knowledge" : 
								"active";
							const exotic = skill.exotic.toUpperCase();
							const section = `repeating_${type}_${id}`
							// Exotic Weapons need their name in Specialization

							update[`${section}_flag`] = "display";
							update[`${section}_skill`] = 
								(skill.name === "Exotic Melee Weapon") ? "Exotic Melee" : 
								(skill.name === "Exotic Ranged Weapon") ? "Exotic Range" : 
								skill.name;
							update[`${section}_display`] = 
								(skill.name === "Exotic Melee Weapon") ? "Exotic Melee" : 
								(skill.name === "Exotic Ranged Weapon") ? "Exotic Range" : 
								skill.name;
							update[`${section}_rating`] = skill.rating;
							update[`${section}_rating_modifier`] = skill.ratingmod;

              				const skilltotal = parseInt(skill.rating) + parseInt(skill.ratingmod);
							update[`${section}_dicepool`] = skilltotal;

							//ACTIVE SKILLS HAVE THEIR TOTAL SAVED IN A HIDDEN ATTRIBUTE
							if (type === "active") {
								update[skill.name.toLowerCase().replace(/ /g, "")] = skilltotal;
							};

							//This needs to be verified with multiple specializations
							if (skill.skillspecializations && skill.skillspecializations != null) {
								const chummerSpecialization = skill.skillspecializations.skillspecialization.name;
								const specialization = (chummerSpecialization.includes("[")) ? chummerSpecialization.slice(1, -1) : chummerSpecialization;
								update[`${section}_specialization`] = specialization;
							} else if (exotic === "TRUE") {
								update[`${section}_specialization`] = skill.spec;
							};

							//CREATE THE DISPLAYS FOR SKILLS
							if (update[`${section}_specialization`]) {
								update[`${section}_display_specialization`] = `(${update[`${section}_specialization`]})`;
							};

							//DISPLAY FOR RTG
							update[`${section}_display_rating`] = (skill.ratingmod != 0) ? `${skill.rating} (${skilltotal})` : `${skill.rating}`;

							const attribute = skill.attribute;
							update[`${section}_attribute`] = `@{${attributeKeys[attribute]}}`;
							update[`${section}_display_attribute`] = attributeKeys[attribute];

							update[`${section}_limit`] = 
								(attribute === "AGI" || attribute === "BOD" || attribute ===  "STR" || attribute ===  "REA") ? `@{physical_limit}` : 
								(attribute === "WIL" || attribute ===  "LOG" || attribute ===  "INT") ? `@{mental_limit}` : 
								(attribute === "CHA") ? `@{social_limit}` : "none";
						};
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(skill), error);
					};
				});
			}

			//MOVEMENT
			try {
				const movement = character.movementwalk.split(",")[0].split("/");
				update[`walk`] = movement[0];
				update[`run`] = movement[1];
			} catch (error) {
				setText["error"] += addFeedback("movement", error);
			};

			//MARTIAL ARTS
			if (character.martialarts != null && character.martialarts.martialart != null) {
				const martialartsList = getArray(character.martialarts.martialart);
				martialartsList.forEach((art) => {
					const techniqueList = getArray(art.martialarttechniques.martialarttechnique);
					techniqueList.forEach((tech) => {
						try {
							const id = generateRowID();
							update[`repeating_martial_${id}_flag`] = "display";
							update[`repeating_martial_${id}_technique`] = tech.name;
							update[`repeating_martial_${id}_style`] = art.name;
						} catch (error) {
							setText["error"] += addFeedback(JSON.stringify(art), error);
						};
					});
				});
			};

			//WEAPON KEYS
			const weaponKeys = {
				"name": "weapon"
				,"damage": "damage"
				,"ap": "ap"
				,"dicepool": "dicepool"
				,"skill": "skill"
				,"reach": "reach"
				,"rc": "recoil"
				,"mode": "mode_options"
				,"accuracy": "acc"
			};

			//WEAPONS
			if (character.weapons != null && character.weapons.weapon != null) {
				const weaponsList = getArray(character.weapons.weapon);
				weaponsList.forEach((weapon) => {
					try {
						const id = generateRowID();
				      	const section = (weapon.type.toUpperCase() === "MELEE") ? `repeating_melee_${id}` : `repeating_range_${id}`;
				      	const npcWeapon = `repeating_weapon_${id}`;

				      	const category = weapon.category.toUpperCase();
				      	Object.keys(weaponKeys).forEach((key) => {
				      		if (weapon[`${key}`] && weapon[`${key}`] != null) {
				      			update[`${section}_${weaponKeys[key]}`] = 
				      				(key != "damage" && weapon[`${key}`].includes("(")) ? getValInParen(weapon[`${key}`]) :
				      				(key === "skill") ? `@{${weapon[`${key}`].toLowerCase().replace(" ", "")}}` :
				      				weapon[`${key}`];
				      		} else if (key === "skill" && category.includes("EXOTIC")) {
				      			update[`${section}_skill`] = 0;
				      		};
						});

				      	//EXOTIC WEAPONS NEED SPECIAL HANDLING
				      	if (category.includes("EXOTIC")) {
				      		update[`${section}_dicepool_modifier`] = weapon.dicepool;
				      	};

						//RANGED WEAPONS NEED CLIP & RANGES
						if (weapon.type.toUpperCase() === "RANGED") {
					        if (weapon.clips != null && weapon.clips.clip != null) {
					          const clips = Array.isArray(weapon.clips.clip) ? weapon.clips.clip : [ weapon.clips.clip ];
					          update[`${section}_ammo`] = clips[0].count;
					        } else if (weapon.name.includes("Grenade")) {
					        	const gearsList = getArray(character.gears.gear);
					        	gearsList.forEach((gear) => {
					        		if (weapon.name === gear.name) {
					        			update[`${section}_ammo`] = gear.qty || 1;
					        		};
					        	});
					        } else if (weapon.ammo) {
					        	 update[`${section}_ammo`] = weapon.ammo;
					        };

					        //RANGE
							const rangeList = weapon.ranges;
							let range = "";
							Object.keys(rangeList).forEach((key) => {
								if (key != "name" && rangeList[key] != null) {
									const rangeNumber = rangeList[key].split("-")[1];
									range += (key === "short") ? `${rangeNumber}` : `/${rangeNumber}`;
								};
							});
							update[`${section}_range`] = range;
				      	};

				      	//ACCESSORIES
				      	if (weapon.accessories) {
					      	let accessories = "";
					      	const accessoriesList = getArray(weapon.accessories.accessory);
					      	accessoriesList.forEach((accessory) => {
					      		accessories += `${accessory["name"]}, `
					      	});

					      	update[`${section}_notes`] = accessories;
				      	};

				      	// TOGGLE THE SETTINGS OFF
				      	update[`${section}_flag`] =  "display";
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(weapon), error);
					};
				});
			}

			//ARMOR
			if (character.armors != null && character.armors.armor != null) {
				const armorsList = getArray(character.armors.armor);
				armorsList.forEach((armor) => {
					try {
						const id = generateRowID();
						if (armor.category != "Clothing") {
							const section = `repeating_armor_${id}`;
							let armorMods = "";
							let armorGear = "";

							// ARMOR NAME
							update[`${section}_name`] =  armor.name;

							// ARMOR sometimes has a bonus
							update[`${section}_rating`] = (armor.armor.includes("/+")) ? armor.armor.split("/+")[0] : armor.armor;

							// ARMOR MODS
							if (armor.armormods && armor.armormods != null) {
								const modsList = getArray(armor.armormods.armormod);
								modsList.forEach((modification) => {
									armorMods += `${modification.name}, `;

									if (modification.name === "Nonconductivity") {
										update[`${section}_electrical_modifier`] = modification.rating;
									} else if (modification.name === "Thermal Damping" || modification === "Insulation") {
										update[`${section}_cold_modifier`] = modification.rating;
									} else if (modification.name === "Radiation Shielding") {
										update[`${section}_radiation_modifier`] = modification.rating;
									} else if (modification.name === "Chemical Protection") {
										update[`${section}_acid_modifier`] = modification.rating;
									} else if (modification.name === "Fire Resistance") {
										update[`${section}_fire_modifier`] = modification.rating;
									};
								});
							};

							// ARMOR GEAR
							if (armor.gears && armor.gears != null) {
								const gearList = getArray(armor.gears.gear);
								gearList.forEach((gear) => {
									if (gear.children) {
										const childrenList = getArray(gear.children.gear);
										childrenList.forEach((child) => {
											armorGear += `${gear.name} (${child.name}), `;
										});
									} else {
										armorGear += `${gear.name}, `;
									};
								});
							};

							// HIDE SETTINGS
							update[`${section}_flag`] =  "display";

							update[`${section}_notes`] =  
								(armorMods && armorGear) ? `Modification: ${armorMods} Gear: ${armorGear}` :
								(armorMods) ? `Modification: ${armorMods}` :
								(armorGear) ? `Gear: ${armorGear}` : "";
						} else {
							// Chummer puts Clothing in with armor
							const section = `repeating_items_${id}`;
							update[`${section}_item`] =  armor.name;
							update[`${section}_flag`] =  "display";
						};
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(armor), error);
					}
				});
			}

			//AUGMENTATIONS
			if (character.cyberwares != null && character.cyberwares.cyberware != null) {
				const cyberwaresList = getArray(character.cyberwares.cyberware);
				cyberwaresList.forEach((ware) => {
					const id = generateRowID();
					try {
						const section = `repeating_augementations_${id}`;
						update[`${section}_flag`] = "display";
						update[`${section}_augmentation`] = ware.name;
						update[`${section}_rating`]       = ware.rating;
						update[`${section}_essence`]      = ware.ess;
						update[`${section}_notes`]        = `Grade: ${ware.grade}`;

						if (ware.gears != null && ware.gears.gear != null) {
							const wareGearList = getArray(ware.gears.gear);
							wareGearList.forEach((gear) => {
								if (gear.category.toLowerCase().includes("cyberdeck")) {
									setCyberdeck(gear);
								}
							});
						}
					} catch (error) {
					  setText["error"] += addFeedback(JSON.stringify(ware.name), error);
					}
				});
			};

			console.log(character);

			// GEAR
			if (character.gears != null && character.gears.gear != null) {
				const gearsList = getArray(character.gears.gear);
				gearsList.forEach((gear) => {
					const id = generateRowID();
					try {
						if (gear.name.toLowerCase() === "fake sin") {
							const section = `repeating_lifestyle_${id}`;
							update[`${section}_name`] = `${gear.extra} (rating ${gear.rating})`;
							update[`${section}_lifestyle`] = (gear.location != null) ? `${gear.location},` : "";
							update[`${section}_flag`] = "display";

							update[`${section}_licenses`] = "";
							if (gear.children && gear.children.gear != null) {
								const childrenList = getArray(gear.children.gear);
								childrenList.forEach((child) => {
									update[`${section}_licenses`] += `${child.extra} (rating ${child.rating}), `;
								});
							}
						} else if (gear.category.toLowerCase().includes("cyberdeck")) {
							setCyberdeck(gear);
						} else if (gear.category.toLowerCase().includes("programs")) {
							const section = `repeating_programs_${id}`;
							update[`${section}_program`] = gear.name;
							update[`${section}_flag`] = "display";
						} else {
							const section = `repeating_items_${id}`;
							let gearNotes = "";
							update[`${section}_item`] = gear.name;
							update[`${section}_flag`] = "display";
							update[`${section}_rating`] = (gear.rating >  0) ? gear.rating : "";

							//NAME
							update[`${section}_item`] += (gear.name.includes("Ammo:")) ? ` (${gear.extra}) ` : "";
							update[`${section}_item`] += (gear.qty > 1) ?` x${gear.qty}` : "";

							//NOTES
							gearNotes += (gear.location != null) ? `Location: ${gear.location},` : "";
							gearNotes += (gear.qty != null) ? ` Qty: ${gear.qty},` : "";
							gearNotes += (gear.extra != null) ? ` Extra: ${gear.extra},` : "";

							if (gear.children && gear.children != null) {
								const childrenList = getArray(gear.children.gear);
									childrenList.forEach((child) => {
										gearNotes += `${child.name}, `;
								});
							};

							update[`${section}_notes`] = gearNotes;
						}
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(gear.name), error);
					};
				});
			};

			//SPELL KEYS
			const spellKeys = {
				"category": "category"
				,"name": "name"
				,"range": "range"
			};

			// SPELLS
			if (character.spells != null && character.spells.spell != null) {
				const spellsList = getArray(character.spells.spell);
				spellsList.forEach((spell) => {
					try {
						const id = generateRowID();
						const type = (spell.alchemy.toUpperCase() === "TRUE") ? "preps" : "spell";
						const section = `repeating_${type}_${id}`;

						Object.keys(spellKeys).forEach((key) => {
				      		if (spell[`${key}`] && spell[`${key}`] != null) {
				      			update[`${section}_${spellKeys[key]}`] = spell[`${key}`];
				      		};
						});

						// FLAG
						update[`${section}_flag`] = "display";

						// TYPE
						update[`${section}_type`] = (spell.type === "P") ? "Physical" : "Mana";

						// DRAIN
						update[`${section}_drain`] = spell.dv.replace("F", "");

						// SET COMBAT TYPE
						if (spell.category.toUpperCase() === "COMBAT") {
							const combatType = spell.descriptors.toUpperCase();
							update[`${section}_combat_type`] = 
								(combatType.includes("DIRECT")) ? "Direct, Force " :
								(combatType.includes("INDIRECT")) ? "Indirect, Force ?{Force|}, AP -" :
								"Force ";
							update[`${section}_damage`] = spell.damage;
						}

						// DURATION
						const duration = spell.duration.toUpperCase();
						update[`${section}_duration`] = 
							(duration === "S") ? "Sustained" : 
							(duration === "I") ? "Instant" : 
							(duration === "P") ? "Permanent" :
							"Special";

						// NOTES
						if (spell.descriptors != null) {
				            update[`${section}_notes`] = spell.descriptors;
				         }
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(spell.name), error);
					}
				});
			}

			// POWERS
			if (character.powers != null && character.powers.power != null) {
				const powersList = getArray(character.powers.power);
				powersList.forEach((power) => {
					try {
						const id = generateRowID();
						const section = `repeating_powers_${id}`;

						update[`${section}_name`] = (power.fullname != null) ? power.fullname : power.name;
						update[`${section}_rating`] = power.rating;

						 if (power.totalpoints != null) {
						 	update[`${section}_notes`] = `Total Points: ${power.totalpoints}.`;
						 }
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(power.name), error);
					}
				});
			}

			// LIFESTYLES
			if (character.lifestyles != null && character.lifestyles.lifestyle != null) {
				const lifestyleList = getArray(character.lifestyles.lifestyle);
				lifestyleList.forEach((lifestyle) => {
					try {
						const id = generateRowID();
						const section = `repeating_lifestyle_${id}`;

						update[`${section}_name`] = lifestyle.name;
						update[`${section}_flag`] = "display";

						if (lifestyle.qualities != null && lifestyle.qualities.quality) {
							const lqualitiesList = getArray(lifestyle.qualities.quality);
							let lifestyleQualities = "";
							lqualitiesList.forEach((quality) => {
								try {
									lifestyleQualities += (quality.fullname != null) ? quality.fullname : quality.name;
								} catch (error) {
									setText["error"] += addFeedback(JSON.stringify(quality.name), error);
								}
							});

							update[`${section}_lifestyle`] = lifestyleQualities;
						}
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(lifestyle.name), error);
					}
				});
			}

			// CONTACTS
			if (character.contacts != null && character.contacts.contact != null) {
				const contactList = getArray(character.contacts.contact);
				contactList.forEach((contact) => {
					try {
						const id = generateRowID();
						const section = `repeating_contacts_${id}`;
						let contactNotes = "";

					    update[`${section}_name`] = (contact.role != null) ? `${contact.name} (${contact.role})` : `${contact.name}`;
					    update[`${section}_loyalty`] = contact.loyalty;
					    update[`${section}_connection`] = contact.connection;
					    update[`${section}_flag`] = "display";

					    ["metatype", "sex", "age", "preferredpayment", "hobbiesvice", "personallife"].forEach((detail) => {
					    	if (contact[`${detail}`] != null) {
					    		contactNotes += `${contact[`${detail}`]}. `
					    	}
					    });

					    update[`${section}_notes`] = contactNotes;

					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(contact.name), error);
					}
				});
			}

			// VEHICLE KEYS
			const vehicleKeys = {
				"handling": "handling_base"
				,"accel": "acceleration_base"
				,"speed": "speed_base"
				,"body": "body_base"
				,"armor": "armor_base"
				,"sensor": "sensor_base"
				,"pilot": "pilot_base"
			};

			// VEHICLES
		/*	if (character.vehicles != null && character.vehicles.vehicle != null) {
				const vehicleList = getArray(character.vehicles.vehicle);
				vehicleList.forEach((vehicle) => {
					try {
						const id = generateRowID();
						const section = `repeating_vehicle_${id}`;
						let vehicleNotes = "";

						update[`${section}_name`] = vehicle.name;
						update[`${section}_flag`] = "display";
						Object.keys(vehicleKeys).forEach((key) => {
							if (vehicle[`${key}`] && vehicle[`${key}`] != null) {
								update[`${section}_${vehicleKeys[`${key}`]}`] = 
									(vehicle[`${key}`].includes("/")) ? getSplitNum(vehicle[`${key}`]) : 
									vehicle[`${key}`];
							};
						}); 

						["attack", "sleaze", "dataprocessing", "firewall", "devicerating"].forEach((matrixAttr) => {
							vehicleNotes += (matrixAttr === "devicerating") ? `Device Rating (${vehicle[`${matrixAttr}`]}) ` : 
								(matrixAttr === "firewall") ? `${vehicle[`${matrixAttr}`]} ` : `${vehicle[`${matrixAttr}`]}/`;
						}); 

						if (vehicle.mods != null && vehicle.mods.mod != null) {
							const vehicleModsList = getArray(vehicle.mods.mod);
							vehicleNotes += "Mods: "
							vehicleModsList.forEach((mod) => {
								vehicleNotes += (mod.fullname != null) ? `${mod.fullname}, ` : `${mod.name}, `;
							});
						}
				
						if (vehicle.gears != null && vehicle.gears.gear != null) {
							const vehicleGearList = getArray(vehicle.gears.gear);
							vehicleNotes += "Gear: "
							vehicleGearList.forEach((gear) => {
								if (gear.children != null && gear.children.gear != null) {
									const vehicleChildrenList = getArray(gear.children.gear);
									let vehicleChildrenNotes = "";
									vehicleChildrenList.forEach((child) => {
										vehicleChildrenNotes += `${child.name}, `;
									});
									vehicleNotes += `${gear.name} (${vehicleChildrenNotes}), `;
								} else {
									vehicleNotes += `${gear.name}, `;
								};
							});
						} 
				
						update[`${section}_notes`] = vehicleNotes;
					} catch (error) {
						setText["error"] += addFeedback(JSON.stringify(vehicle.name), error);
					}
				});
			}

		*/

			setCharmancerText(setText);
			resolve(update);

			console.log(update);
		}).then((update) => {
			let setText = {
				"hidden": ""
			};

			//GENERATE INPUTS TO SAVE THE DATA
			Object.keys(update).forEach((key) => {
				const label = (key.includes("_")) ? key.replace("_", " ") : key;
				const input = `<label><div>${label}</div><input type="text" name="comp_${key}" value="${update[key]}" /></label>`;
				setText[`hidden`] += (setText[`hidden`].includes(input)) ? "" : input;

				const feedbackLabel = 
					(key.includes("repeating")) ? key.split("_")[3] : 
					(key.includes("_")) ? key.replace("_", " ") : key;
				(feedbackLabel === "flag" || feedbackLabel === "display") ? false : setText["results"] += addFeedback(feedbackLabel, update[key]);
			});

			setAttrs(update);

			return setText;
		}).then((result) => {
			setCharmancerText(result);
		});
	};

	// APPLY Changes
	on("mancerfinish:apply", () => {
		const mancerData = getCharmancerData();
		const mancerValues = mancerData["importer"].values;

		Object.keys(mancerValues).forEach((key) => {
			if (key == "builder" || key == "jsonData" || key == "hidden") {
				delete mancerValues[key];
			};
		});

    	clean();
		setAttrs(mancerValues, () => {
			console.log(`%c APPLY IMPORTER:`, "color: blue; font-weight:bold");
			console.log(mancerValues);
			deleteCharmancerData(["importer"]);
			finishCharactermancer();
		});
	}); 
</script><!-- CHARACTERMANCER IMPORTER -->
<charmancer class="sheet-charmancer-importer">
	<div class="mancer-box">
		<h1>Shadowrun Fifth Edition Character Importer</h1>
		<h2>Setup</h2>
		<p>This will import character JSON data generated from Chummer 5. This is an <em>experimental</em> feature which is not 100% completed. It will save you a bit of time when bringing a character to Roll20.</p>	
		<h3>Pick Character Builder</h3>
		<div class="pick-builder">
			<label title="choose chummer">
				<h4>Chummer</h4>
				<input type="radio" name="comp_builder" value="Chummer" checked />
			</label>
			<!--<label title="choose hero lab">
				<h4>Hero Lab</h4>
				<input type="radio" name="comp_builder" value="Hero Lab" />
			</label>-->
		</div>
		<div class="directions"></div>
		<h3>Enter JSON Here</h3>
		<textarea name="comp_jsonData" placeholder="Add JSON here"></textarea>
		<button type="action" name="act_import" data-i18n="import">Import</button>

		<hr />

		<h2>Results</h2>
		<!-- <p>Review for errors and resolve them in your JSON as needed before completing the import by clicking Apply.</p> -->
		<div class="import-feedback"><p>Enter a JSON string in the text area above.</p></div>
		<div class="result-grid">
			<h3>Character data to be updated</h3>
			<div class="results"><p>Import button has not been pressed yet.</p></div>
			<h3>Character data not to be updated</h3>
			<div class="error"><p>Import button has not been pressed yet.</p></div>
		</div>
		<h4 class="hidden-header">Show Hidden Inputs</h4>
		<input type="checkbox" name="comp_hidden" value="on">
		<div class="hidden"></div>

		<hr />

		<h2>Complete</h2>
		<p>After reviewing the data above, click Apply. This will <strong>overwrite</strong> data on the sheet where applicable.</p>
		<h3>Chummer Notes</h3>
		<ul>
    		<li>
    			Chummer frequently has the wrong information for <strong>Weapons</strong>. Review them in the Arms tab after clicking apply.
    		</li>
    		<li>
    			<strong>Specializations</strong> will not be applied to Weapons or Magic. You will need to manually update the checkbox.
    		</li>
    		<li>
    			<strong>Vehicles</strong> will not be imported.
    		</li>
    		<li>
    			<strong>Complex Forms</strong> will not be imported.
    		</li>
    	</ul>
		<div class="finish-button">
			<button class="finish" type="finish" value="apply" data-i18n="apply" disabled>Apply</button>
		</div>

		 <div class="bottombar">
		   <button class="prev" type="cancel" value="cancel" data-i18n="cancel">Cancel</button>
		 </div>
	 </div>
</charmancer>

<charmancer class="sheet-charmancer-final">
    <div class="charmancer">
        <div class="">
           <h1>Importing your Shadowrun character...overwriting previous data</h1>
           <img alt="emerald productions, llc" src="https://raw.githubusercontent.com/Roll20/roll20-character-sheets/master/Shadowrun5thEdition/images/EProd_Title_Green.jpg" />
        </div>
    </div>
</charmancer>
